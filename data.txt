<%--
***********************************************************************************************************************************
Name: [ABHouseholdMembersSummary.jsp]		Created By: [Prasanna Rajan]		Created On: [01/13/2006]
Purpose: [Access 4.0]
Modification Logs:
Modified By 								Date					Reason & description
[Prasanna Rajan]		    	[01/13/2006]		[Implemented business logic]
***********************************************************************************************************************************
--%>            
        
<%-- NOT EDITABLE - Fw Page Directive, Imports, and URIs --%>                 
<%@page import="gov.illinois.access.business.entities.APP_RGST_Cargo"%>
<%@ include file = "/frameworkIncludes/directives.jsp" %>          

<%-- EDITABLE - Page Specific Imports and URIs (You can add code to this section) --%>
  <%@page import="gov.illinois.access.business.customEntities.INDIVIDUAL_Custom_Collection,
										 gov.illinois.access.business.customEntities.INDIVIDUAL_Custom_Cargo,
									     gov.illinois.access.management.individuals.PeopleHandler,
									     gov.illinois.access.management.programs.FwProgramManager,
									     gov.illinois.access.management.programs.IProgramManager"%>   
<%@page import="gov.illinois.framework.management.references.IReferenceTableManager"%>
<%@page import="gov.illinois.framework.management.references.ReferenceTableManager"%>
<%@page import="gov.illinois.access.management.util.DateRoutine"%>
<%@page import="gov.illinois.access.management.util.DisplayFormatter"%>
<%@page import="java.text.SimpleDateFormat"%>
<%@page import="gov.illinois.access.business.entities.APP_INDV_Cargo"%>
<%@page import="gov.illinois.access.business.entities.APP_INDV_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_HSHL_RLT_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_HSHL_RLT_Cargo"%>
<%@page import="gov.illinois.access.business.entities.APP_IN_DABL_Cargo"%>
<%@page import="gov.illinois.access.business.entities.APP_IN_DABL_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_IN_PREG_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_IN_PREG_Cargo"%>
<%@page import="gov.illinois.access.business.entities.APP_AUTH_REP_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_AUTH_REP_Cargo"%>
<%@page import="gov.illinois.access.business.customEntities.APP_ABS_PRNT_Cust_Collection"%>
<%@page import="gov.illinois.access.business.customEntities.APP_ABS_PRNT_Cust_Cargo"%>
<%@page import="gov.illinois.access.business.entities.APP_IN_PRFL_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_IN_PRFL_Cargo"%>
<%@page import="gov.illinois.access.business.entities.APP_IN_ABSNP_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_IN_ABSNP_Cargo"%>
<%@page import="gov.illinois.access.business.entities.APP_RGST_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_RGST_Cargo"%>
<%@ page import="gov.illinois.framework.driver.FwPageManager"%>
<%@ page import="gov.illinois.framework.driver.IPage"%>
<%@page import="gov.illinois.framework.management.messages.FwMessageManager"%>
<%@page import="gov.illinois.framework.management.util.FwMessageFormatter"%>
<%@page import="gov.illinois.framework.management.messages.FwMessageList"%>
<%@page import="gov.illinois.framework.management.messages.FwMessage"%>

<%@page import="gov.illinois.access.management.util.IndividualAge"%>
<%@ page import="gov.illinois.access.business.rules.household.SOGIReferenceHelper"%>
<%@page import="org.owasp.encoder.Encode" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>								     
<%-- EDITABLE - Page Specific useBean tags(You can add code to this section) --%>
<jsp:useBean id="firstName" class="gov.illinois.access.presentation.pageElements.FirstName" scope="application"/>  
<jsp:useBean id="individual" class="gov.illinois.access.presentation.pageElements.Individual"	scope="application" />
<jsp:useBean id="ABHouseHoldMembersListview_ListView" class="gov.illinois.access.presentation.entities.listview.ABHouseHoldMembersListview" scope="request"/>
<jsp:useBean id="ABHouseHoldOutsideHomeMembersListview_ListView" class="gov.illinois.access.presentation.entities.listview.ABHouseHoldOutsideHomeMembersListview" scope="request"/>
<jsp:useBean id="ABHouseHoldMembersRelationshipsListview_ListView" class="gov.illinois.access.presentation.entities.listview.ABHouseHoldMembersRelationshipsListview" scope="request"/>
<jsp:useBean id="ABHouseHoldMembersPregnancyListview_ListView" class="gov.illinois.access.presentation.entities.listview.ABHouseHoldMembersPregnancyListview" scope="request"/>
<jsp:useBean id="ABHouseHoldOtherParentsListview_ListView" class="gov.illinois.access.presentation.entities.listview.ABHouseHoldOtherParentsListview" scope="request"/>
<jsp:useBean id="ABHouseHoldMembersBlindDisableListview_ListView" class="gov.illinois.access.presentation.entities.listview.ABHouseHoldMembersBlindDisableListview" scope="request"/>
<jsp:useBean id="ABHouseHoldMembersInstitutionListview_ListView" class="gov.illinois.access.presentation.entities.listview.ABHouseHoldMembersInstitutionListview" scope="request"/>
<jsp:useBean id="ABIND_Status" class="java.lang.String" scope="request" />

<%-- NOT EDITABLE - Head Tag Includes the DOCTYPE , META tags, teh form tag, the common JS files and CSS files to include in all the ACCESS JSPs --%>  
<AP:FwHeadTag  currentPageID="ABHMS" defaultPageAction="ABHMSNext" displayNavLinks="<%=FwConstants.NO%>" disableFocusOnFirstField="<%=FwConstants.YES%>"/>   

<%-- EDITABLE - Page specific .js or .css files (You can add code to this section) --%>  

<%-- Added for ILIES-167607 --%>
<TR>
<TD>
</TD>
</TR>
<%-- Ended for ILIES-167607 --%>
<%-- NOT EDITABLE - Welcome Tag and Toolbar Tag --%> 
<AP:FwWelcomeTag>  
	<AP:FwToolbarTag  helpImage="<%=FwConstants.YES%>"/>
</AP:FwWelcomeTag>  

<%-- NOT EDITABLE - Framework Hidden Fields --%>
<TL:FwHiddenFieldsTag />

<TL:FwListviewHiddenFieldsTag />
<%-- EDITABLE - Page Specific Hidden Fields (You can add code to this section) --%>

<%--NOT EDITABLE - Message Display Table  --%>  
<AP:FwMessageDisplayTag/>

<%--NOT EDITABLE - Begin Inner Body Tag. --%>
<AP:FwBodyTableTag hideNav="<%=FwConstants.NO%>"> 

<AP:AFBMenuTag />

	<%--NOT EDITABLE - End BodyTableTag. --%>
</AP:FwBodyTableTag>

<%-- EDITABLE - Additional JSP Scriplets (You can add code to this section)--%> 

<%-- EDITABLE (You can add code to this section) - Page Specific Table(s) - This is each developers area for coding the presentation. --%>	

<%
	boolean isDocMhProvider = null != session.getAttribute(AppConstants.DOC_MH_PROVIDER) && AppConstants.YES.equalsIgnoreCase((String)session.getAttribute(AppConstants.DOC_MH_PROVIDER)) ? true : false;
	//Disable buttons
	//ILIES-311729 start
	boolean isError=false;
	if (!isDocMhProvider){
	FwMessageList messageList = (FwMessageList) request
								.getAttribute(FwConstants.MESSAGE_LIST);
	
					if(messageList != null && messageList.getMessageListSize() >  0 ){
							for (int error = 0; error < messageList
									.getMessageListSize(); error++) {
								FwMessage message = messageList
										.getMessageAtIndex(error);
								if (message != null
										&& message.getMessageCode() != null
										&& message.getMessageCode().trim().length() > 0
										&& (message.getMessageCode().trim().equals(
												"99348"))){
												isError=true;
												}
				
		}
		
		}
		}
//ILIES-311729 end
%>

<TABLE BORDER="0" WIDTH="100%">
	<TR>
	<%	if(!isError){					%>
	  <TD>
	  
		<AP:FwSubsectionTag textID="32149" headerLevel="<%=FwConstants.HEADER_LEVEL_H1%>">
			<%if(isDocMhProvider){ %>
				<TABLE WIDTH="100%" border="0" CELLPADDING="0" CELLSPACING="0" role="presentation">						        			
			        <TR>
				        <TD WIDTH="100%">
					       <AP:FwPageLabelTag textID="180017107"/>
				        </TD>
			        </TR>
		      	</TABLE>
	      	<%}else{ %>	
					<TABLE WIDTH="100%" border="0" CELLPADDING="0" CELLSPACING="0">						        			
			        <TR>
				        <TD WIDTH="100%">
					       <AP:FwPageLabelTag textID="131915"/>
				        </TD>
			        </TR>
			        <TR><TD>&nbsp;</TD></TR>
			        <TR>
				        <TD align="left">
							<AP:FwButtonCSSTag button="<%=AppConstants.BUTTON_ADD_PERSON%>" pageAction="ABHMSAdd1" name="AddPerson" langButton="true" altId="Button_ADD_1"/>		
				        </TD>
			        </TR>
		      		</TABLE>
				
	      		
	      	<%} %>					        		
	  	</AP:FwSubsectionTag>
	  </TD>
	   	<%} %>	
	</TR>
	<%	//added for ILIES - 133592k
		String secondTime = (String)request.getAttribute("secondTime"); 
		//end for ILIES - 133592
		PeopleHandler peopleHandler = (PeopleHandler)session.getAttribute(AppConstants.INDIV_MASTER_HANDLER);
		//INDIVIDUAL_Custom_Collection individualsColl = peopleHandler.getRelevantIndividuals();
		//Map indvDropDown = peopleHandler.getIndividualsForDropdown();
		String box_title = "Id Proofing"; 
		// Getting people components from request
		INDIVIDUAL_Custom_Collection people_56 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_56");
		INDIVIDUAL_Custom_Collection people_58 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_58");
		// Added for ILIES-129516
		INDIVIDUAL_Custom_Collection people_5218 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_5218");
		INDIVIDUAL_Custom_Collection people_5219 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_5219");
		INDIVIDUAL_Custom_Collection people_41 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_41");
		INDIVIDUAL_Custom_Collection people_347 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_347");
		INDIVIDUAL_Custom_Collection people_418 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_418");
		INDIVIDUAL_Custom_Collection people_419 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_419");
				
		INDIVIDUAL_Custom_Collection indivCustCollBlindInc = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_56");
		Map indvMapBlindInc = peopleHandler.sortIndividualsForDropdown(indivCustCollBlindInc);

		// Pregnancy drop down filter logic
		// Getting sorted ordered individual
		List codeList = new ArrayList();
		List descList = new ArrayList();
		Map filteredIndvDropdown = new HashMap();
		String pregIndSeqNum = null;
		String dropDownIndvSeqNum = null;
	
		Map individualDropdownMap = peopleHandler.sortIndividualsForDropdown(people_347);
		List dropDownIndvSeqNumList = (List)individualDropdownMap.get(AppConstants.INDV_SEQUENCE_NUMBERS);
		List dropDownIndvDescList = (List)individualDropdownMap.get(AppConstants.INDV_DESCRIPTIONS);		
		int indvSize = dropDownIndvSeqNumList.size();

		int numOfRows = ABHouseHoldMembersPregnancyListview_ListView.getDisplayData().length;
		String[][] listViewData = ABHouseHoldMembersPregnancyListview_ListView.getDisplayData();
		int rowIndex = ABHouseHoldMembersPregnancyListview_ListView.getCurrRowIndex();
		
		for(int i=0;i<indvSize;i++){
			dropDownIndvSeqNum = (String)dropDownIndvSeqNumList.get(i);
			boolean matchFound = false;
			for (int j=rowIndex ; j < numOfRows; j++) {
				pregIndSeqNum = listViewData[j][0];
				if(pregIndSeqNum.equals(dropDownIndvSeqNum)){
					matchFound = true;
					break;
				}
			}
			if(!matchFound){
				codeList.add(dropDownIndvSeqNumList.get(i));
				descList.add(dropDownIndvDescList.get(i));
			}
		}
		filteredIndvDropdown.put(AppConstants.INDV_SEQUENCE_NUMBERS, codeList);
		filteredIndvDropdown.put(AppConstants.INDV_DESCRIPTIONS, descList);
		
		// Disability drop down filter logic
		// Getting sorted ordered individual
		List codeListBD = new ArrayList();
		List descListBD = new ArrayList();
		Map filteredIndvDropdownBD = new HashMap();
		String dablIndSeqNum = null;
		String dropDownIndvSeqNumBD = null;
		
		Map individualDropdownMapBD = peopleHandler.sortIndividualsForDropdown(people_56);
		List dropDownIndvSeqNumListBD = (List)individualDropdownMapBD.get(AppConstants.INDV_SEQUENCE_NUMBERS);
		List dropDownIndvDescListBD = (List)individualDropdownMapBD.get(AppConstants.INDV_DESCRIPTIONS);		
		int indvSizeBD = dropDownIndvSeqNumListBD.size();
		
		int numOfRowsBD = ABHouseHoldMembersBlindDisableListview_ListView.getDisplayData().length;
		String[][] listViewDataBD = ABHouseHoldMembersBlindDisableListview_ListView.getDisplayData();
		int rowIndexBD = ABHouseHoldMembersBlindDisableListview_ListView.getCurrRowIndex();
		
		for(int i=0;i<indvSizeBD;i++){
			dropDownIndvSeqNumBD = (String)dropDownIndvSeqNumListBD.get(i);
			boolean matchFoundBD = false;
			for (int j=rowIndexBD ; j < numOfRowsBD; j++) {
				dablIndSeqNum = listViewDataBD[j][0];
				if(dablIndSeqNum.equals(dropDownIndvSeqNumBD)){
					matchFoundBD = true;
					break;
				}
			}
			if(!matchFoundBD){
				codeListBD.add(dropDownIndvSeqNumListBD.get(i));
				descListBD.add(dropDownIndvDescListBD.get(i));
			}
		}
		filteredIndvDropdownBD.put(AppConstants.INDV_SEQUENCE_NUMBERS, codeListBD);
		filteredIndvDropdownBD.put(AppConstants.INDV_DESCRIPTIONS, descListBD);
		
		
		
		//Value of the html name when the no one is submitted in the request 
		String[] disablilityNoKey ={"Y","Disablity"};
		String[] drugFelonNoKey ={"Y","DrugFelon"};
		// Added for ILIES-129516
		String[] drugTrtPrgNoKey ={"Y","DrugTrtPrg"};
	    String[] parPrbViolNoKey ={"Y","ParPrbViol"};
		String[] foodStampNoKey ={"Y","FoodStampBenefits"};		
		//Added by Uma for SS Expansion
		String[] ssiBnftNoKey = {"Y","SSIB"};
		String[] cashBnftNoKey = {"Y","CASHB"};	

		String[] values = {"Y"};

		// Getting response map from request
		Map disabilityMap = (Map)request.getAttribute("RESP_MAP_56");
		Map drugFelonMap = (Map)request.getAttribute("RESP_MAP_58");
		// Added for ILIES-129516
		Map drugTrtPrgMap = (Map)request.getAttribute("RESP_MAP_5218");
		Map parProbViolMap = (Map)request.getAttribute("RESP_MAP_5219");
		Map foodStampMap = (Map)request.getAttribute("RESP_MAP_41");		
		//Added by Uma for SS Expansion
		Map responseMap_418 = (Map)request.getAttribute("RESP_MAP_418");
		Map responseMap_419 = (Map)request.getAttribute("RESP_MAP_419");								

		// Getting No One values from request		
		Map noOneCheckedMap = (Map) request.getAttribute("NO_ONE_CHECKED_MAP");
		
		String disablityNoOneCheckedValue = (String) noOneCheckedMap.get("NO_ONE_CHECKED_56");
		String drugFelonNoOneCheckedValue = (String) noOneCheckedMap.get("NO_ONE_CHECKED_58");
		// Added for ILIES-129516
		String drugTrtPrgNoOneCheckedValue = (String) noOneCheckedMap.get("NO_ONE_CHECKED_5218");
		String parProbViolNoOneCheckedValue = (String) noOneCheckedMap.get("NO_ONE_CHECKED_5219");
		String fsBenefitsNoOneCheckedValue = (String) noOneCheckedMap.get("NO_ONE_CHECKED_41");
		//Added by Uma for SS Expansion
		String ssiNoOneCheckedValue = (String)noOneCheckedMap.get("NO_ONE_CHECKED_418");
		String cashNoOneCheckedValue = (String)noOneCheckedMap.get("NO_ONE_CHECKED_419");
		
		
		//hide Institutional Details Section if Institution Page is not schdules
		boolean ABINDFlag = false;
		if(ABIND_Status.equals(FwConstants.YES))
		 	ABINDFlag = true;
		 	
		String addOutButton="HHOUTINFO" ;
		String addInButton="HHINFO";
		
		/* Added for ILIES-156735 */
		short[] pgmKey = (short[]) session.getAttribute(FwConstants.AFB_PROGRAM_KEY);
		IProgramManager programManager = FwProgramManager.getInstance();
		boolean isMSPOnlyProgramRequested = programManager.isMSPOnlyProgramRequested(pgmKey);
		boolean isSNAP = programManager.isThisProgramRequested(pgmKey,FwConstants.FS_INDEX);
		boolean isFppOnly = programManager.isFPPOnlyProgramRequested(pgmKey);
		boolean isSNAPOnlySelected = programManager.isSNAPOnlyProgramRequestedNew(pgmKey);
		boolean isMedical = programManager.isThisProgramRequested(pgmKey,FwConstants.FMA_INDEX);
		boolean isFppApplied = programManager.isThisProgramRequested(pgmKey,FwConstants.FPP_INDEX);
		
		
		boolean snapOnlySel = false;
		if(!isSNAPOnlySelected){
			snapOnlySel = true;
		}
				
		boolean isFpp = false;//programManager.isThisProgramRequested(pgmKey,FwConstants.FS_INDEX);
		if(!isFppOnly){
		     isFpp = true;
		}
		
		boolean isTaxCardtoShow = isMedical || isFppApplied;
		boolean isCASH = programManager.isThisProgramRequested(pgmKey,FwConstants.HC_INDEX);
		boolean isSNAPorCASH = isSNAP || isCASH; //SNAP or CASH
		String langCD = (String) ((Map) session.getAttribute(FwConstants.HTTP_SESSION)).get(AppConstants.LANGUAGE);
		APP_INDV_Collection personal_coll = request.getAttribute("appIndvColl") != null ? (APP_INDV_Collection) request.getAttribute("appIndvColl") : new APP_INDV_Collection();
		APP_RGST_Cargo registration_cargo = request.getAttribute("registration_info") != null ? (APP_RGST_Cargo) request.getAttribute("registration_info") : new APP_RGST_Cargo();
		APP_HSHL_RLT_Collection relation_coll = request.getAttribute("appHshlRltCollection") != null ? (APP_HSHL_RLT_Collection) request.getAttribute("appHshlRltCollection") : new APP_HSHL_RLT_Collection();
		APP_IN_DABL_Collection disability_coll = request.getAttribute("BLIND_DISABLE_COLLECTION") != null ?	(APP_IN_DABL_Collection) request.getAttribute("BLIND_DISABLE_COLLECTION") : new APP_IN_DABL_Collection();
		APP_IN_PREG_Collection pregnancy_coll = request.getAttribute("APP_PREG_COLLECTION") != null ?	(APP_IN_PREG_Collection) request.getAttribute("APP_PREG_COLLECTION") : new APP_IN_PREG_Collection();
		APP_AUTH_REP_Collection rprInfoColl = request.getAttribute("APP_AUTH_REP_COLLECTION") != null ? (APP_AUTH_REP_Collection) request.getAttribute("APP_AUTH_REP_COLLECTION") : new APP_AUTH_REP_Collection();
		APP_ABS_PRNT_Cust_Collection absPrntInfoColl = request.getAttribute("APP_ABS_PRNT_Cust_COLLECTION") != null ? (APP_ABS_PRNT_Cust_Collection) request.getAttribute("APP_ABS_PRNT_Cust_COLLECTION") : new APP_ABS_PRNT_Cust_Collection();
		APP_IN_PRFL_Collection appInPrflColl = session.getAttribute("APP_IN_PRFL_MASTER") != null ? (APP_IN_PRFL_Collection)session.getAttribute("APP_IN_PRFL_MASTER") : new APP_IN_PRFL_Collection();
		Map<String,String> program_array_string = request.getAttribute("program_array") != null ? (Map<String,String>) request.getAttribute("program_array"): new HashMap<String,String>();
		APP_IN_ABSNP_Collection absPrntINColl = request.getAttribute("appInAbsnpCollection") != null ? (APP_IN_ABSNP_Collection) request.getAttribute("appInAbsnpCollection") : new APP_IN_ABSNP_Collection();
		
		SimpleDateFormat simpleDateFormat = new SimpleDateFormat("MM/dd/yyyy");
		DateRoutine dateRoutine = DateRoutine.getInstance();
		DisplayFormatter displayFormatter = DisplayFormatter.getInstance();
		//Calculating the Approved representative
		APP_AUTH_REP_Cargo auth_rep_cargo = new APP_AUTH_REP_Cargo();
		String representative_fullName = FwConstants.EMPTY_STRING;
		if(rprInfoColl.size() > 0){
			auth_rep_cargo = (APP_AUTH_REP_Cargo) rprInfoColl.get(0);
			representative_fullName = auth_rep_cargo.getFiling_rep_fst_nam();
			representative_fullName += auth_rep_cargo.getFiling_rep_mid_nam() != null && auth_rep_cargo.getFiling_rep_mid_nam().trim().length() > 0 ? FwConstants.SPACE + auth_rep_cargo.getFiling_rep_mid_nam().trim() : FwConstants.EMPTY_STRING;
			representative_fullName += auth_rep_cargo.getFiling_rep_last_nam() != null && auth_rep_cargo.getFiling_rep_last_nam().trim().length() > 0 ? FwConstants.SPACE + auth_rep_cargo.getFiling_rep_last_nam().trim() : FwConstants.EMPTY_STRING;
		}
		pageContext.setAttribute("representative_fullName",representative_fullName);
		//Other information
		pageContext.setAttribute("foodStampMap",foodStampMap);
		pageContext.setAttribute("isSNAPorCASH",isSNAPorCASH);
		pageContext.setAttribute("isTaxCardtoShow",isTaxCardtoShow);
		pageContext.setAttribute("isFpp",isFpp);
		pageContext.setAttribute("isSNAP",isSNAP);
		pageContext.setAttribute("isCASH",isCASH);
		pageContext.setAttribute("snapOnlySel",snapOnlySel);
		
		//Destructive dialog box
		IPage iPageg = FwPageManager.createInstance();
		String ddbox_cancel = FwConstants.EMPTY_STRING;
		String ddbox_confirm = FwConstants.EMPTY_STRING;		
		ddbox_cancel = iPageg.getDisplayText(10224, langCD);
		ddbox_confirm = iPageg.getDisplayText(132056, langCD);
	%>
	<%--  added for ILIES-167607 --%>
	<tr>
	<td>
	<%-- added for ILIES - 133592 --%>	
	<input type="hidden" value="<%=secondTime%>" name="secondTime"/>

	<%-- end for ILIES - 133592 --%>	
	</td>
	</tr>
	<%--  ended for ILIES-167607 --%>
	<%--Added by smejiaibarra (ILIES-172330) --%>
	<%-- The previous code was removed because is deprecated --%>
	<TR>
		<TD>
		<% int i = 0, age = 20;
		   boolean ageflag = false; %>
		<c:forEach var="person" items="${indvAllColl.getResults()}" varStatus="count">
			<% i++;
			String extId; %>
			<div class="member-card">
				<%
					INDIVIDUAL_Custom_Cargo person_obj = pageContext.getAttribute("person") != null ? (INDIVIDUAL_Custom_Cargo) pageContext.getAttribute("person") : new INDIVIDUAL_Custom_Cargo();
					
					//Personal information
					String fullName = FwConstants.EMPTY_STRING;
					String suffixValue = FwConstants.EMPTY_STRING;
					String genderLabel = FwConstants.EMPTY_STRING;
					String dob = FwConstants.EMPTY_STRING;
					String wherePersonLive = FwConstants.EMPTY_STRING;
					String language_indv = FwConstants.EMPTY_STRING;
					String first_name = FwConstants.EMPTY_STRING;
					String sexAssignedAtBirth = FwConstants.EMPTY_STRING;
					String genderIdentity = FwConstants.EMPTY_STRING;
					String sexualOrientation = FwConstants.EMPTY_STRING;
					String birth = FwConstants.EMPTY_STRING;
					int ageInYears = 0;
					boolean isAChild = false;
					IReferenceTableManager iref = ReferenceTableManager.getInstance();
					if(person_obj.getSuffix_name() != null && !person_obj.getSuffix_name().trim().equals("7")){
						suffixValue = iref.getColumnValue("TSUF",731,person_obj.getSuffix_name(),langCD);
					}
					if(person_obj.getSex_ind() != null){
						genderLabel = iref.getColumnValue("TGEN",1,person_obj.getSex_ind(),langCD);
					}
					dob = simpleDateFormat.format(dateRoutine.getDateFromTimeStamp(person_obj.getBrth_dt()));
					birth = dob;
					/* Added by Nancy Jain for ILIES-283824 : If dob is equal to high date then we are making dob value empty. */
					if((AppConstants.HIGH_DATE_MMDDYYYY).equals(dob)){
                        dob = "";
                    }
					pageContext.setAttribute("suffix",suffixValue);
					pageContext.setAttribute("gender",genderLabel.trim());
					pageContext.setAttribute("dob",dob);					

					APP_INDV_Cargo appIndvCargo = new APP_INDV_Cargo();
					for(APP_INDV_Cargo personal_info : personal_coll.getResults()){
						if(personal_info.getIndv_seq_num() != null && personal_info.getIndv_seq_num().equals(person_obj.getIndv_seq_num())){
							appIndvCargo = personal_info;
							break;
						}
					}
					pageContext.setAttribute("appIndvCargo",appIndvCargo);
					
					
					if(appIndvCargo.getLive_arng_typ() != null){
						wherePersonLive = iref.getColumnValue("TLIA",740,appIndvCargo.getLive_arng_typ(),langCD);
					}
					if(appIndvCargo.getSex_at_birth() != null){
						sexAssignedAtBirth = iref.getColumnValue("TPTB",9857,appIndvCargo.getSex_at_birth(),langCD);
						if(sexAssignedAtBirth==null || sexAssignedAtBirth.trim().length() == 0)
						sexAssignedAtBirth = FwConstants.EMPTY_STRING;
					}
					if(appIndvCargo.getGender_identity() != null){
						genderIdentity = iref.getColumnValue("TPTG",9858,appIndvCargo.getGender_identity(),langCD);
						if(genderIdentity==null || genderIdentity.trim().length() == 0)
						genderIdentity = FwConstants.EMPTY_STRING;
					}
					if(appIndvCargo.getSexual_orientation() != null){
						sexualOrientation = iref.getColumnValue("TPTS",9859,appIndvCargo.getSexual_orientation(),langCD);
						if(sexualOrientation==null || sexualOrientation.trim().length() == 0)
						sexualOrientation = FwConstants.EMPTY_STRING;
					}
					if(appIndvCargo.getLang_cd() != null){
						language_indv = iref.getColumnValue("TLAG",61,appIndvCargo.getLang_cd(),langCD).trim();						
					}
					
					
					IndividualAge person_age = person_obj.getIndv_age();
					if(person_age != null){
					ageInYears = person_age.getYears();
					}
					if(!ageflag){
						age = person_age.getYears();
						ageflag = true;
					}
					String gender = person_obj.getSex_ind() == null ? AppConstants.EMPTY_STRING : person_obj.getSex_ind().trim();
					isAChild = person_age != null && person_age.getYears() <= 18;
					String person_type = gender.equals(AppConstants.SEX_IND_MALE) ? (person_age != null && person_age.getYears() > 18 ? "male_adult_grey" : "male_child_grey") : (person_age != null && person_age.getYears() > 18 ? "female_adult_grey" : "female_child_grey");
					String src_image = String.format("%s/%s.gif",AppConstants.FOLDER_IMAGES,person_type);
					String person_icon = String.format("<img src=\"%s\" alt=\"\"/>",src_image);
					
					String phoneToDisplay = FwConstants.EMPTY_STRING;
					if(registration_cargo != null){
						phoneToDisplay = registration_cargo.getPref_cntc_ind().equals("1") ? registration_cargo.getHshl_home_phn_num() : phoneToDisplay;
						phoneToDisplay = registration_cargo.getPref_cntc_ind().equals("2") ? registration_cargo.getHshl_work_phn_num() : phoneToDisplay;
						phoneToDisplay = registration_cargo.getPref_cntc_ind().equals("3") ? registration_cargo.getHshl_cell_phn_num() : phoneToDisplay;
						if(registration_cargo.getPref_cntc_ind().equals("0") || registration_cargo.getPref_cntc_ind().equals("6")){
							phoneToDisplay =  phoneToDisplay.length() <= 0 && registration_cargo.getHshl_home_phn_num().trim().length() > 0 ? registration_cargo.getHshl_home_phn_num() : phoneToDisplay;
							phoneToDisplay =  phoneToDisplay.length() <= 0 && registration_cargo.getHshl_work_phn_num().trim().length() > 0 ? registration_cargo.getHshl_work_phn_num() : phoneToDisplay;
							phoneToDisplay =  phoneToDisplay.length() <= 0 && registration_cargo.getHshl_cell_phn_num().trim().length() > 0 ? registration_cargo.getHshl_cell_phn_num() : phoneToDisplay;
							phoneToDisplay =  phoneToDisplay.length() <= 0 && registration_cargo.getMsg_phn_num().trim().length() > 0 ? registration_cargo.getMsg_phn_num() : phoneToDisplay;
						}
					}
					phoneToDisplay = phoneToDisplay.length() >= 10 ? String.format("%s-%s-%s",phoneToDisplay.subSequence(0,3),phoneToDisplay.subSequence(3,6),phoneToDisplay.subSequence(6,10)) : FwConstants.EMPTY_STRING;
					
					fullName = String.format("%s%s%s%s",appIndvCargo.getFst_nam() != null && appIndvCargo.getFst_nam().trim().length() > 0 ? appIndvCargo.getFst_nam().trim() + FwConstants.SPACE : FwConstants.EMPTY_STRING,
					appIndvCargo.getMid_init() != null && appIndvCargo.getMid_init().trim().length() > 0 ? appIndvCargo.getMid_init().trim() + FwConstants.SPACE : FwConstants.EMPTY_STRING,
					appIndvCargo.getLast_nam() != null && appIndvCargo.getLast_nam().trim().length() > 0 ? appIndvCargo.getLast_nam().trim() : FwConstants.EMPTY_STRING,
					suffixValue.length() > 0 ? FwConstants.SPACE + suffixValue : FwConstants.EMPTY_STRING);
					
					first_name = appIndvCargo.getFst_nam() != null ? appIndvCargo.getFst_nam().trim() : FwConstants.EMPTY_STRING;
					String frst_name_list[] = new String[1];
					frst_name_list[0] = first_name;
					
					String full_name_list[] = new String[1];
					full_name_list[0] = fullName;
					IPage iPage = FwPageManager.createInstance();
					String full_name_label = FwConstants.EMPTY_STRING;
					full_name_label = iPage.getDisplayText(131947, langCD);
					full_name_label = FwMessageFormatter.getFormattedMessage(full_name_label,full_name_list);
														
					pageContext.setAttribute("fullName",fullName);
					pageContext.setAttribute("wherePersonLive",wherePersonLive);
					pageContext.setAttribute("language_indv",language_indv);
					pageContext.setAttribute("person_icon",person_icon);
					pageContext.setAttribute("isAChild",isAChild);
					pageContext.setAttribute("phoneToDisplay",phoneToDisplay);
					pageContext.setAttribute("sexAssignedAtBirth",sexAssignedAtBirth);
					pageContext.setAttribute("genderIdentity",genderIdentity);
					pageContext.setAttribute("sexualOrientation",sexualOrientation);
					
					//Relationship information
					ArrayList<String> relation_array = new ArrayList<String>();
					for(APP_HSHL_RLT_Cargo rel_cargo : relation_coll.getResults()){
						if(rel_cargo.getSrc_indv_seq_num().equals(person_obj.getIndv_seq_num()))
						{						
							String relation = iref.getColumnValue("TREL",65,rel_cargo.getRlt_cd(),langCD);
							for(APP_INDV_Cargo personal_info : personal_coll.getResults()){
								if(personal_info.getIndv_seq_num() != null && personal_info.getIndv_seq_num().equals(rel_cargo.getRef_indv_seq_num())){
									String suffix_temp = FwConstants.EMPTY_STRING;
									if(personal_info.getSuffix_name() != null){
										suffix_temp = iref.getColumnValue("TSUF",731,personal_info.getSuffix_name(),langCD);
									}
									relation += " <strong>" + String.format("%s %s %s %s",personal_info.getFst_nam(),personal_info.getMid_init(),personal_info.getLast_nam(),suffix_temp) + "</strong>";
									break;
								}
							}
							relation_array.add(relation);
						}
					}
					pageContext.setAttribute("relation_array",relation_array);
					
					
					/*ILIES-311729 - Start: Added the Tax information section in the summary*/
					//Tax information
					if (!isDocMhProvider){
						HashMap<String,String> personTaxDependentInfo = new HashMap<String,String>();
						//Changes for ILIES-315828 - START
						Map<String, String> personJointlyTaxFilingInfo = new HashMap<String, String>();
					
						if(relation_coll.getResults()!=null && relation_coll.getResults().length!=0){
							for(APP_HSHL_RLT_Cargo relCargo : relation_coll.getResults()){
								String seqFiler = "";
								String seqDependent = "";
								if(relCargo.getTax_dependent_sw() != null && relCargo.getTax_dependent_sw().equals("Y")){
									seqFiler = relCargo.getSrc_indv_seq_num();
									seqDependent = relCargo.getRef_indv_seq_num();
								} else if(relCargo.getTax_dependent_sw() != null && relCargo.getTax_dependent_sw().equals("I")){
									seqFiler = relCargo.getRef_indv_seq_num();
									seqDependent = relCargo.getSrc_indv_seq_num();
								}
								
								String taxDependents = personTaxDependentInfo.get(seqFiler);
								for(APP_INDV_Cargo personalInfo : personal_coll.getResults()){
									if(personalInfo.getIndv_seq_num() != null && personalInfo.getIndv_seq_num().equals(seqDependent)){
										if(taxDependents == null || taxDependents.equals(""))
											taxDependents = personalInfo.getFst_nam() + " " + personalInfo.getLast_nam();
										else
											taxDependents += ", " + personalInfo.getFst_nam() + " " + personalInfo.getLast_nam();
									}
								}
								personTaxDependentInfo.put(seqFiler, taxDependents);
								
								if(relCargo.getRlt_cd().equals("HUS") || relCargo.getRlt_cd().equals("WIF")) {
									personJointlyTaxFilingInfo.put(relCargo.getSrc_indv_seq_num(), relCargo.getTax_jointly_filed_sw());
									personJointlyTaxFilingInfo.put(relCargo.getRef_indv_seq_num(), relCargo.getTax_jointly_filed_sw());
								}
							}
						}
						pageContext.setAttribute("personal_coll", personal_coll);
						pageContext.setAttribute("personJointlyTaxFilingInfo", personJointlyTaxFilingInfo);
						pageContext.setAttribute("personTaxDependentInfo", personTaxDependentInfo);
						//Changes for ILIES-315828 - END
					}
					/*ILIES-311729 - End: Added the Tax information section in the summary*/
					
					//Disability Information
					String detBlind  = FwConstants.EMPTY_STRING;
					String detDisable = FwConstants.EMPTY_STRING;
					boolean hasDisabilities = false;
					for(APP_IN_DABL_Cargo dsl_info : disability_coll.getResults()){
						if(dsl_info.getIndv_seq_num() != null && dsl_info.getIndv_seq_num().equals(person_obj.getIndv_seq_num())){
							detBlind = dsl_info.getEstb_blnd_resp() != null && !dsl_info.getEstb_blnd_resp().trim().equals(FwConstants.EMPTY_STRING) ? dsl_info.getEstb_blnd_resp() : FwConstants.EMPTY_STRING;
							detDisable = dsl_info.getEstb_dabl_resp() != null && !dsl_info.getEstb_dabl_resp().trim().equals(FwConstants.EMPTY_STRING) ? dsl_info.getEstb_dabl_resp() : FwConstants.EMPTY_STRING;
							hasDisabilities = true;
						}
					}
					pageContext.setAttribute("detBlind",detBlind);
					pageContext.setAttribute("detDisable",detDisable);
					pageContext.setAttribute("hasDisabilities",hasDisabilities);
					
					//Pregnancy information
					String num_childs = FwConstants.EMPTY_STRING;
					String due_expected = FwConstants.EMPTY_STRING;
					for(APP_IN_PREG_Cargo pregnancy_info : pregnancy_coll.getResults()){
						if(pregnancy_info.getIndv_seq_num() != null && pregnancy_info.getIndv_seq_num().equals(person_obj.getIndv_seq_num())){
							num_childs = pregnancy_info.getFetus_ct() != FwConstants.EMPTY_STRING ? pregnancy_info.getFetus_ct() : "0";
							due_expected = pregnancy_info.getPreg_due_dt() != null ? simpleDateFormat.format(dateRoutine.getDateFromTimeStamp(pregnancy_info.getPreg_due_dt())) : FwConstants.EMPTY_STRING;
							break;
						}
						
					}
					pageContext.setAttribute("num_childs",num_childs);
					pageContext.setAttribute("due_expected",due_expected);
					String num_preg_list[] = new String[1];
					num_preg_list[0] = num_childs;
					String date_preg_list[] = new String[1];
					date_preg_list[0] = due_expected;
					//Absent parent information
					boolean hasAnsentPrnt = false;
					String parent_gender = FwConstants.EMPTY_STRING;
					for(APP_IN_ABSNP_Cargo abs_prnt_info : absPrntINColl.getResults()){
						if(abs_prnt_info.getIndv_seq_num() != null && abs_prnt_info.getIndv_seq_num().equals(person_obj.getIndv_seq_num())){
							hasAnsentPrnt = true;
							parent_gender = abs_prnt_info.getPater_estb_sw();
							break;
						}						
					}
					pageContext.setAttribute("hasAnsentPrnt",hasAnsentPrnt);
					pageContext.setAttribute("parent_gender",parent_gender);
					//Other information
					String foodStamp = foodStampMap != null ? (String) foodStampMap.get(person_obj.getIndv_seq_num()) : FwConstants.EMPTY_STRING;
					String drugFelon = drugFelonMap != null ? (String) drugFelonMap.get(person_obj.getIndv_seq_num()) : FwConstants.EMPTY_STRING;
					pageContext.setAttribute("foodStamp",foodStamp);
					pageContext.setAttribute("drugFelon",drugFelon);
					
					//ffcstate
					boolean isFrmrFstrCrPrsn = false;
					String fosterPersonFName = FwConstants.EMPTY_STRING;
					String fosterPersonAgedOutState = FwConstants.EMPTY_STRING;
					String frmrFosterStateCd = FwConstants.EMPTY_STRING;
					String fosterLabel = FwConstants.EMPTY_STRING;
					
					if(appInPrflColl !=null && appInPrflColl.getResults() != null && appInPrflColl.getResults().length >0 ){
					
						for(APP_IN_PRFL_Cargo appInPrflCargo : appInPrflColl.getResults()){
							isFrmrFstrCrPrsn = false;
							if(appInPrflCargo.getIndv_seq_num() != null && appInPrflCargo.getIndv_seq_num().equals(person_obj.getIndv_seq_num())){
								if(appInPrflCargo.getFormer_foster_sw()!=null && ('N' != appInPrflCargo.getFormer_foster_sw().charAt(0))
								    && appInPrflCargo.getFormer_foster_state_cd()!= null ){
												
									isFrmrFstrCrPrsn = true;
									// fetch first name and state
									if(appInPrflCargo.getFormer_foster_state_cd() != null){
										frmrFosterStateCd = appInPrflCargo.getFormer_foster_state_cd();
									
										IPage iPageFC = FwPageManager.createInstance();
										fosterPersonFName = appIndvCargo.getFst_nam() != null ? appIndvCargo.getFst_nam().trim() : FwConstants.EMPTY_STRING;
										fosterPersonAgedOutState = iref.getColumnValue("FFCS",333450,frmrFosterStateCd,langCD);
										if(fosterPersonAgedOutState == null || fosterPersonAgedOutState.trim().length() == 0)
											fosterPersonAgedOutState = FwConstants.EMPTY_STRING;
										if("UK".equalsIgnoreCase(frmrFosterStateCd)){
											String dispTextSubsFstCrUnknown[] = new String[1];
											dispTextSubsFstCrUnknown[0] = fosterPersonFName;
											fosterLabel = iPage.getDisplayText(180017033, langCD);
											fosterLabel = FwMessageFormatter.getFormattedMessage(fosterLabel,dispTextSubsFstCrUnknown);
										}else{
											String dispTextSubsFstCr[] = new String[2];
											dispTextSubsFstCr[0] = fosterPersonFName;
											dispTextSubsFstCr[1] = fosterPersonAgedOutState;
											fosterLabel = iPage.getDisplayText(180017032, langCD);
											fosterLabel = FwMessageFormatter.getFormattedMessage(fosterLabel,dispTextSubsFstCr);
										}
									}
									break;
								}
							}						
						}
				  	}	
					pageContext.setAttribute("isFrmrFstrCrPrsn",isFrmrFstrCrPrsn);
					
					//Benefits chosen
					ArrayList<String> benefits_array = new ArrayList<String>();
					for(APP_IN_PRFL_Cargo appInPrflCargo : appInPrflColl.getResults()){
						if(appInPrflCargo.getIndv_seq_num() != null && appInPrflCargo.getIndv_seq_num().equals(person_obj.getIndv_seq_num())){
							benefits_array.add(appInPrflCargo.getIndv_fs_rqst_ind() != null && appInPrflCargo.getIndv_fs_rqst_ind().equals("1") ? program_array_string.get("2") : FwConstants.EMPTY_STRING);
							benefits_array.add(appInPrflCargo.getIndv_fma_rqst_ind() != null && appInPrflCargo.getIndv_fma_rqst_ind().equals("1") ? program_array_string.get("0") : FwConstants.EMPTY_STRING);
							benefits_array.add(appInPrflCargo.getIndv_fpp_pgm() != null && appInPrflCargo.getIndv_fpp_pgm().equals("1") ? program_array_string.get("8") : FwConstants.EMPTY_STRING);
							benefits_array.add(appInPrflCargo.getIndv_hc_rqst_ind() != null && appInPrflCargo.getIndv_hc_rqst_ind().equals("1") ? program_array_string.get("3") : FwConstants.EMPTY_STRING);
							benefits_array.add(appInPrflCargo.getIndv_msp_rqst_ind() != null && appInPrflCargo.getIndv_msp_rqst_ind().equals("1") ? program_array_string.get("7") : FwConstants.EMPTY_STRING);
							break;
						}						
					}
					ArrayList<String> benefits_filtered = new ArrayList<String>();
					for(String element: benefits_array){
						if(!element.equals(FwConstants.EMPTY_STRING)){
							benefits_filtered.add(element);
						}
					}
					
					pageContext.setAttribute("benefits_filtered",benefits_filtered);
					
					//Approved Representative
					String approved_list[] = new String[2];
					approved_list[0] = representative_fullName; approved_list[1] = fullName;
					
					//Number of cards to display
					int cardCountTotal = 4;
					int cardCount = 0;
					cardCountTotal += relation_array.size() > 0 ? 1 : 0;
					cardCountTotal += isAChild ? 1 : 0;
					cardCountTotal += rprInfoColl.size() > 0 ? 1 : 0;
					cardCountTotal += num_childs.length() > 0 ? 1 : 0;
					cardCountTotal += isFrmrFstrCrPrsn ? 1 : 0;
					pageContext.setAttribute("cardCountTotal",cardCountTotal);
					pageContext.setAttribute("cardCount",cardCount);
					
					//Destructive dialog labels
					String ddbox_title = FwConstants.EMPTY_STRING;
					String ddbox_message = FwConstants.EMPTY_STRING;
					ddbox_title = iPage.getDisplayText(132054, langCD);
					ddbox_title = FwMessageFormatter.getFormattedMessage(ddbox_title,full_name_list);
					ddbox_message = iPage.getDisplayText(132055, langCD);
					ddbox_message = FwMessageFormatter.getFormattedMessage(ddbox_message,full_name_list);
					
				 %>
				<h2>${person.fst_nam.trim()} ${person.mid_init.trim()} ${person.last_nam.trim()} ${suffix}</h2>
				<% String personName= String.format("%s %s",appIndvCargo.getFst_nam().trim(),appIndvCargo.getLast_nam().trim());%>
				<table class="body" role="presentation">
					<tr><%--Personal information --%>
						<td width="50%">
							<div class="card card1">
								<div class="card-header">
									<h3><AP:FwPageLabelTag textID="131916"/></h3>
									<div class="buttons">
										<input name="LISTVIEW_CHANGE_HHINFO_${count.index}" id="LISTVIEW_CHANGE_HHINFO_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
										<%extId="0"+i; %>
										
										<%-- ILIES-211326:Accessibility fix: Adding attribute to override and show unique ALT text for Change button --%>
										<%-- <AP:FwButtonTag button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131916" personName="<%=personName%>" pageAction="ABHMDChange" name="LISTVIEW_CHANGE_HHINFO_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','HHINFO_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHMDChange','N');\""/> --%>									
										<%--ILIES-210504 --%>
										<AP:FwLinksCSSTag text="30513"  tagVal="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131916" personName="<%=personName%>" other="onclick=\"setKeyValues('ListViewRowNum','HHINFO_${count.index}');setActionFieldAndSubmitLink(document.form1,'ABHMDChange','N');\" style=\"font-size:10px;\"" /> 
										<%-- ILIES-211326:Accessibility fix: END --%>
									</div>
								</div>
								<div class="icon">${person_icon}</div>
								<p class="below-icon">
									<span class="label"><AP:FwPageLabelTag textID="131918"/></span>
									<span class="value">
										<c:if test="${dob eq ''}"><AP:FwPageLabelTag textID="131924"/></c:if>
										<c:if test="${dob ne ''}">${dob}</c:if>
									</span>
								</p>
								<p class="below-icon">
									<span class="label"><AP:FwPageLabelTag textID="131919"/></span>
									<span class="value">
										<c:if test="${gender eq ''}"><AP:FwPageLabelTag textID="131924"/></c:if>
										<c:if test="${gender ne ''}">${gender}</c:if>
									</span>
								</p>
								<p class="below-icon">
									<span class="label"><AP:FwPageLabelTag textID="131920"/></span>
									<span class="value">
										<c:if test="${language_indv eq ''}"><AP:FwPageLabelTag textID="131924"/></c:if>
										<c:if test="${language_indv ne ''}">${language_indv}</c:if>
									</span>
								</p>
								<p class="below-icon">
									<span class="label"><AP:FwPageLabelTag textID="131921"/></span>
									<span class="value">
										<c:if test="${phoneToDisplay eq ''}"><AP:FwPageLabelTag textID="131924"/></c:if>
										<c:if test="${phoneToDisplay.length() > 0}">${phoneToDisplay}</c:if>										
									</span>
								</p>
								<p style="clear: both;margin-top: 1em;">
									<span class="label"><AP:FwPageLabelTag textID="131922"/></span>
									<span class="value">${registration_info.hshl_l1_adr} ${fn:trim(registration_info.hshl_city_adr) eq "" ? "" : ", ".concat(fn:trim(registration_info.hshl_city_adr))} ${registration_info.hshl_sta_adr} ${registration_info.hshl_zip_adr}</span>
								</p>
								<p>
									<span class="label"><AP:FwPageLabelTag textID="131923"/></span>
									<span class="value">								
										<strong>${wherePersonLive}</strong>
									</span>
								</p>
								<%
								/*  ILIES-305688 SOGI Changes */
								 if (ageInYears >= SOGIReferenceHelper.getSogiAgeThresholdIntegerValue() ) {
								 %>
								 <p class="below-icon">
									<span class="label"><AP:FwPageLabelTag textID="180012863"/></span>
									<span class="value">
									<%if(ageInYears <= SOGIReferenceHelper.getSogiAgeThresholdIntegerValue() || AppConstants.HIGH_DATE_MMDDYYYY.equalsIgnoreCase(birth)){%>
										 <AP:FwPageLabelTag textID="180012866"/> 
									<%}else if(sexAssignedAtBirth != null && !sexAssignedAtBirth.trim().isEmpty()){%>
										<%=Encode.forHtml(sexAssignedAtBirth)%>
									<%}else{%>
										 <AP:FwPageLabelTag textID="131924"/>
									<%}%>
										<%-- <c:if test="${sexAssignedAtBirth eq ''}"><AP:FwPageLabelTag textID="131924"/></c:if>
										<c:if test="${dob eq ''}"><AP:FwPageLabelTag textID="180012866"/></c:if>
										<c:if test="${sexAssignedAtBirth ne ''}">${sexAssignedAtBirth}</c:if> --%>
									</span>
								</p>
								<p class="below-icon">
									<span class="label"><AP:FwPageLabelTag textID="180012864"/></span>
									<span class="value">
									<%if(ageInYears <= SOGIReferenceHelper.getSogiAgeThresholdIntegerValue() || AppConstants.HIGH_DATE_MMDDYYYY.equalsIgnoreCase(birth)){%>
										 <AP:FwPageLabelTag textID="180012866"/> 
									<%}else if(genderIdentity != null && !genderIdentity.trim().isEmpty()){%>
										<%=Encode.forHtml(genderIdentity)%>
									<%}else{%>
										 <AP:FwPageLabelTag textID="131924"/>
									<%}%>
										<%-- <c:if test="${genderIdentity eq ''}"><AP:FwPageLabelTag textID="131924"/></c:if>
										<c:if test="${dob eq ''}"><AP:FwPageLabelTag textID="180012866"/></c:if>
										<c:if test="${genderIdentity ne ''}">${genderIdentity}</c:if> --%>
									</span>
								</p>
								<p class="below-icon">
									<span class="label"><AP:FwPageLabelTag textID="180012865"/></span>
									<span class="value">
									<%if(ageInYears <= SOGIReferenceHelper.getSogiAgeThresholdIntegerValue() || AppConstants.HIGH_DATE_MMDDYYYY.equalsIgnoreCase(birth)){%>
										 <AP:FwPageLabelTag textID="180012866"/> 
									<%}else if(sexualOrientation != null && !sexualOrientation.trim().isEmpty()){%>
										<%=Encode.forHtml(sexualOrientation)%>
									<%}else{%>
										 <AP:FwPageLabelTag textID="131924"/>
									<%}%>
										<%-- <c:if test="${sexualOrientation eq ''}"><AP:FwPageLabelTag textID="131924"/></c:if>
										<c:if test="${dob eq ''}"><AP:FwPageLabelTag textID="180012866"/></c:if>
										<c:if test="${sexualOrientation ne ''}">${sexualOrientation}</c:if> --%>
									</span>
								</p>
								<% } %>							
							</div>
						</td>
						<%--Relationships information --%>
						<c:if test="${relation_array.size() gt 0}">
							<td>					
								<div class="card card2">
									<div class="card-header">				
										<h3><AP:FwPageLabelTag textID="131917"/></h3>
										<div class="buttons">
											<input name="LISTVIEW_CHANGE_RELATIONSHIP_${count.index}" id="LISTVIEW_CHANGE_RELATIONSHIP_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
											<%extId="1"+i; %>
											
											<%-- ILIES-211326:Accessibility fix: Adding attribute to override and show unique ALT text for Change button --%>
											<%-- <AP:FwButtonTag button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131917" personName="<%=personName%>" pageAction="ABHHRChange" name="LISTVIEW_CHANGE_RELATIONSHIP_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','RELATIONSHIP_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHHRChange','N');\""/> --%>
											<AP:FwLinksCSSTag text="30513"  tagVal="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131917" personName="<%=personName%>" other=" onclick=\"setKeyValues('ListViewRowNum','RELATIONSHIP_${count.index}'); setActionFieldAndSubmitLink(document.form1,'ABHHRChange','N');\" style=\"font-size:10px;\"" /> 
											<%-- ILIES-211326:Accessibility fix: END --%>
										</div>
									</div>
									<ul>
										<c:forEach items="${relation_array}" var="relation">
											<li>${relation}</li>								
										</c:forEach>
									</ul>
								</div>
							</td>
							<c:set var="cardCount" value="${cardCount + 1}" scope="page"/>
						</c:if>
						<c:if test="${cardCount eq 1}">
							</tr><tr>							
						</c:if>
						
						<%--ILIES-311729 Added the Tax information section in the summary --%>
						<%if(!isDocMhProvider) {%>
					<c:if test="${isTaxCardtoShow}">
						<td>
							<div class="card card3">
								<div class="card-header">						
									<h3><AP:FwPageLabelTag textID="41029"/></h3>
									<div class="buttons">
										<input name="LISTVIEW_CHANGE_TAX_${count.index}" id="LISTVIEW_CHANGE_TAX_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
										<%extId="11"+i; %>
										
										<AP:FwLinksCSSTag text="30513"  tagVal="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="41029" personName="<%=personName%>" other="onclick=\" setActionFieldAndSubmitLink(document.form1,'ABHHQLoad','Y');form1.submit(); return false;\" style=\"font-size:10px;\"" /> 
										<%-- ILIES-211326:Accessibility fix: END --%>
									</div>
								</div>
								<p>
									<span class="label"><AP:FwPageLabelTag textID="180017280"/></span>
									<span class="value">
										<c:if test="${appIndvCargo.getFile_taxes_sw() eq 'Y'}">
										       	<AP:FwPageLabelTag textID="30713"/>
									    </c:if>
									    <c:if test="${appIndvCargo.getFile_taxes_sw() eq 'N'}">
										       	<AP:FwPageLabelTag textID="30714"/>
									    </c:if>
									    <%--ILIES-315677 Show Unknown text value --%>
									    <c:if test="${appIndvCargo.getFile_taxes_sw() eq 'U'}">
										       	<AP:FwPageLabelTag textID="180017290"/>
									    </c:if>	
									</span>
								</p>
								<%--ILIES-315828 Remove Filing Jointly field for Non-Spousal relations --%>
								<%
								Map<String, String> personJointlyTaxFilingInfo = (Map) pageContext.getAttribute("personJointlyTaxFilingInfo");
								String jointValue = personJointlyTaxFilingInfo != null ? (String) personJointlyTaxFilingInfo.get(appIndvCargo.getIndv_seq_num()) : null;
								if(jointValue != null) {
								%>
								<p>	
								<c:set var="jointValue" value="<%=jointValue%>" scope="page"/>
								<c:if test="${personal_coll.size() gt 1}">
									<span class="label"><AP:FwPageLabelTag textID="180017282"/></span>
									<span class="value">
										<c:if test="${jointValue eq 'Y'}">
										       	<AP:FwPageLabelTag textID="30713"/>
									    </c:if>
									    <c:if test="${jointValue eq 'N'}">
										       	<AP:FwPageLabelTag textID="30714"/>
									    </c:if>
									    <%--ILIES-315677 Show Unknown text value --%>
									    <c:if test="${jointValue eq 'U'}">
										       	<AP:FwPageLabelTag textID="180017290"/>
									    </c:if>														
									</span>
								</c:if>
								</p>
								<%} %>
								<p>
								
								<c:if test="${personal_coll.size() gt 1}">
									<span class="label"><AP:FwPageLabelTag textID="180017283"/></span>
									<span class="value">
										<c:if test="${personTaxDependentInfo.size() gt 0}">
											<c:set var="taxDependentFound" value="false" scope="page"/>
											<c:forEach items="${personTaxDependentInfo}" var="personTaxDependentInfo">
												<c:if test="${personTaxDependentInfo.key eq appIndvCargo.getIndv_seq_num()}">
													<span class="label"> ${personTaxDependentInfo.value} </span>	
													<c:set var="taxDependentFound" value="true" scope="page"/>
												</c:if>	
											</c:forEach>
											<c:if test="${not taxDependentFound}">
											    <AP:FwPageLabelTag textID="30714"/>
											</c:if>
										</c:if>
										<c:if test="${personTaxDependentInfo.size() eq 0}">
											<AP:FwPageLabelTag textID="30714"/>
										</c:if>
									</span>
								</c:if>
								</p>
							</div>
						</td>
		</c:if>
			<c:if test="${cardCount eq 0}">
							</tr><tr>							
						</c:if>
						<%--Benefits chosen--%>
						<td>
							<div class="card card4">
								<div class="card-header">						
									<h3><AP:FwPageLabelTag textID="1800070"/></h3>
									<div class="buttons">
										<input name="LISTVIEW_CHANGE_HHBENF_${count.index}" id="LISTVIEW_CHANGE_HHBENF_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
										<%extId="2"+i; %>
										
										<%-- ILIES-211326:Accessibility fix: Adding attribute to override and show unique ALT text for Change button --%>
										<%-- <AP:FwButtonTag button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131925" personName="<%=personName%>" pageAction="ABHMDChange" name="LISTVIEW_CHANGE_HHBENF_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','HHINFO_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHMDChange','N');\""/> --%>
										<AP:FwLinksCSSTag text="30513"  tagVal="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="1800070" personName="<%=personName%>" other=" onclick=\"setKeyValues('ListViewRowNum','HHINFO_${count.index}'); setActionFieldAndSubmitLink(document.form1,'ABHMDChange','N');\" style=\"font-size:10px;\"" /> 
										<%-- ILIES-211326:Accessibility fix: END --%>
									</div>
								</div>
								<c:if test="${benefits_filtered.size() gt 0}">
								<ul>
									<c:forEach items="${benefits_filtered}" var="program">
										<li>${program}</li>
									</c:forEach>
								</ul>
								</c:if>
								<c:if test="${benefits_filtered.size() le 0}">
									<span class="no-reported"><AP:FwPageLabelTag textID="131926"/></span>
								</c:if>
							</div>
						</td>
						<c:if test="${cardCount eq 1}">
							</tr><tr><td></td>							
						</c:if>
						
						<c:if test="${person.indv_seq_num eq '1' && APP_AUTH_REP_COLLECTION.size() > 0}">							
							<%--Approved Representative--%>
							<td>
									<div class="card card8">
										<div class="card-header">					
											<h3><AP:FwPageLabelTag textID="131928"/></h3>
											<div class="buttons">
												<input name="LISTVIEW_ERASE_REPRESTV_${count.index}" id="LISTVIEW_ERASE_REPRESTV_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
												<%extId="0"+i; %>
												<%-- <AP:FwButtonCSSTag styleClass="button-link" button="<%=AppConstants.CARD_ERASE%>" extId="<%=extId%>" sectionTitle="131928" personName="<%=personName%>" pageAction="ABHWAErase" name="LISTVIEW_ERASE_REPRESTV_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','REPRESTV_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHWAErase','N');\""/> --%>
												<AP:FwLinksCSSTag text="32225"  tagVal="<%=AppConstants.CARD_ERASE%>" extId="<%=extId%>" sectionTitle="131928" personName="<%=personName%>" other=" onclick=\"setKeyValues('ListViewRowNum','REPRESTV_${count.index}'); setActionFieldAndSubmitLink(document.form1,'ABHWAErase','N');\" style=\"font-size:10px;\"" /> 
												<input name="LISTVIEW_CHANGE_REPRESTV_${count.index}" id="LISTVIEW_CHANGE_REPRESTV_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
												<%extId="3"+i; %>
												<%-- ILIES-211326:Accessibility fix: Adding attribute to override and show unique ALT text for Change button --%>
												<%-- <AP:FwButtonTag button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131928" personName="<%=personName%>" pageAction="ABHWAChange" name="LISTVIEW_CHANGE_REPRESTV_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','REPRESTV_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHWAChange','N');\""/> --%>
												<%-- <AP:FwButtonCSSTag styleClass="button-link" button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131928" personName="<%=personName%>" altOverride="Y" pageAction="ABHWAChange" name="LISTVIEW_CHANGE_REPRESTV_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','REPRESTV_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHWAChange','N');\""/> --%>
												<AP:FwLinksCSSTag text="30513"  tagVal="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131928" personName="<%=personName%>" other=" onclick=\"setKeyValues('ListViewRowNum','REPRESTV_${count.index}'); setActionFieldAndSubmitLink(document.form1,'ABHWAChange','N');\" style=\"font-size:10px;\"" /> 
												<%-- ILIES-211326:Accessibility fix: END --%>
											</div>
										</div>
										<span><AP:FwPageLabelTag textID="131929" substitute="<%=approved_list%>"/></span>
									</div>
							</td>
							<c:set var="cardCount" value="${cardCount + 1}" scope="page"/>
						</c:if>
						<c:if test="${cardCount eq 1}">
							</tr><tr><td></td>						
						</c:if>
						
						<c:if test="${num_childs ne ''}">
						<%--Pregnancy Information--%>
							<td>
									<div class="card card6">
										<div class="card-header">						
											<h3><AP:FwPageLabelTag textID="131930"/></h3>
											<div class="buttons">
												<input name="LISTVIEW_ERASE_PREG_${count.index}" id="LISTVIEW_ERASE_PREG_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
												<%extId="1"+i; %>												
												<AP:FwLinksCSSTag text="32225"  tagVal="<%=AppConstants.CARD_ERASE%>" extId="<%=extId%>" sectionTitle="131930" personName="<%=personName%>" other=" onclick=\"setKeyValues('ListViewRowNum','PREG_${count.index}'); setActionFieldAndSubmitLink(document.form1,'ABHMSPregnancyErase','N');\" style=\"font-size:10px;\"" /> 
												<input name="LISTVIEW_CHANGE_PREG_${count.index}" id="LISTVIEW_CHANGE_PREG_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
												<%extId="4"+i; %>
												<%-- ILIES-211326:Accessibility fix: Adding attribute to override and show unique ALT text for Change button --%>
												<%-- <AP:FwButtonTag button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131930" personName="<%=personName%>" pageAction="ABHMSPregnancyChange" name="LISTVIEW_CHANGE_PREG_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','PREG_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHMSPregnancyChange','N');\""/> --%>			
												<AP:FwLinksCSSTag text="30513"  tagVal="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131930" personName="<%=personName%>" other=" onclick=\"setKeyValues('ListViewRowNum','PREG_${count.index}'); setActionFieldAndSubmitLink(document.form1,'ABHMSPregnancyChange','N');\" style=\"font-size:10px;\"" /> 
												<%-- ILIES-211326:Accessibility fix: END --%>
											</div>
										</div>
										<ul>
											<li>
												<c:if test="${num_childs eq '1'}">
													<AP:FwPageLabelTag textID="131931" substitute="<%=num_preg_list%>"/>
												</c:if>
												<c:if test="${num_childs ne '1'}">
													<AP:FwPageLabelTag textID="131932" substitute="<%=num_preg_list%>"/>
												</c:if>						
											</li>
											<li>
												<AP:FwPageLabelTag textID="131933" substitute="<%=date_preg_list%>"/>
											</li>
										</ul>
									</div>
							</td>
							<c:set var="cardCount" value="${cardCount + 1}" scope="page"/>
						</c:if>
						<c:if test="${cardCount %2 == 1}">
							</tr><tr>						
						</c:if>

						<%--Disability Information--%>
						
					<c:if test="${isFpp}">
						<td>
							<div class="card card5">
								<div class="card-header">						
									<h3><AP:FwPageLabelTag textID="131927"/></h3>
										<div class="buttons">
											<c:if test="${hasDisabilities}">
												<input name="LISTVIEW_ERASE_BLIND_${count.index}" id="LISTVIEW_ERASE_BLIND_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
												<%extId="2"+i; %>
												<%-- <AP:FwButtonCSSTag styleClass="button-link" button="<%=AppConstants.CARD_ERASE%>" extId="<%=extId%>" sectionTitle="131927" personName="<%=personName%>" pageAction="ABHMSEraseDisability" name="LISTVIEW_CHANGE_BLIND_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','BLIND_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHMSEraseDisability','N');\""/> --%>
												<AP:FwLinksCSSTag text="32225"  tagVal="<%=AppConstants.CARD_ERASE%>" extId="<%=extId%>" sectionTitle="131927" personName="<%=personName%>" other=" onclick=\"setKeyValues('ListViewRowNum','BLIND_${count.index}'); setActionFieldAndSubmitLink(document.form1,'ABHMSEraseDisability','N');\"style=\"font-size:10px;\" " /> 
												<input name="LISTVIEW_CHANGE_BLIND_${count.index}" id="LISTVIEW_CHANGE_BLIND_${count.index}" type="hidden" value="${person.indv_seq_num}"/>
												<%extId="5"+i; %>
												<%-- ILIES-211326:Accessibility fix: Adding attribute to override and show unique ALT text for Change button --%>
												<%-- <AP:FwButtonTag button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131927" personName="<%=personName%>" pageAction="ABHMSChangeDisability" name="LISTVIEW_CHANGE_BLIND_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','BLIND_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHMSChangeDisability','N');\""/> --%>												
												<%-- <AP:FwButtonCSSTag styleClass="button-link" button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131927" personName="<%=personName%>" altOverride="Y" pageAction="ABHMSChangeDisability" name="LISTVIEW_CHANGE_BLIND_${count.index}" langButton="true" other="onclick=\"setKeyValues('ListViewRowNum','BLIND_${count.index}');return setActionFieldAndSubmit(document.form1,'ABHMSChangeDisability','N');\""/> --%>
												<AP:FwLinksCSSTag text="30513"  tagVal="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131927" personName="<%=personName%>" other=" onclick=\"setKeyValues('ListViewRowNum','BLIND_${count.index}'); setActionFieldAndSubmitLink(document.form1,'ABHMSChangeDisability','N');\" style=\"font-size:10px;\" " /> 
												<%-- ILIES-211326:Accessibility fix: END --%>
											</c:if>
											<c:if test="${!hasDisabilities}">
												<%extId="6"+i; %>
												<%-- ILIES-211326:Accessibility fix: Adding attribute to override and show unique ALT text for Change button --%>
												<%-- <AP:FwButtonTag button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131927" personName="<%=personName%>" pageAction="ABHHQLoad" name="LISTVIEW_CHANGE_DISABLD_${count.index}" langButton="true"/> --%>
												<%-- <AP:FwButtonCSSTag styleClass="button-link" button="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131927" personName="<%=personName%>" altOverride="Y" pageAction="ABHHQLoad" name="LISTVIEW_CHANGE_DISABLD_${count.index}" langButton="true"/> --%>
												<AP:FwLinksCSSTag text="30513"  tagVal="<%=AppConstants.CARD_CHANGE%>" extId="<%=extId%>" sectionTitle="131927" personName="<%=personName%>" other=" onclick=\" setActionFieldAndSubmitLink(document.form1,'ABHHQLoad','Y');form1.submit();return false;\" style=\"font-size:10px;\"" /> 
												<%-- ILIES-211326:Accessibility fix: END --%>
											</c:if>
										</div>							
								</div>