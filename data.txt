<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<%@page import="org.owasp.encoder.Encode" %>

<%/*
************************************************************************************************
Name: [ARRAPRegisterApp.jsp]		Created By: [RAJABABU MARRI]		Created on: [05/14/2002]
Purpose: [Register Application]
Modification Logs:
Modified By 			Date				Reason & description
[MODIFIED NAME]		    [MM/DD/YYYY]		[REASON FOR CHANGE]
Mahesh M		03/12/2004		Use FwCalendar instead of System clock
						Tiers00165316:DEFECT application received time through framework
Mahesh M			03/22/2004		Help modifications:Page elements not used
Praphull K          11/08/2006      FO-521
Aditya Deshmukh		02/26/2007		FO708::Change label from "Other" to "TDD/Other#"
Srinivasa Marpina   06/20/2007      Defect # BRGUS00053514
Rahul Asar			07/26/2007		Defect # BRGUS00044504 -  New question added -
									"Is there an Authorized Representative for SER?"
SRINIVASA ANTHAM	09/21/2007		BRGUS00071310: Facilities / Institutions  Changes
Prasad Padmanabhuni	12/01/2007		BRGUS00086503-Prepopulating the first name and last name when
									coming from Front Desk for Registration
************************************************************************************************
*/%>

<%/* NOT EDITABLE - FW Page Directive, Imports, and URIs */%>
<%@ include file = "/fwincludes/directives.jsp" %>

<%/* EDITABLE - Page Specific Imports and URIs (You can add code to this section) */%>
<%@ include file = "/includes/ArDirectives.jsp" %>
<%@ include file = "/includes/DcDirectives.jsp" %>
<%@ taglib uri="/WEB-INF/tlds/ArTagLibrary.tld" prefix="ARTagLibrary" %>
<%/* EDITABLE - Page Specific Imports and URIs (You can add code to this section) */%>
<%@page import="gov.illinois.fw.management.referencetables.ReferenceTableManager,java.sql.*,
gov.illinois.framework.management.util.FwCalendar,gov.illinois.framework.management.util.FwDate"%>
<%@page import="gov.illinois.ies.business.rules.ar.util.ARConstants"%>
<%/* EDITABLE - Page Specific useBean tags(You can add code to this section) */%>

<jsp:useBean id="serviceProvider" class="gov.illinois.ies.presentation.view.pageelements.ServiceProvider" scope="application"/>
<%--<jsp:useBean id="otherNumber" class="gov.illinois.ies.presentation.view.pageelements.OtherNumber" scope="application"/> --%>
<jsp:useBean id="tddOther" class="gov.illinois.ies.presentation.view.pageelements.TddOther" scope="application"/>
<jsp:useBean id="dateReceived" class="gov.illinois.ies.presentation.view.pageelements.DateReceived" scope="application"/>
<jsp:useBean id="specialAccomodations" class="gov.illinois.ies.presentation.view.pageelements.SpecialAccomodations" scope="application"/>
<jsp:useBean id="noticeLanguage" class="gov.illinois.ies.presentation.view.pageelements.NoticeLanguage" scope="application"/>
<%//ILIES-152415 Nikolaos Seitz 12/15/2014 %><jsp:useBean id="applicationCategory" class="gov.illinois.ies.presentation.view.pageelements.ApplicationCategory" scope="application"/>
<%//FO362 - Addition of Spoken Language dropdown %>
<jsp:useBean id="spokenLanguage" class="gov.illinois.ies.presentation.view.pageelements.SpokenLanguage" scope="application"/>
<%//BRGUS00044504-RA-Removal of  Filing Rep Question%>
<%--<jsp:useBean id="primaryAlsoRepresentative" class="gov.illinois.ies.presentation.view.pageelements.PrimaryAlsoRepresentative" scope="application"/>--%>
<%//BRGUS00044504-RA-Add new question for SER Auth Rep%>
<jsp:useBean id="representative" class="gov.illinois.ies.presentation.view.pageelements.Representative" scope="application"/>
<%/*jsp:useBean id="arDcAppCasesCargo1" class="gov.illinois.ies.business.entities.application.ArDcAppCasesCargo" scope="request"/ */%>
<jsp:useBean id="arDcAppCasesCargo" class="gov.illinois.ies.business.entities.application.ArApplicationForAidCargo" scope="request"/>
<jsp:useBean id="arPrimApplicant" class="gov.illinois.ies.business.entities.individual.DcIndvCargo" scope="request"/>
<%/*jsp:useBean id="arDcAddressCargo1" class="gov.illinois.ies.business.entities.application.ArDcAddressCargo" scope="request"/ */%>
<jsp:useBean id="arDcAddressCargo" class="gov.illinois.ies.business.entities.application.ArAppAddrCargo" scope="request"/>
<%/*jsp:useBean id="arDcSpIndCargo1" class="gov.illinois.ies.business.entities.application.ArDcSpIndCargo" scope="request"/ */%>
<jsp:useBean id="arDcSpIndCargo" class="gov.illinois.ies.business.entities.application.ArAppSpIndCargo" scope="request"/>
<jsp:useBean id="arDcSpIndCollection" class="gov.illinois.ies.business.entities.application.ArDcSpIndCollection" scope="request"/>
<jsp:useBean id="unableToLocate" class="gov.illinois.ies.presentation.view.pageelements.UnableToLocate" scope="application"/>
<%-- <jsp:useBean id="timeReceived" class="gov.illinois.ies.presentation.view.pageelements.TimeReceived" scope="application"/> --%>
<%--Code added by Gopi for FO148 on 06/13/2006--%>
<jsp:useBean id="isHomeless" class="gov.illinois.ies.presentation.view.pageelements.IsHomeless" scope="application"/>
<%--06/13/2006 End--%>
<jsp:useBean id="cin" class="gov.illinois.ies.presentation.view.pageelements.Cin" scope="application"/>
<%--Start-ILIES-135145--%>
<jsp:useBean id="ispriorSnap" class="gov.illinois.ies.presentation.view.pageelements.PriorSNAP" scope="application"/>
<%--End-ILIES-135145--%>
<jsp:useBean id="nameGroup" class="gov.illinois.ies.presentation.view.pageelements.NameGroup"  scope=""/>
<%-- FO529 --%>
<jsp:useBean id="appModeCd" class="gov.illinois.ies.presentation.view.pageelements.AppModeCd"  scope=""/>
<%-- FO529 --%>
<%//FO371 - Addition of Facilities/Institution field %>
<jsp:useBean id="facilities" class="gov.illinois.ies.presentation.view.pageelements.Facilities" scope="application"/>
<jsp:useBean id="facilityInstitutionName" class="gov.illinois.ies.presentation.view.pageelements.FacilityInstitutionName" scope="application"/>
<jsp:useBean id="providerNmber" class="gov.illinois.ies.presentation.view.pageelements.ProviderNmber" scope="application"/>
<!-- Added for ILIES - 137445 -->
<!-- End for ILIES - 137445 -->

<jsp:useBean id="ResultsDcAddressBookCargo" class="gov.illinois.ies.business.entities.miscellaneous.DcAddressBookCargo" scope="request"/>

<%/* NOT EDITABLE - Head Tag Include */%>
<%@ include file = "/fwincludes/headTag.jsp" %>
<%-- Modified as per ILIES-124250 --%>
<TL:FWBodyTag security="<%=securityAttr.getPermission()%>" mode = "<%= pageMode%>" other="onLoad=\"appComplStatusChk();disableChildTabOnLoad(document.form1,'appreg');disableAuthrepReferralTabs(document.form1);disableFacility();prepopulateName();disableDateReceived();enableDisableAuthRepTab();disableTabsForCaseworker();\""/>


<%/* EDITABLE - Page specific .js or .css files (You can add code to this section) */%>

<!-- <script language="javascript" src="/js/dc.js" type="text/javascript"></script>
 --><script language="javascript" src="/js/ar.js" type="text/javascript"></script>

<script language="javascript" src="/js/arErrorCodes.js" type="text/javascript"></script>


<script language="JavaScript" type="text/javascript" >
	
	/* //time field has been removed so just use app received to form date
	function formDate(aDate){
		var newDt = aDate.value;
		tgt.value = newDt;
	} */

/** coded adeded by srinivas antham  sys defect 71310 **/
	function getAlternativeElementID(elemID){
		var elemArr = new Array();
		elemArr.push(new Array("coName","providerName"));
		elemArr.push(new Array("coName","facilityName"));
		elemArr.push(new Array("coName","bankName"));
		elemArr.push(new Array("coName","insuranceCompanyName"));
		elemArr.push(new Array("coName","companyName"));
		elemArr.push(new Array("coName","serviceProvider"));
		for(var i=0;i<elemArr.length;i++){			
			if(elemArr[i][1]==elemID){
				return elemArr[i][0];
			}
		}
	}
	
	function validateFacilities(){
		var flag = true;
		var  mandatory = false;
		var facilitesSelected = false;
		facilitesSelected = isFacilitesSelected();

		if(facilitesSelected){
			if(document.form1.serviceProvider.value == ""){
				alertMe("GL003",document.form1.serviceProvider,"Facilities/Institutions");
				return false;
			}
		}

	}
	function emptyServiceProvider(){
		var facilitesSelected = false;
		facilitesSelected = isFacilitesSelected();

		if(!facilitesSelected){
			document.form1.serviceProvider.value="";

			// Start: BRGUS00084618

			document.form1.companyId.value="";
			document.form1.companyId.coTypeCd="";
			document.getElementById("facilityName").innerHTML="";

			// End
		}
	}
	function enableProvider(){
		var facilitesSelected = false;
		facilitesSelected = isFacilitesSelected();
		if(facilitesSelected){
	    	document.getElementById("providerTF").disabled = false;
		}
		else{
			document.getElementById("providerTF").disabled = true;
		}
	}
	function disableFacility(){
		document.form1.serviceProvider.disabled=true;
		document.form1.serviceProvider.style['width'] = '85px';
		enableProvider();
	}
	function isFacilitesSelected(){
		var specialAccoms = document.form1.specialAccomodations.value;
		var isFacilitesSelected = false;
		/* for(var i=0;i<specialAccoms.length;i++){
			if(specialAccoms[i].selected && (specialAccoms[i].value == 13 || specialAccoms[i].value ==9)){
				isFacilitesSelected = true;
			}
		} */
		if (specialAccoms=="13" || specialAccoms=="9"){
			isFacilitesSelected = true;
		}

		return isFacilitesSelected;
	}
	function prepopulateName(){
		<%
		boolean firstNameFlag=false;
		boolean lastNameFlag=false;
			String frontDeskFirstName = Encode.forHtml(request.getParameter("frontDeskFirstName"));
			if(frontDeskFirstName == null || "null".equalsIgnoreCase(frontDeskFirstName)){
				frontDeskFirstName = "";
				firstNameFlag=true;
			}
			String frontDeskLastName = Encode.forHtml(request.getParameter("frontDeskLastName"));
			if(frontDeskLastName == null || "null".equalsIgnoreCase(frontDeskLastName)){
				frontDeskLastName = "";
				lastNameFlag=true;
			}
		%>
		<%
		if(firstNameFlag==false){%>
			document.form1.firstName.value='<%=frontDeskFirstName%>';
		<%}%>
		<%if(firstNameFlag==false){%>
			document.form1.lastName.value='<%=frontDeskLastName%>';
		<%}%>


	}

	function appComplStatusChk(){

		//alert("appComplStatus	::	"+ document.form1.monthdateReceived.value);
		if(document.form1.appComplStatus.value!='' && document.form1.appComplStatus.value!=' ' && document.form1.appComplStatus.value!=null && document.form1.appComplStatus.value=='AC'){
			document.form1.monthdateReceived.disabled=true;
			document.form1.datedateReceived.disabled=true;
			document.form1.yeardateReceived.disabled=true;
			document.form1.dimg_dateReceived.disabled=true;

			//document.form1.timeReceivedHr.disabled=true;
			//document.form1.timeReceivedMin.disabled=true;
			//document.form1.timeReceivedAmPm.disabled=true;

		}
	}

	//BRGUS00147551 changes start here by krishnap1
	function isLastNameValid(lastName){
		//alert('in LastName Valid');
		var strlen = lastName.value.length;

		//alert(strlen);
		if(strlen<2){
		alertMe("AR3117");
		return false;
		}

	}
	//BRGUS00147551 changes end here
	<%
	 boolean isSSApp = false;
	 boolean isMPEApp = false;
	 String ssAppNumDisp = "";
	 if(request.getAttribute("IS_SELF_SERVICE_APP") != null){
		isSSApp = ((Boolean)request.getAttribute("IS_SELF_SERVICE_APP")).booleanValue();
		ssAppNumDisp = (String)request.getAttribute("SELF_SERVICE_APP_NUM");
	 }
	%>
	<%-- Balaji SS Changes START--%>
	function disableDateReceived(){
		<% if(isSSApp){%>
			/*document.form1.monthdateReceived.disabled = true;
			document.form1.datedateReceived.disabled = true;
			document.form1.yeardateReceived.disabled = true;
			document.form1.dimg_dateReceived.src='../../images/calendarGray.gif';
			document.form1.dimg_dateReceived.disabled=true;

			document.form1.timeReceivedHr.disabled = true;
			document.form1.timeReceivedMin.disabled = true;
			document.form1.timeReceivedAmPm.disabled = true;
			*/

			//This code is to populate the app num and status in the header.
			document.getElementById("SS_APP_NUM_DISPLAY").innerHTML='<%=ssAppNumDisp%>';
			var appStatus = document.getElementById("appHeaderStatus").innerHTML;
			if(appStatus == null || appStatus.length == 0){
				document.getElementById("appHeaderStatus").innerHTML="Application pending";
			}

		<% } %>
	}


	function validateSource(){
		<% if(!isSSApp){%>
			if(document.form1.appModeCd.value == "SS"){
				alertMe("AR4001",document.form1.appModeCd,"");
				return false;
			}
			return true;
		<% } %>
	}
	<%-- Balaji SS Changes END--%>
	
	// Added as per ILIES-124250
    function enableDisableAuthRepTab(){
		var tabName = 'tab2';
		if(document.form1.representative.value == 'Y'){
			enableTabs(tabName);
		}else{
			disableTabs(tabName);
		}
	}
	
   function disableTabsForCaseworker(){
   var readOnly = '<%=request.getAttribute("readOnlyForAppReg")%>';
   if(readOnly == 'Y'){
		disableTabs('tab2');
		disableTabs('tab3');
		disableTabs('tab4');
		disableTabs('tab5');
		}
	}	
	
//to validate application received date is not prior to release date
//removed for phase 2
/* function validateAppReceivedDate(){
	if (document.form1.releaseDate.value==""){
		return true;
	}
	var releaseDate = document.form1.releaseDate.value;
	document.form1.releaseDateMonth.value = releaseDate.substring(0,2);
	document.form1.releaseDateDay.value = releaseDate.substring(3,5);
	document.form1.releaseDateYear.value = releaseDate.substring(6,10);
	return compareDates(document.form1.monthdateReceived, document.form1.datedateReceived, document.form1.yeardateReceived, document.form1.releaseDateMonth, document.form1.releaseDateDay, document.form1.releaseDateYear, document.form1.dateRecieved, "Date Received", "10/01/2013");
} */

  // ILIES-166233: Added function to open Address Book Info pop up screen. Previously 'Search Facilities/Institutions' button was calling this same function defined in dc.js. 
	// The function is moved into this jsp to fix the zooming issues and W3C error.    
	// 'elemIDArr' - The Array of Element IDs whose for which the address book values needs to be set.	
	 function searchAndSetAddressDataWithFilterARRAP(elemIDArr){	 
		try{
			var fromARMPE="";
			if(elemIDArr.length>0){
				if(elemIDArr[0]== "fromARMPE"){
					fromARMPE="&fromARMPE=ARMPE";
				}
			}
			var addrURL = "/ControllerServlet?REQUESTED_PAGE_ID=DCADD&filter=AR" + fromARMPE ;
			var retval = openModalDialogARRAP(addrURL,"AddressBook",'dialogWidth:800px;dialogHeight:630px');
			if(retval!=null && fromARMPE=="" ){	
				if(isIEBrowser()){
					if(retval!=null && retval.length>0){
						var addrArr = retval[0].split("|");
						getAddressData(addrArr,elemIDArr);
						document.form1.serviceProvider.value=addrArr[20].split('=')[1];						
						document.form1.providerNmber.value=addrArr[20].split('=')[1];
					}
			 	} else {
	      		 	var timer = setInterval(function() {
             			if (retval!=null && retval!='undefined' && retval.closed) {
               				if(retval.returnValue!=null && retval.length>0){
                  				var addrArr = retval.returnValue[0].split("|");
								getAddressData(addrArr,elemIDArr);
								document.form1.serviceProvider.value=addrArr[20].split('=')[1];						
								document.form1.providerNmber.value=addrArr[20].split('=')[1];
               		  		}
                  		clearInterval(timer);
             			}
        			},500);
 			  }								
			} else if(retval!=null && fromARMPE == "&fromARMPE=ARMPE"){
				document.getElementById("providerId").value = retval[0];
			}			
		 }catch(Exception){		
			 alertMe("DC000",elemIDArr,"searchAndSetAddressDataWithFilterARRAP()","AddressBook");
		 }
	}
	// This function is used to fetch the ServiceProvider and ProviderNumber 
	function getAddressData(addrArr,elemIDArr){
	
    	for(var j=0;j<addrArr.length;j++){
			var keyPair = addrArr[j].split("=");	
			for(var k=0;k<elemIDArr.length;k++){
				var aElem = document.getElementById(elemIDArr[k]);	
				var altElem  = getAlternativeElementID(elemIDArr[k]);												
				if(aElem !=null && (aElem.id==keyPair[0]||aElem.ID==keyPair[0]||altElem==keyPair[0])){
					if(keyPair[1]!=null){
						aElem.value = keyPair[1];
					}						
				}
			}
			if(keyPair[0]=="facilityName"){
				document.getElementById("facilityName").innerHTML = keyPair[1];														
			}
		}					
	}
	// ILIES-166233: Added function to open Address Book Info pop up screen. Previously 'Search Provider #' button was calling this same function defined in dc.js. 
	// The function is moved into this jsp to fix the zooming issues and W3C error.
    // 'elemIDArr' - The Array of Element IDs whose for which the address book values needs to be set.	    
	function searchAndSetAddressDataARRAP(elemIDArr){	 
		try{
			var provider = "";
			if (elemIDArr!=null && elemIDArr[0]=="ARRAP"){
				provider = "&filter=ARRAP";
				elemIDArr = new Array(elemIDArr[1]);
			}
			var addrURL = "/ControllerServlet?REQUESTED_PAGE_ID=DCADD" + provider;
			var retval = openModalDialogARRAP(addrURL,"AddressBook",'dialogWidth:800px;dialogHeight:630px');
			if(isIEBrowser()){
				if(retval!=null && retval.length>0){
					var addrArr = retval[0].split("|");
					getAddressData(addrArr,elemIDArr);
				}
			 } else {
	       		var timer = setInterval(function() {	       		
             		if (retval!=null && retval!='undefined' && retval.closed) {
              		 	if(retval.returnValue!=null && retval.length>0){
              		 		var addrArr = retval.returnValue[0].split("|");
                  			getAddressData(addrArr,elemIDArr); //fetching ProviderNumber value
                  			if(document.getElementById("serviceProvider").value == "" ||document.getElementById("serviceProvider").value==null){
                  				document.getElementById("providerNmber").value=0;
								document.getElementById("serviceProvider").value=0;	
							}
               		  	}
                  	clearInterval(timer);
             		}
       			 },500);
			   }									
		 }catch(Exception){
			 alertMe("DC000",elemIDArr,"searchAndSetAddressDataARRAP()","AddressBook");
		 }
	} 
	// Added for ILIES-166233 to enable scrollbar on zooming. 
	function openModalDialogARRAP(URL,winName,features){
	         features = features+";scroll:yes;center=yes;help:no;status=no";
	         var modalVal = showModalDialog(URL,winName,features);
	         return modalVal;
    }	
</script>
<%
if (request.getAttribute("readOnlyForAppReg") != null && 
	"Y".equals((String) request.getAttribute("readOnlyForAppReg"))){
  	pageMode = 0;
}
%> 

<%/* EDITABLE WITH PERMISSION (You can add code to this section) - Body and Form Tags */%>
<%
	String PDF_PATH = (String) request.getAttribute("OPEN_PDF_TFAR");
	if(PDF_PATH != null){
	out.println("<SCRIPT >");
	out.println(" var link ='"+ PDF_PATH+"';");
	//String tLink = "<SCRIPT >homeWindow=window.open('"+PDF_PATH+"')</SCRIPT>";
	out.println("homeWindow=window.open(link)");
	out.println("</script>");
	}
%>
<ARTagLibrary:FWPrefillTag  preFill = "Y"/>

<form name="form1" method="post" action="/ControllerServlet" target="_self">

<%/* NOT EDITABLE - Framework Hidden Fields */%>
<%@ include file = "/fwincludes/hiddenFields.jsp" %>

<%/* EDITABLE - Page Specific Hidden Fields (You can add code to this section) */%>
  <input type="hidden" name="navigation" id="navigation">
  <input type="hidden" name="ardcmode" id="ardcmode" value="<%=request.getAttribute("ARDCMODE")%>">
  <input type="hidden" name="validateSource" id="validateSource" validate = "validateSource();">
<%--   <input type="hidden" name="releaseDate" value="<%=request.getAttribute("releaseDate")!=null ? request.getAttribute("releaseDate") : "" %>" validate="validateAppReceivedDate();"> --%>
<!--   <input type="hidden" name="releaseDateDay">
  <input type="hidden" name="releaseDateMonth">
  <input type="hidden" name="releaseDateYear"> -->

<%/* EDITABLE - Additional JSP Scriplets (You can add code to this section)*/%>
<%
					String unableToLoc = null;
					java.sql.Timestamp defaultDate = new java.sql.Timestamp(2999, 1, 1, 0, 0, 0, 0);
					String homeLess = null;
					String drdate = null;
					String priorSnap = null;
					String ctDate = null;
					if(arDcAppCasesCargo!=null){
						if (arDcAppCasesCargo.getUnableToLocateSw() != 0){
							unableToLoc = String.valueOf(arDcAppCasesCargo.getUnableToLocateSw());
						}
//Added by Gopi on 06/13/2006 for FO148
						if (arDcAppCasesCargo.getApplicantHomelessSw() != 0){
							homeLess = String.valueOf(arDcAppCasesCargo.getApplicantHomelessSw());
						}
//Addition 06/13/2006 End
						if (arDcAppCasesCargo.getPriorSnapSw() != 0){
							priorSnap = String.valueOf(arDcAppCasesCargo.getPriorSnapSw());
						}
						if (arDcAppCasesCargo.getAppRecvdDt() != null){
							drdate = arDcAppCasesCargo.getAppRecvdDt().toString();
						}
						if (arDcAppCasesCargo.getInitialContactDt() != null){
							ctDate = arDcAppCasesCargo.getInitialContactDt().toString();
						}
					}
					if (drdate == null){
						drdate = "";
						/* To get defalut time*Included by Gopi on 06/07/2006***/
						/* FwCalendar calendar = FwCalendar.getInstance();
						FwDate date = calendar.getDate();
						java.sql.Timestamp fwDate = date.getTimestamp();
						drdate = fwDate.toString(); */
					}
					if (ctDate == null)
					{	ctDate = "";	}
%>

<%
			//String ARDCMODE = "DC";
			byte k=1;
			String ARDCMODE = "AR";
			ARDCMODE=(String)request.getAttribute("ARDCMODE");

			/* To get defalut time****/
			//START: ILIES-129794 - Added to Prefill Application received time.
			java.sql.Timestamp fwDate = new Timestamp(System.currentTimeMillis()); 
			//END: ILIES-129794 - Added to Prefill Application received time.

%>

<%
	//BRGUS00044504-RA-Removal of filing rep question
	//String isAuth = ""+arDcAppCasesCargo.getAuthRepSw();

	//BRGUS00044504-RA-Added new question for SER Auth Rep
	String authRepInd = Character.toString(arDcAppCasesCargo.getAuthRepInd());

	int size = 0;
	ArrayList spAccom = new ArrayList();
	if(arDcSpIndCollection != null){
		size = arDcSpIndCollection.getResultsSize();
		for(int i = 0; i<size;i++){
			arDcSpIndCargo = arDcSpIndCollection.getResults(i);
			if(arDcSpIndCargo != null){
				spAccom.add(arDcSpIndCargo.getSpIndCd());
			}
		}
	}
	//String[] spAccom = (String[])request.getAttribute("specialAccomodations");
%>

<%String lang = arDcAppCasesCargo.getLanguageCd();
if(lang == null){
	lang = "0";
}
//ILIES-152415 Nikolaos Seitz 12/15/2014 
String appCategoryCd = "0";
if((arDcAppCasesCargo!=null)&&(arDcAppCasesCargo.getAppCategoryCd()!=null)){
	appCategoryCd = arDcAppCasesCargo.getAppCategoryCd();
}
//ILIES-152415 Nikolaos Seitz 12/15/2014 

//FO362 Starts - Addition of Spoken Language dropdown
String spokenLangCd = arDcAppCasesCargo.getSpokenLanguageTypeCd();
if(spokenLangCd == null){
	spokenLangCd = "0";
}
//FO362 Ends

%>

<%  //CODE-AG-DEL-START-12/12/2006-Defect#BRGUS00012416
	//FO371 Starts - Addition of facilities field
	//String companyId = new String();
	//if(arDcAppCasesCargo != null && arDcAppCasesCargo.getCompanyId() != 0)
	//{
		//companyId = String.valueOf(arDcAppCasesCargo.getCompanyId());
	//}
	//FO371 Ends
	//CODE-AG-DEL-END-12/12/2006-Defect#BRGUS00012416
%>
<%/* NOT EDITABLE - Top of Page Include */%>
<%@ include file = "/fwincludes/tabs.jsp" %>

<% /* Added by Shilpi Bhatia for FO369.1 on 11/6/2006 */ %>
<%/* EDITABLE - Action Buttons (You can change this include.) */%>
<%--<%@ include file = "/fwdynamicinclude/actionButtonRN.jsp" %>--%>




<% /* FO369.1 Ends*/ %>

<%/* EDITABLE - Page Level Icon Includes (You can add code to this section) */%>
<% if ("DC".equals(ARDCMODE)){
   	String caseNum = arDcAppCasesCargo.getCaseNum() + "";
%>
	<DCTagLibrary:Comments keyOne = "<%=caseNum%>" keyTwo = "0" />
<%--Commented by Gopi for FO202 to remove data broker button on 07/18/2006
<input type="image" src='/images/pageLevelDataBroker.gif' alt='Data Broker Information'     align="absmiddle" onclick="javascript:viewDatabrokerInfo();return false" >
<%--07/18/2006 End--%>
<% }%>
<%/* NOT EDITABLE - Spacer Images */%>
<%@ include file = "/fwincludes/spacing.jsp" %>

<%/* EDITABLE - Page Header Include (You can change this include.) */%>



<%/* NOT EDITABLE - Begin Outter HTML Table  and  messages file*/%>
<%@ include file="/fwincludes/messageDisplay.jsp" %>

<% /* Added by Shilpi Bhatia for FO369.1 on 11/6/2006 */ %>
<DIV id='MainHeader' repeat="N">
<%@ include file = "/includes/ArDcHeader.jsp" %>
<BR>
<%-- <jsp:include page= "/fwdynamicinclude/actionButtonRN.jsp" > --%>
<jsp:include page= "/fwdynamicinclude/actionButtonR_N.jsp" >
<jsp:param name="fw_buttonOnTop" value="true" />
</jsp:include>
<% /* FO369.1 Ends*/ %>

<%/* EDITABLE (You can add code to this section) - Page Specific Table(s) - This is each developers area for coding the presentation. */%>
<%
String tableTitle = "Application Information";
String tableSummary = "Application Information";

 %>
	<table width="723" border="0" cellspacing="0" cellpadding="0" class="bodyDividerTable" role="presentation" >
          <tr><td><H2 class="bodyDividerTableHeader">

			<%
			if (!ARDCMODE.equals("DC")){
		    %>

			Application Information </H2>
			<%
			}else{
				k=0;
				tableTitle = "Case Information";
				tableSummary = "Case Information";
			%>

			Case Information</H2>

			<%
			}
			%>
          </td></tr>
             
        </table>
        
            <% if (!"DC".equals(ARDCMODE) && arDcAppCasesCargo.getSaverrAppNum() == null){%>
			  <%-- <input type="hidden" name="implementationDate" value="<%=ReferenceTableManager.getValueByColumn(true,"IMPLEMENTATION","STARTDATE","Description")%>" validate="compareImplDates(document.form1.monthdateReceived,document.form1.datedateReceived,document.form1.yeardateReceived,document.form1.implementationDate,document.form1.dateReceived,'Date Received');"> --%>
			<% }
			if (!"DC".equals(ARDCMODE) ){
			%>
			<input type="hidden" name="appComplStatus" id="appComplStatus" value="<%= (arDcAppCasesCargo==null || arDcAppCasesCargo.getApplicationStatusCd() == null)? "":""+arDcAppCasesCargo.getApplicationStatusCd()%>">
			<%}
			%>
      <table width="723" border="0" class="bodyFormLabels" title="<%=tableTitle %>" role="presentation">
          <tr>
      <td height="28" width="142"><!-- <img src="/images/bulletRequired.gif" alt="Mandatory Field"  title="Mandatory Field" > -->
      <TL:FWGroupCustomDateTag beanId = "dateReceived" isRequired = "Y" futureDate = "Y" dateLabelId="dateRecv"  dateValue = "<%=drdate%>" pageMode = "1" mode="<%=k%>" />
      </td>
			  <%-- <td height="28" width="200">
             <TL:FWGroupTimeTag
				beanId     = "timeReceived"
				isRequired = "N"
				pageMode   = "1"
				tabIndex   = "2"
				mode="<%=k%>"
				totalMinutes="Y"
				selected  = "<%=(arDcAppCasesCargo.getAppRecvdDt() != null)?arDcAppCasesCargo.getAppRecvdDt():defaultDate%>"
				/>
      		</td> --%>
      		 <%//ILIES-152415 Nikolaos Seitz 12/15/2014%>
      		<td height="28" width="164"> 
              <TL:FWLabelTag bean="<%=applicationCategory%>"  required="N"/>
      		</td>
            <td height="28" width="199"><TL:FWRTSelectTag referenceTableName="APPLICATIONCATEGORY" bean="<%=applicationCategory%>"  multiple="N" emptySpace="Y"  selected="<%=appCategoryCd%>" />
            </td> 
              <%//ILIES-152415 Nikolaos Seitz 12/15/2014%>
              <td>
            <input type="hidden" name="defaultTime" id="defaultTime" value = "<%=fwDate.toString()%>" > 
            </td>
			<!-- <input type = "hidden" name = "RequestedDateAndTime" id="RequestedDateAndTime" value ="" validate="formDate(document.form1.dateReceived);"> -->
 			</tr>

          <tr>
            <td height="28" width="142"> <!-- <img src="/images/bulletRequired.gif"   alt="Mandatory Field" title="Mandatory Field"> -->
              <TL:FWLabelTag bean="<%=noticeLanguage%>"  labelId="noticeLang"  required="Y" />
      		</td>
            <td height="28" width="200"><TL:FWRTSelectTag referenceTableName="WRITTENLANGUAGE" bean="<%=noticeLanguage%>"  multiple="N" emptySpace="N" selected="<%=lang%>"  other = "validate=\"isComplete(document.form1.noticeLanguage)\"" style="form150" filter="NO" filterColumn="" filterValue="" />
            </td>

            <td height="28" width="164" valign="top">
              <TL:FWLabelTag bean="<%=specialAccomodations%>"/>
            </td>
            <%//FO371 - Addition of Facility Field. Added Validation %>
            <!-- Increase the form size to increase the width of the text box for BRGUS00053514 -->
            <%--BRGUS00090007 - chakalamb - 03-27-2008 - making the special accomodations to a dropdown--%>
            <td height="28" width="199"><TL:FWRTSelectTag referenceTableName="SPECIALSKILLS" bean="<%=specialAccomodations%>"  emptySpace="Y" selected="<%=spAccom%>" multiple="N" show="1" style="form300" other="onChange=\"enableProvider();emptyServiceProvider()\"  validate=\"validateFacilities()\" "/>
            </td>

          </tr>
          <%//FO362 Starts - Addition of Spoken Language dropdown.%>
          <tr>
            <td height="28" width="142"> <!-- <img src="/images/bulletRequired.gif" width="6" height="9" alt="Mandatory Field" title="Mandatory Field"> -->
              <TL:FWLabelTag bean="<%=spokenLanguage%>" labelId="spokenLang" required="Y" />
      		</td>
            <td height="28" width="200"><TL:FWRTSelectTag referenceTableName="LANGUAGE" bean="<%=spokenLanguage%>"  multiple="N" emptySpace="N" selected="<%=spokenLangCd%>"  style="form150" filter="NO" filterColumn="" filterValue="" />
            </td>
            <%//FO371 Starts - Addition of Facility Field %>
            <%--CODE-AG-ADD-START-12/12/2006-Defect#BRGUS00012416--%>
              <% 	String sComapanyId = "";
		       		String sproviderId ="";
		       		String facilityname ="";
		       		String sProviderNumber ="";
		       		String impactProviderId ="";
		       		String impactGoLiveSw = (String) ReferenceTableManager.getValueByColumn(true,"IMPACTPARAMS","IMPACTGOLIVESW","DESCRIPTION");
					String providerBatchSw = (String) ReferenceTableManager.getValueByColumn(true,"IMPACTPARAMS","PROVIDERBATCHSW","DESCRIPTION");
		       		if(ResultsDcAddressBookCargo  != null && ResultsDcAddressBookCargo.getCompanyId() !=0 && 
		       			(ResultsDcAddressBookCargo.getProviderNumber() != 0 || ResultsDcAddressBookCargo.getImpactProviderId() != 0)){
		                sComapanyId  =String.valueOf(ResultsDcAddressBookCargo.getCompanyId());
						sproviderId  =String.valueOf(ResultsDcAddressBookCargo.getFrcCode());
						sProviderNumber = String.valueOf(ResultsDcAddressBookCargo.getProviderNumber());
						//Modified for Defect # BRGUS00084590
						if(ResultsDcAddressBookCargo.getCoName()!=null){
							//facilityname=gov.illinois.fw.management.referencetables.ReferenceTableManager.getValueByColumn(true, "DCCOMPANYTYPE",ResultsDcAddressBookCargo.getCoName(),"Description");
							facilityname = ResultsDcAddressBookCargo.getCoName();
						}
					if(providerBatchSw.equalsIgnoreCase("Y")){
					 impactProviderId = String.valueOf(ResultsDcAddressBookCargo.getImpactProviderId());
					
					} 
					}
					if("0".equalsIgnoreCase(sproviderId) || sproviderId==null){
						sproviderId = "";
					}
					 if("0".equalsIgnoreCase(impactProviderId) || impactProviderId==null){
						impactProviderId = "";
					}

				%>
			  <%--CODE-AG-ADD-END-12/12/2006-Defect#BRGUS00012416--%>
            <td  width="202"><TL:FWLabelTag bean="<%=facilities%>" id = "providerTF" required = "N" /></td>
            <%--CODE-AG-MOD-START-12/12/2006-Defect#BRGUS00012416--%>
      		<td width="156" id="DOBDisplay">
      		<!-- ILIES-151599 -->
      		
      	
  <%if(impactGoLiveSw.equalsIgnoreCase("Y")&&providerBatchSw.equalsIgnoreCase("Y")){%>
           <TL:FWTextTag bean="<%=serviceProvider%>" lblDesc='Facilities/ Institutions' value="<%=impactProviderId%>"   size="9" maxlength="12" />
        	<!-- <input type="image" src='../../../images/searchImage.gif' name = "providerTF" id = "providerTF1" alt='Search Facilities/ Institutions'  onClick='javascript:searchAndSetAddressDataWithFilterARRAP(new Array("companyId","serviceProvider","coTypeCd"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");document.form1.serviceProvider.value=document.form1.companyId.value;return false'> -->
            <a href="" 
			onkeyup='javascript: if((event.keyCode || event.charCode) == 32){searchAndSetAddressDataWithFilterARRAP(new Array("providerNumber","serviceProvider","coTypeCd","companyId"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");document.form1.serviceProvider.value=document.form1.providerNumber.value;document.form1.providerNmber.value=document.form1.providerNumber.value;return false}'
				onClick='javascript:searchAndSetAddressDataWithFilterARRAP(new Array("providerNumber","serviceProvider","coTypeCd","companyId"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");document.form1.serviceProvider.value=document.form1.providerNumber.value;document.form1.providerNmber.value=document.form1.providerNumber.value;return false'> <img
					 name="providerTF" id="providerTF" src="../../images/searchImage.gif" alt="Search Facilities/ Institutions" border="0" > </a>
          <%}else{ %>
           <TL:FWTextTag bean="<%=serviceProvider%>" lblDesc='Facilities/ Institutions' value="<%=sProviderNumber%>"   size="9" maxlength="12" />
        	<!-- <input type="image" src='../../../images/searchImage.gif' name = "providerTF" id = "providerTF1" alt='Search Facilities/ Institutions'  onClick='javascript:searchAndSetAddressDataWithFilterARRAP(new Array("companyId","serviceProvider","coTypeCd"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");document.form1.serviceProvider.value=document.form1.companyId.value;return false'> -->
            <a href="" 
			onkeyup='javascript: if((event.keyCode || event.charCode) == 32){searchAndSetAddressDataWithFilterARRAP(new Array("providerNumber","serviceProvider","coTypeCd","companyId"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");document.form1.serviceProvider.value=document.form1.providerNumber.value;document.form1.providerNmber.value=document.form1.providerNumber.value;return false}'
				onClick='javascript:searchAndSetAddressDataWithFilterARRAP(new Array("providerNumber","serviceProvider","coTypeCd","companyId"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");document.form1.serviceProvider.value=document.form1.providerNumber.value;document.form1.providerNmber.value=document.form1.providerNumber.value;return false'> <img
					 name="providerTF" id="providerTF" src="../../images/searchImage.gif" alt="Search Facilities/ Institutions" border="0" > </a>
           <%} %>
            </td>
            <%--CODE-AG-ADD-MOD-12/12/2006-Defect#BRGUS00012416--%>
          </tr>
          <%//FO362 Ends %>
        <%-- FO529 --%>
              <tr>
              <%--FO707 changes start --%>
              <td height="28"><TL:FWLabelTag bean="<%=appModeCd%>" labelId="sourceId" required="Y" /></td>
              <%
                // String appMode = arDcAppCasesCargo.getAppModeCd();
                String appMode = new String();
                if(arDcAppCasesCargo!=null && arDcAppCasesCargo.getAppModeCd() != null){
                  appMode = arDcAppCasesCargo.getAppModeCd();
                  }
				//if(appMode == null){
					//appMode = "0";
					//}


               %>
              <%--<td height="28" width="100">--%>
             <%--<TL:FWLabelTag bean="<%=appModeCd%>"/>--%>
      		<%--</td>--%>
      		<%--FO707 changes end --%>
            <td  width="570" align="left"><TL:FWRTSelectTag referenceTableName="APPMODE" bean="<%=appModeCd%>"  other="validate=\"isComplete(document.form1.appModeCd)\""  multiple="N" emptySpace="Y"  selected="<%=appMode%>" />
            </td>
            <%--Added by Srinivas  sys defect 71310--%>
            <td height="26">
	            <input type ="hidden" NAME ="coTypeCd" ID ="coTypeCd"  value =""/>
	            <TL:FWLabelTag bean="<%=facilityInstitutionName%>" required = "N" /></td>
 			<td width="380" id="facilityName"><%=facilityname%>&nbsp;</td>
            </tr>

            </table>
             <input type ="hidden" name="companyId" id= "companyId" value="<%=sComapanyId%>">
        <%String arMode = (String)request.getAttribute("ARDCMODE");
        	if (!arMode.equals("DC")){
        		String providerNum = "";
        		if (arDcAppCasesCargo!=null && arDcAppCasesCargo.getProviderNumber()!=0){
        			providerNum = String.valueOf(arDcAppCasesCargo.getProviderNumber());
        		}
         %>
		<table width="723" border="0" class="bodyFormLabels" title="<%=tableTitle %>" role="presentation">
        	<tr height="26">
        		<td width="55">
        			<TL:FWLabelTag bean="<%=providerNmber %>"/>
        		</td>
        		<td width="668">
        			<input type="hidden" name="providerNumber" id="providerNumber">
        			<TL:FWTextTag bean="<%=providerNmber %>" size="12" value="<%=providerNum %>" other="validate=\"isNumericValNotZero(document.form1.providerNmber);\""/>
        			<!-- ILIES-154283: changed the alt text from 'Search Provider ID' to 'Search Provider #' -->	
        			<!-- <input type="image" src='../../../images/searchImage.gif' name = "providerNum" id = "providerNum" alt='Search Provider #'
        			onClick='javascript:searchAndSetAddressDataARRAP(new Array("ARRAP","providerNumber"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");form1.providerNmber.value=form1.providerNumber.value;return false'> -->
        			 
        <a href=""
        	onkeyup='javascript: if((event.keyCode || event.charCode) == 32){searchAndSetAddressDataARRAP(new Array("ARRAP","providerNumber"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");form1.providerNmber.value=form1.providerNumber.value;document.form1.serviceProvider.value=document.form1.providerNumber.value;return false}'
				onClick='javascript:searchAndSetAddressDataARRAP(new Array("ARRAP","providerNumber"),"/ControllerServlet?REQUESTED_PAGE_ID=DCADD");form1.providerNmber.value=form1.providerNumber.value;document.form1.serviceProvider.value=document.form1.providerNumber.value;return false'> <img
				name="providerNum" id="providerNum" src="../../images/searchImage.gif" alt="Search Provider #" border="0"> </a>
        			
        			
        		</td>
        	</tr>
        </table>
        <%} %>
        <br>

        <%-- FO529 --%>




        <table width="723" border="0" cellspacing="0" cellpadding="0" class="bodyDividerTable"  role="presentation">
          <tr>
           <td>
             <H2 class="bodyDividerTableHeader">
            Primary Applicant</H2>
           </td>
         </tr>
        </table>
        <table width="723" border="0" class="bodyFormLabels" title="Primary Applicant" role="presentation">
 		<tr>
			<td>
			</td>
		</tr>
		<tr>
			<td colspan="2">

			<TL:FWGroupNameTag nameGroupBeanId="nameGroup"  mandatoryMarker="Y"
				prefixName ="<%=arPrimApplicant.getPrefixName()%>"
				firstName="<%=arPrimApplicant.getFirstName()%>"
				firstNameScript="validateName(document.form1.firstName)"
				middleName="<%=arPrimApplicant.getMidName()%>"
				middleNameScript="validateName(document.form1.middleName);isMidNameAlpha(document.form1.middleName);"
				lastName="<%=arPrimApplicant.getLastName()%>"
				lastNameScript="validateName(document.form1.lastName);isLastNameValid(document.form1.lastName);"
				suffixName ="<%=arPrimApplicant.getSufxName()%>"
				mode="<%=k%>" />
			</td>
		</tr>
		<tr>
            <td height="32" width="363">
              <TL:FWLabelTag bean="<%=isHomeless%>" colon="N"/>
      		</td>
			<td width="280">
			<TL:FWRTSelectTag referenceTableName="YESNO" bean="<%=isHomeless%>" emptySpace="N" selected="<%=homeLess%>" multiple="N" show="1" style="form50"/>
            </td>
			<td width = "300"></td>
          </tr>          
<%--06/13/2006 End--%>
<%--135145 Start--%>
           <%--<tr class="bodyFormLabels" height="32" align = "left" >--%>
           <tr>
            <td height="32" width="363">
              <TL:FWLabelTag bean="<%=ispriorSnap%>" question="Y"/>
      		</td>
			<td width="280">
			<TL:FWRTSelectTag referenceTableName="PRIORSNAP" bean="<%=ispriorSnap%>" emptySpace="N" selected="<%=priorSnap%>" size="12" multiple="N" show="1" />
            </td>
			<td width = "300"></td>
          </tr>
	</table>
        <br>

        <table width="723" border="0" cellspacing="0" cellpadding="0" class="bodyDividerTable" role="presentation">
           <tr>
           	<td>
           		<H2 class="bodyDividerTableHeader">Approved Representative</H2>
          	</td>
          </tr>
        </table>
        <table border="0" class="bodyFormLabels" width="723" title="Approved Representative" role="presentation">
        	<tr>
	            <td height="32" width="253" style="padding-left: 5px;">
	              <TL:FWLabelTag bean="<%=representative%>" colon="N"/>
	      		</td>
				<td>
 					<TL:FWRTSelectTag referenceTableName="YESNO" bean="<%=representative%>" emptySpace="N" selected="<%=authRepInd%>" multiple="N" show="1" style="form50" other="onChange=\"enableDisableAuthRepTab();\"" />
            	</td>
            </tr>
        </table>
        </DIV>

<%/* EDITABLE - Comments (You can add code to this section) */%>
<%	if ("DC".equals(ARDCMODE)){%>
	<%@ include file="/includes/Comments.jsp" %>
<%	}%>
<%/* EDITABLE - Action Buttons (You can change this include.) */%>
<%--<%@ include file = "/fwdynamicinclude/actionButtonRN.jsp" %>--%>
<%-- <jsp:include page="/fwdynamicinclude/actionButtonRN.jsp" > --%>
<jsp:include page="/fwdynamicinclude/actionButtonR_N.jsp">
<jsp:param name="fw_buttonOnTop" value="false" />
</jsp:include>
<%String firstOrLastName = arPrimApplicant.getFirstName();
	if(firstOrLastName==null || firstOrLastName==""){
		firstOrLastName = arPrimApplicant.getLastName();
	}
	
%>

<%if(firstOrLastName != null && firstOrLastName != ""){ %>
<TL:FWUpdateUserTag cargo="<%=arDcAppCasesCargo%>" />
<%} %>
<%/* EDITABLE - Heading for details (use this only when applicable */ %>

<%/* EDITABLE - Details Area (use this only when applicable do not change the name and id of the frame)*/ %>
<%/* EDITABLE - Comments (You can add code to this section) */%>

<%/* EDITABLE - Action Buttons (You can change this include.) */%>
            <%--CODE-AG-ADD-START-12/12/2006-Defect#BRGUS00012416--%>
            <%
			 String strEmpty ="";
			%>
			<script language="javascript" type="text/javascript">
					<%-- form1.serviceProvider.value ="<%= ResultsDcAddressBookCargo == null ?strEmpty:(ResultsDcAddressBookCargo.getFrcCode()==null?strEmpty:ResultsDcAddressBookCargo.getFrcCode())+""%>";
					if(form1.serviceProvider.value == "0"){
						form1.serviceProvider.value = "";
					} --%>
			</script>
			<%--CODE-AG-ADD-END-12/12/2006-Defect#BRGUS00012416--%>
<%/* NOT EDITABLE - End Outer HTML Table */%>
<%@ include file="/fwincludes/endTable.jsp" %>