<%--
**************************************************************************************************
Name: ABHouseHoldMemberQuestions.jsp		Created By: Nandan Padmanabhan	Created On: 12/21/2005
Purpose: [YOUR PURPOSE]
Modification Logs:
Modified By 			Date				Reason & description
[MODIFIED NAME]		    [MM/DD/YYYY]		[REASON FOR CHANGE]
***************************************************************************************************
--%>            
        
<%-- NOT EDITABLE - Fw Page Directive, Imports, and URIs --%>                 
<%@ include file = "/frameworkIncludes/directives.jsp" %>          
<%@page import="gov.illinois.access.business.customEntities.INDIVIDUAL_Custom_Collection,
				gov.illinois.access.business.entities.APP_IN_PRFL_Collection,
				gov.illinois.access.business.entities.APP_IN_PRFL_Cargo,
				gov.illinois.access.management.individuals.PeopleHandler,
				gov.illinois.access.business.customEntities.INDIVIDUAL_Custom_Cargo,
				gov.illinois.access.business.entities.APP_HSHL_RLT_Cargo,
				gov.illinois.access.business.entities.APP_HSHL_RLT_Collection,
				gov.illinois.access.business.customEntities.APP_TAX_RLT_Cargo,
				gov.illinois.access.business.customEntities.APP_TAX_RLT_Collection,
				gov.illinois.access.business.rules.cmb.IndividualCustomComparator"%> 
<%@page import="gov.illinois.access.management.programs.IProgramManager"%> <!-- Added by Gauresh for ILIES-136382-->
<%@page import="gov.illinois.access.management.programs.FwProgramManager"%>
<%@page import="org.owasp.encoder.Encode" %>
<%-- EDITABLE - Page Specific Imports and URIs (You can add code to this section) --%>
<%@page import="gov.illinois.access.business.entities.APP_INDV_Collection"%>
<%@page import="gov.illinois.access.business.entities.APP_INDV_Cargo"%>
  
<%-- EDITABLE - Page Specific useBean tags(You can add code to this section) --%> 
<jsp:useBean id="APP_IN_PRFL_Collection" class="gov.illinois.access.business.entities.APP_IN_PRFL_Collection" scope="request"/>
<jsp:useBean id="NO_ONE_Collection" class="gov.illinois.access.business.entities.NO_ONE_Collection" scope="request"/>
<jsp:useBean id="ABHouseHoldMembersListview_ListView" class="gov.illinois.access.presentation.entities.listview.ABHouseHoldMembersListview" scope="request"/>
<jsp:useBean id="enrollmentStatusCD"	class="gov.illinois.access.presentation.pageElements.EnrollmentStatusCD" scope="application" />
<jsp:useBean id="taxDependent" class="gov.illinois.access.presentation.pageElements.TaxDependent" scope="application" />
<jsp:useBean id="firstName" class="gov.illinois.access.presentation.pageElements.FirstName" scope="application"/>
<jsp:useBean id="relation" class="gov.illinois.access.presentation.pageElements.Relation" scope="application" />
<jsp:useBean id="APP_HSHL_RLT_Collection" class="gov.illinois.access.business.entities.APP_HSHL_RLT_Collection" scope="request" />
<jsp:useBean id="INDV_SRC_CUST_Collection" class="gov.illinois.access.business.customEntities.INDIVIDUAL_Custom_Collection" scope="request" />
<jsp:useBean id="INDV_REF_CUST_Collection" class="gov.illinois.access.business.customEntities.INDIVIDUAL_Custom_Collection" scope="request" />
<jsp:useBean id="APP_TAX_RLT_Collection" class="gov.illinois.access.business.customEntities.APP_TAX_RLT_Collection" scope="request" />
<jsp:useBean id="SKIP_VALIDATE" class="java.lang.String" scope="request" />
<%-- Added By santhi thanneeru- Update gatepost questions and readability #164562--%>
<jsp:useBean id="abHouseholdQuestionsDrugFelonies" class="gov.illinois.access.presentation.pageElements.AbHouseholdQuestionsDrugFelonies" scope="application" />
<jsp:useBean id="abHouseholdQuestionsDrugTrtment" class="gov.illinois.access.presentation.pageElements.AbHouseholdQuestionsDrugTrtment" scope="application" />
<jsp:useBean id="abHouseholdQuestionsBlndDisbl" class="gov.illinois.access.presentation.pageElements.AbHouseholdQuestionsBlndDisbl" scope="application" />
<jsp:useBean id="abHouseholdQuestionsOutofStateSNAP" class="gov.illinois.access.presentation.pageElements.AbHouseholdQuestionsOutofStateSNAP" scope="application" />
<jsp:useBean id="getpostYesNo"	class="gov.illinois.access.presentation.pageElements.GetpostYesNo"	scope="application" />
<jsp:useBean id="frmrStateCode"	class="gov.illinois.access.presentation.pageElements.FormerFosterCareStateCode"	scope="application" />
<jsp:useBean id="taxfilesw" class="gov.illinois.access.presentation.pageElements.Taxfilesw" scope="application" />
<jsp:useBean id = "taxJointlyFiled" class = "gov.illinois.access.presentation.pageElements.TaxJointlyFiled" scope = "application" />
<jsp:useBean id="APP_INDV_Collection" class="gov.illinois.access.business.entities.APP_INDV_Collection" scope="request" />



<%-- NOT EDITABLE - Head Tag 
	Includes the DOCTYPE , META tags, teh form tag, the common JS files and CSS files to include in all the ACCESS JSPs 
--%>  
<AP:FwHeadTag  currentPageID="ABHHQ" defaultPageAction="ABHHQNext" displayNavLinks="<%=FwConstants.NO%>"/>   

<%-- EDITABLE - Page specific .js or .css files (You can add code to this section) --%>
<%-- Moved into FwHeadTag for ILIES-167606 (matthmiller) --%>
<%-- Added By santhi thanneeru- Update gatepost questions and readability #164562
<!-- <script language="JavaScript" type="text/JavaScript" SRC="/access/js/jquery-1.11.2.min.js"></script> -->
<script language="JavaScript" type="text/JavaScript" SRC="/access/js/hoverHelp.js"></script> --%>
 
<%-- NOT EDITABLE - Welcome Tag and Toolbar Tag --%> 
<AP:FwWelcomeTag>  
	<AP:FwToolbarTag helpImage="<%=FwConstants.YES%>"/>
</AP:FwWelcomeTag>  

<%-- NOT EDITABLE - Framework Hidden Fields --%>
<TL:FwHiddenFieldsTag />

<%-- EDITABLE - Page Specific Hidden Fields (You can add code to this section) --%>

<%--NOT EDITABLE - Message Display Table  --%>  
<AP:FwMessageDisplayTag/>

<%--NOT EDITABLE - Begin BodyTableTag. --%>
<AP:FwBodyTableTag hideNav="<%=FwConstants.NO %>"> 

	<AP:AFBMenuTag />

<%--NOT EDITABLE - End BodyTableTag. --%>
</AP:FwBodyTableTag>

<%-- EDITABLE (You can add code to this section) - Page Specific Table(s) - This is each developers area for coding the presentation. --%>	
	<%	
		boolean hpeApp = false;
		if(session.getAttribute("HPE_INDICATOR") != null ){
			String hpeStr = (String) session.getAttribute("HPE_INDICATOR");
			if(hpeStr.equals("Y")){
				hpeApp = true;
			}
		}
		INDIVIDUAL_Custom_Cargo srcCustCargo = null;
		INDIVIDUAL_Custom_Cargo refCustCargo = null;
		APP_TAX_RLT_Cargo taxIndvCargo = null;
		APP_TAX_RLT_Cargo appJointlyFilingTaxCargo = null;
		
		//Get maps for each question/component
		INDIVIDUAL_Custom_Collection people_56 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_56");
		INDIVIDUAL_Custom_Collection people_58 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_58");
	    // Added for ILIES-129516
		INDIVIDUAL_Custom_Collection people_5218 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_5218");
		INDIVIDUAL_Custom_Collection people_5219 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_5219");		
		INDIVIDUAL_Custom_Collection people_41 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_41");
		INDIVIDUAL_Custom_Collection people_418 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_418");
		INDIVIDUAL_Custom_Collection people_419 = (INDIVIDUAL_Custom_Collection)request.getAttribute("PEOPLE_419");
		INDIVIDUAL_Custom_Collection people_421 = (INDIVIDUAL_Custom_Collection) request.getAttribute("PEOPLE_421"); 
		INDIVIDUAL_Custom_Collection people_43 =  (INDIVIDUAL_Custom_Collection) request.getAttribute("PEOPLE_43"); 
		APP_TAX_RLT_Collection taxPeople = (APP_TAX_RLT_Collection)request.getAttribute("APP_TAX_RLT_INDIVS");
		INDIVIDUAL_Custom_Collection allAppIndvsTax = (INDIVIDUAL_Custom_Collection)request.getAttribute("ALL_APP_INDIVS_TAX");
		APP_TAX_RLT_Collection appJointlyFilingTax = (APP_TAX_RLT_Collection)request.getAttribute("APP_JOINTLY_FILING_TAX");
		
		PeopleHandler peopleHandler = (PeopleHandler)session.getAttribute(AppConstants.INDIV_MASTER_HANDLER);
		Map indvMapDropDownMap = peopleHandler.sortIndividualsForDropdown(people_56);
		
		//Get the No One Checked flags from the No One Checked Map
		Map noOneCheckedMap = (Map)request.getAttribute("NO_ONE_CHECKED_MAP");
		String noOneChecked_56 = (String)noOneCheckedMap.get("NO_ONE_CHECKED_56");
		String noOneChecked_58 = (String)noOneCheckedMap.get("NO_ONE_CHECKED_58");
		// Added for ILIES-129516
		String noOneChecked_5218 = (String)noOneCheckedMap.get("NO_ONE_CHECKED_5218");		
		String noOneChecked_5219 = (String)noOneCheckedMap.get("NO_ONE_CHECKED_5219");				
		String noOneChecked_41 = (String)noOneCheckedMap.get("NO_ONE_CHECKED_41");
		String noOneChecked_418 = (String)noOneCheckedMap.get("NO_ONE_CHECKED_418");
		String noOneChecked_419 = (String)noOneCheckedMap.get("NO_ONE_CHECKED_419");
		String noOneChecked_421 = (String) noOneCheckedMap.get("NO_ONE_CHECKED_421");
		String noOneChecked_43 = (String) noOneCheckedMap.get("NO_ONE_CHECKED_43");
		
		//Value of the no one field - could be N, 0, false, etc...
		//Value of the html name when the no one is submitted in the request (ie NO_ONE_DABL)
		String[] noOneValue_56 = {"Y", "DABL"};
		String[] noOneValue_58 = {"Y", "DRGFLN"};
	    // Added for ILIES-129516
		String[] noOneValue_5218 = {"Y", "DRGTRTPRG"};
		String[] noOneValue_5219 = {"Y", "PARPRBVL"};
		String[] noOneValue_41 = {"Y", "OTHFS"};
		String[] noOneValue_418 = {"Y", "SSIB"};
		String[] noOneValue_419 = {"Y", "CASHB"};
		String[] noOneValue_421 = { "Y", "AGISE" };
		String[] noOneValue_43 = { "Y", "FSTRC" };
		String[] values = { "Y" };
		Map responseMap_56 = (Map)request.getAttribute("RESP_MAP_56");
		Map responseMap_58 = (Map)request.getAttribute("RESP_MAP_58");
	    // Added for ILIES-129516
		Map responseMap_5218 = (Map)request.getAttribute("RESP_MAP_5218");
		Map responseMap_5219 = (Map)request.getAttribute("RESP_MAP_5219");
		Map responseMap_41 = (Map)request.getAttribute("RESP_MAP_41");
		Map responseMap_418 = (Map)request.getAttribute("RESP_MAP_418");
		Map responseMap_419 = (Map)request.getAttribute("RESP_MAP_419");
		Map responseMap_421 = (Map) request.getAttribute("RESP_MAP_421");
		Map responseMap_43 = (Map) request.getAttribute("RESP_MAP_43");
		String[] valueElements = {"Y"};	
		String dabl_status = null;
		int tabIndex = 1;	
		
		boolean taxDependentFlag = false;
		Map<String, String> taxIndvsInfoMap = new HashMap<String, String>();
		
		//USERAN - Jointly Filing Tax Changes
		String fullName = "";
		if(allAppIndvsTax!=null){
			if(allAppIndvsTax.size()>1){
				//Storing all the Individual Information from the application
				for(int i=0; i<allAppIndvsTax.size(); i++){
					INDIVIDUAL_Custom_Cargo indvCustomCargo = (INDIVIDUAL_Custom_Cargo) allAppIndvsTax.get(i);
					fullName = indvCustomCargo.getFst_nam() + " " + indvCustomCargo.getLast_nam();
					taxIndvsInfoMap.put(indvCustomCargo.getIndv_seq_num(),fullName);
				}
				taxDependentFlag=true;
			}
		}
		/*START: Added by Gauresh for ILIES-136382*/
		short[] pgmKey = (short[]) session.getAttribute(FwConstants.AFB_PROGRAM_KEY);
		boolean fppyes = false;
		if(pgmKey!=null && pgmKey.length>8 && pgmKey[8] ==1){
   			fppyes = true;
		}
		pageContext.setAttribute("fppyes",fppyes);
		IProgramManager programManager = FwProgramManager.getInstance();
		boolean isSNAPOnlySelected = programManager.isSNAPOnlyProgramRequestedNew(pgmKey);
		/*ENDS here*/
		
	%>
	
<TABLE BORDER="0" WIDTH="100%">
<%if(!isSNAPOnlySelected){ %> <!-- Added condition by Gauresh for ILIES-136382: to not display details when program selected is only SNAP-->
	<TR align="left">
		<TD WIDTH="100%" align="left">
		<AP:FwSubsectionTag textID="41013" headerLevel="<%=FwConstants.HEADER_LEVEL_H1%>" dataRequired="<%=FwConstants.YES%>" tagRequired="Y">
				<table width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation">
					<TR align="left">
						<TD colspan="40" align="left"><AP:FwPageLabelTag textID="123114" /></TD>
					</TR>
					<tr align="left">
						<TD>&nbsp;</TD>
					</tr>
					<%
					//	for (int i=0; i<taxPeople.size() ; i++)
						//for (int i=0; i<allAppIndvsTax.size() ; i++)
					int i = 0;
					SortedSet<INDIVIDUAL_Custom_Cargo> allAppIndvsTaxSet = new TreeSet<INDIVIDUAL_Custom_Cargo>(new IndividualCustomComparator());
					allAppIndvsTaxSet.addAll(allAppIndvsTax);
					Iterator it = allAppIndvsTaxSet.iterator();
					while(it.hasNext())
						       		{
						       			String[] fname = new String[1];
						       			String[] lname = new String[1];
						       			String[] name  = new String[1];
						       			taxIndvCargo=null;
						       			
						       			//USERAN - Jointly Filing Tax Changes
						       			String[] jointlyFilingNames = new String[2];
						       			jointlyFilingNames[0]="";
						       			jointlyFilingNames[1]="";
						       			String jointlyFiledIndvSeqNum = "";
						       			appJointlyFilingTaxCargo=null;
						       			String jointlyFilingOnchangeAttribute = "onChange='jointlyFilingChange(this,\"";
						       			//srcCustCargo = allAppIndvsTax.getResult(i);
						       			srcCustCargo = (INDIVIDUAL_Custom_Cargo)it.next();
						       			String relationship=srcCustCargo.getRlt_cd();
						       			for(int z=0; z<taxPeople.size() ; z++){
						       				if(taxPeople.getCargo(z).getSrc_indv_seq_num().equalsIgnoreCase(srcCustCargo.getIndv_seq_num())){
						       					taxIndvCargo = taxPeople.getCargo(z); 
						       				}
						       			}
						       			
						       			for(int z=0; z<appJointlyFilingTax.size() ; z++){
						       				appJointlyFilingTaxCargo = appJointlyFilingTax.getCargo(z); 
						       				if(appJointlyFilingTaxCargo.getSrc_indv_seq_num().equalsIgnoreCase(srcCustCargo.getIndv_seq_num())){
						       					jointlyFilingNames[0] = taxIndvsInfoMap.get(appJointlyFilingTaxCargo.getSrc_indv_seq_num());
						       					jointlyFilingNames[1] = taxIndvsInfoMap.get(appJointlyFilingTaxCargo.getRef_indv_seq_num());
						       					jointlyFiledIndvSeqNum = appJointlyFilingTaxCargo.getRef_indv_seq_num();
						       					relationship="WIF";
			       								break;
						       				}
						       				else if(appJointlyFilingTaxCargo.getRef_indv_seq_num().equalsIgnoreCase(srcCustCargo.getIndv_seq_num())){
						       					jointlyFilingNames[0] = taxIndvsInfoMap.get(appJointlyFilingTaxCargo.getRef_indv_seq_num());
						       					jointlyFilingNames[1] = taxIndvsInfoMap.get(appJointlyFilingTaxCargo.getSrc_indv_seq_num());
						       					jointlyFiledIndvSeqNum = appJointlyFilingTaxCargo.getSrc_indv_seq_num();
						       					relationship="HUS";
			       								break;
						       				}
						       			}
						       			jointlyFilingOnchangeAttribute = jointlyFilingOnchangeAttribute + jointlyFiledIndvSeqNum + "\");'";
						       			
						       			if(taxIndvCargo==null){
						       				taxIndvCargo=new APP_TAX_RLT_Cargo();
						       				taxIndvCargo.setSrc_indv_seq_num((i+1)+"");
						       				taxIndvCargo.setTax_dependent_sw("N");
						       				taxIndvCargo.setRef_indv_seq_num("0");
						       				taxIndvCargo.setRlt_cd("");
						       			}
						       			fname[0]=srcCustCargo.getFst_nam();
						       			lname[0]=srcCustCargo.getLast_nam();
						       			name[0]=fname[0]+ " " + lname[0];
						       			
						       			//USERAN - Jointly Filing Tax Changes
						       			String jointlyFiled = "";
						       			if(null != appJointlyFilingTaxCargo)
						       				jointlyFiled = appJointlyFilingTaxCargo.getTax_jointly_filed_sw();
						       			
						       			APP_INDV_Cargo appIndvCargo = new APP_INDV_Cargo();
						       			for(int z=0; z<APP_INDV_Collection.size() ; z++){
						       				if(APP_INDV_Collection.getCargo(z).getIndv_seq_num().equalsIgnoreCase(srcCustCargo.getIndv_seq_num())){
						       					appIndvCargo = APP_INDV_Collection.getCargo(i);
						       				}
						       			}
					%>
					<tr align="left">
						<td>
							<table>
								<tr>
									<td align="left" width = "40px"><AP:AFBImageTag
											indivCargo="<%=srcCustCargo%>" /></td>
											<td>&nbsp;&nbsp;</td>
										<%-- Added according to ILIES-313147 --%>
										<%if(allAppIndvsTax.size()==1){%>
										<tr align="middle" >
											<td>&nbsp;&nbsp;&nbsp;</td>
											<td colspan="5">
									 			<AP:FwPageLabelTag textID="41028" substitute = "<%=name%>"/>
											</td>
											<td colspan="5">&nbsp;&nbsp;&nbsp;</td>
											<td align="right"><AP:FwRTSelectTag
											selected="<%=appIndvCargo.getFile_taxes_sw()%>"
											bean="<%=taxfilesw%>" referenceTableName="TRSP"
											suffixname="<%=appIndvCargo.getIndv_seq_num()%>"
											columnId="57" tagValueName="123114" altID="99895" substitute="<%=name%>"/>
											</td>
										</tr>
										<%} else { %>
										<tr align="middle" >
											<td>&nbsp;&nbsp;&nbsp;</td>
											<td colspan="5">
									 			<AP:FwPageLabelTag textID="41028" substitute = "<%=name%>"/>
											</td>
											<td colspan="5">&nbsp;&nbsp;&nbsp;</td>
											<td align="right"><AP:FwRTSelectTag
											selected="<%=appIndvCargo.getFile_taxes_sw()%>"
											bean="<%=taxfilesw%>" referenceTableName="TRSP"
											suffixname="<%=appIndvCargo.getIndv_seq_num()%>"
											columnId="57" tagValueName="123114" altID="99895" substitute="<%=name%>"/>
											</td>
										</tr>
										<%if(relationship.equalsIgnoreCase("HUS")||(relationship.equalsIgnoreCase("WIF"))){ %>
									<tr align="middle" >
									<td>&nbsp;&nbsp;&nbsp;</td>
											<td colspan="5">
												<AP:FwPageLabelTag textID = "31461" substitute = "<%=jointlyFilingNames%>" />
											</td>
										<td colspan="5">&nbsp;&nbsp;&nbsp;</td>
										<td valign="middle" align="right"><AP:FwRTSelectTag
											selected="<%=jointlyFiled%>"
											bean="<%=taxJointlyFiled%>" referenceTableName="TRSP"
											suffixname="<%=taxIndvCargo.getSrc_indv_seq_num()%>"
											columnId="57" other="<%=jointlyFilingOnchangeAttribute%>" tagValueName="180017256" altID="99895" substitute="<%=name%>"/>
										</td>
									</tr>
									<% }%>
										<tr align="middle" >
									<td>&nbsp;&nbsp;&nbsp;</td>
											<td colspan="5">
												<AP:FwPageLabelTag textID = "31460" substitute = "<%=name%>" />
											</td>
										<td colspan="5">&nbsp;&nbsp;&nbsp;</td>
										<td valign="middle" align="right"><AP:FwRTSelectTag
											selected="<%=taxIndvCargo.getTax_dependent_sw()%>"
											bean="<%=taxDependent%>" referenceTableName="TRSP"
											suffixname="<%=taxIndvCargo.getSrc_indv_seq_num()%>"
											columnId="57" other="onChange=\"taxDependentChange(this);\" " tagValueName="123114" altID="99895" substitute="<%=fname%>"/>
										</td>
										</tr>
									<%} %>
								</tr>
							</table>
						</td>
					</tr>
					<tr align="left">
						<td>&nbsp;</TD>
					</tr>
					<TR WIDTH="100%" id="taxRelationBlock<%=(i+1)%>" align="left">
						<TD colspan="5" width="20%" align="left"><AP:FwPageLabelTag
								textID="123115" bean="<%=firstName%>" suffixname="<%=taxIndvCargo.getSrc_indv_seq_num()%>"/></TD>

						<TD colspan="5" width="30%" align="left"><TL:FwSelectTag
								bean="<%=firstName%>"
								value="<%=(List)indvMapDropDownMap.get(AppConstants.INDV_SEQUENCE_NUMBERS)%>"
								display="<%=(List)indvMapDropDownMap.get(AppConstants.INDV_DESCRIPTIONS)%>"
								other="onChange=\"getIndividualRelationship(this);\""
								suffixname="<%=taxIndvCargo.getSrc_indv_seq_num()%>"
								selected="<%=taxIndvCargo.getRef_indv_seq_num()%>" altTextId="123115"/>
						</TD>
						<%-- Added according to ILIES-313147 --%>
						<%-- <td colspan="5">&nbsp;&nbsp;&nbsp;</td>
						<TD colspan="5" width="20%" align="left"><AP:FwPageLabelTag
								textID="123116" bean="<%=relation%>" suffixname="<%=taxIndvCargo.getSrc_indv_seq_num()%>"/></TD>
						<TD colspan="5" width="30%" align="left"><TL:FwTextBoxTag size="20"
								bean="<%=relation%>"
								suffixname="<%=taxIndvCargo.getSrc_indv_seq_num()%>"
								disabled="Y" value="<%=taxIndvCargo.getRlt_cd()%>" altID="123116"/></TD> --%>
					</TR>

					<tr align="left">
						<td>&nbsp;</TD>
					</tr>
					<%
						i++;
						}
					%>
				</table>
			</AP:FwSubsectionTag>
		</TD>
	</TR>
<%
	}
%>
	<TR>
		<TD WIDTH="100%">
			<AP:FwSubsectionTag textID="32049" componentId="274" headerLevel="<%=FwConstants.HEADER_LEVEL_H1%>">
			<table width="100%" border="0" cellpadding="0" cellspacing="0">
		        
			        <TR>
				        <TD colspan="16" width="100%">
					        <AP:FwPageLabelTag textID="30328"/>
					   </TD>
			        </TR>
			       
	         </table>
			</AP:FwSubsectionTag> 
			
		</TD>
	</TR>
	
	<TR>
		<TD WIDTH="100%">
		<%if(taxDependentFlag==true) { %>
			<AP:FwSubsectionTag textID="32106" headerLevel="<%=FwConstants.HEADER_LEVEL_H2%>" componentId="56" dataRequired="<%=FwConstants.YES%>" tagRequired="Y">
				<table width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation">
		           <TR>
				        <TD align="left" colspan="16" width="60%">
					        <AP:FwPageLabelTag textID="131644" bean="<%=abHouseholdQuestionsBlndDisbl%>" />
				        </TD>
				        <TD align="right" WIDTH="10%">
				        	<AP:FwRTGroupTag
								bean="<%=abHouseholdQuestionsBlndDisbl%>" 
								referenceTableName="TYAP"
								tablecols="3" 
								groupType="S" 
								columnId="9856" 
								tabtext="131644" tagRequired="Y"
								other="onClick=\"houseHoldOnLoadHideOrShow();setValue(this);clearFieldsonNo();\"" />
						</TD>
						
			          </TR>
			          <TR>
			           	<TD width="100%" colspan="3">
			          		<div id="BDDiv3" style="display: none;">
			          		&nbsp;
			          	    <div align="left">
  			              	     <AP:FwPageLabelTag textID="131627"/>
				            </div>
							<AP:AFBIndividualsTag altID="14100"
								collection="<%=people_56%>" 
							    indivCollection="<%=responseMap_56 %>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_56 %>"
							    htmlName="blindDisabled"
							    valueElements="<%=valueElements%>" 
							    noOneValueforDF="<%=noOneValue_56 %>"
							    tagRequired="Y"
							    hideNoOne="Y"
						    />
						    </div>
						</TD>
						<TD>
							<input type="hidden" name="blindId" id="blindId" value="">
						</TD>
			        </TR>
			        
	         </table>
			</AP:FwSubsectionTag> 
			<%} else { %>
			<AP:FwSubsectionTag textID="32106" headerLevel="<%=FwConstants.HEADER_LEVEL_H1%>" componentId="56" dataRequired="<%=FwConstants.YES%>" tagRequired="Y">
				<table width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation">
		           <TR>
				        <TD align="left" colspan="16" width="60%">
					        <AP:FwPageLabelTag textID="131644" bean="<%=abHouseholdQuestionsBlndDisbl%>" />
				        </TD>
				        <TD align="right" WIDTH="10%">
				        	<AP:FwRTGroupTag
								bean="<%=abHouseholdQuestionsBlndDisbl%>" 
								referenceTableName="TYAP"
								tablecols="3" 
								groupType="S" 
								columnId="9856" 
								tabtext="131644" tagRequired="Y"
								other="onClick=\"houseHoldOnLoadHideOrShow();setValue(this);clearFieldsonNo();\"" />
						</TD>
						
			          </TR>
			          <TR>
			           	<TD width="100%" colspan="3"> 
			          		<div id="BDDiv3" style="display: none;">
			          		&nbsp;
			          	    <div align="left">
  			              	     <AP:FwPageLabelTag textID="131627"/>
				            </div>
							<AP:AFBIndividualsTag altID="14100"
								collection="<%=people_56%>" 
							    indivCollection="<%=responseMap_56 %>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_56 %>"
							    htmlName="blindDisabled"   
							    valueElements="<%=valueElements%>" 
							    noOneValueforDF="<%=noOneValue_56 %>"
							    tagRequired="Y"
							    hideNoOne="Y"
						    />
						    </div>
						</TD>
						<TD>
							<input type="hidden" name="blindId" id="blindId" value="">
						</TD>
			        </TR>
			        
	         </table>
			</AP:FwSubsectionTag> 
			<%} %>
		</TD>
	</TR>
	  
	 <% if(!isSNAPOnlySelected){ %> 
	<TR>
		<TD WIDTH="100%">
			<AP:FwSubsectionTag textID="10223" componentId="421" dataRequired="<%=FwConstants.YES%>" headerLevel="<%=FwConstants.HEADER_LEVEL_H2%>" tagRequired="Y">
				<table width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation">
		        
			        <tr>
				        <TD colspan="16" width="100%">
					        <AP:FwPageLabelTag textID="13233"/>
				        </TD>
				         <TD align="right" WIDTH="10%">
				        	<AP:FwRTGroupTag
								bean="<%=getpostYesNo%>" 
								referenceTableName="TYAN"
								tablecols="2" tagRequired="Y"
								groupType="S" 
								columnId="26" 
								tabtext="13233"
								suffixname="deptAging"
								other="onClick=\"houseHoldOnLoadHideOrShow();setValue(this);clearFieldsonNo();\"" />
						<input type="hidden" name="deptAgingId" id="deptAgingId" value="">	
						</TD>			
								
			        </tr>
			        <tr>			       
			          <TD width="100%" colspan="3">
			          <div id="deptAging" style="display: none;">
			          		&nbsp;
			          	    <div align="left">
  			              	     <AP:FwPageLabelTag textID="131627"/>
				            </div>
				          <AP:AFBIndividualsTag altID="13233"
								collection="<%=people_421 %>" 
							    indivCollection="<%=responseMap_421 %>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_421%>"
							    htmlName="agingServices"
							    valueElements="<%=values%>" 
							    noOneValueforDF="<%=noOneValue_421 %>"
							    tagRequired="Y"
							    hideNoOne="Y"
						    />
						   </div> 
				    	</TD>
				  
			        </tr>
	         </table>
			</AP:FwSubsectionTag> 
		</TD>
	</TR>
<% 
	}
	 %>
	<TR>
		<TD WIDTH="100%">
			<AP:FwSubsectionTag textID="32031" headerLevel="<%=FwConstants.HEADER_LEVEL_H2%>" componentId="41" dataRequired="<%=FwConstants.YES%>" tagRequired="Y">
				<table width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation">
		        
			        <tr>
				        <TD align="left" colspan="16" width="60%">
					        <AP:FwPageLabelTag textID="131645"/>
				        </TD>
				        <TD align="right" WIDTH="10%">
				        	<AP:FwRTGroupTag
								bean="<%=abHouseholdQuestionsOutofStateSNAP%>" 
								referenceTableName="TYAN"
								tablecols="2" tagRequired="Y"
								groupType="S" 
								columnId="26" 
								tabtext="131645"
								other="onClick=\"houseHoldOnLoadHideOrShow();setValue(this);clearFieldsonNo();\"" />
						</TD>
			        </tr>
			        
			       <tr>
			          <TD width="100%" colspan="3">
			          	  <div id="OFSDiv4" style="display: none;">
			          	  &nbsp;
			          	  <div align="left">
  			              	<AP:FwPageLabelTag textID="131627"/>
				          </div>
			              <AP:AFBIndividualsTag altID="131645"
								collection="<%=people_41 %>" 
							    indivCollection="<%=responseMap_41 %>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_41%>"
							    htmlName="otherFoodStamp"
							    valueElements="<%=valueElements%>" 
							    noOneValueforDF="<%=noOneValue_41 %>"
							    tagRequired="Y"
							    hideNoOne="Y"
						    />
						   </div>
				      </TD>
				      <TD>	
				      	<input type="hidden" name="outOfStateId" id="outOfStateId" value="">
				      </TD>
			       </tr>
	         </table>
			</AP:FwSubsectionTag> 
		</TD>
	</TR>	
	<TR>
		<TD WIDTH="100%">
			<AP:FwSubsectionTag textID="10222" componentId="43" dataRequired="<%=FwConstants.YES%>" headerLevel="<%=FwConstants.HEADER_LEVEL_H2%>" tagRequired="Y">
				<AP:FwHoverHelpTag hoverHelpTitle="131617" hoverHelpText="131780" width="medium" var="fosterCareHover" altId="131781"></AP:FwHoverHelpTag>
				<table width="100%" border="0" cellpadding="0" cellspacing="0" role="presentation">
		        
			        <tr>
				        <TD colspan="16" width="100%">
					        <AP:FwPageLabelTag textID="131781"/>
					        ${fosterCareHover}
				        </TD>
				         <TD align="right" WIDTH="10%">
				        	<AP:FwRTGroupTag
								bean="<%=getpostYesNo%>" 
								referenceTableName="TYAN"
								tablecols="2" tagRequired="Y"
								groupType="S" 
								columnId="26" 
								tabtext="131781"
								suffixname="fosterCare"
								other="onClick=\"houseHoldOnLoadHideOrShow();setValue(this);clearFieldsonNo();\"" />
						<input type="hidden" name="fosterCareId" id="fosterCareId" value="">
						</TD>	
												
			        </tr>
			        <tr>			        
			        
			          <TD width="100%" colspan="3">
			          <div id="fosterCare" style="display: none;">
			          		&nbsp;
			          	    <div align="left">
  			              	     <AP:FwPageLabelTag textID="131627"/>
				            </div>
				          <AP:AFBIndividualsTag altID="10220"
								collection="<%=people_43 %>" 
							    indivCollection="<%=responseMap_43 %>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_43%>"
							    htmlName="formerFosterCare"
							    valueElements="<%=values%>" 
							    noOneValueforDF="<%=noOneValue_43 %>"
							    tagRequired="Y"
							    hideNoOne="Y"
							    other="onChange=\"showFFCStateDropdown(this);\""
						    />
						   </div> 
				    	</TD>
			        </tr>
	         </table>
	         
	        <%--  ffcs changes start --%>  
	        <%
	         INDIVIDUAL_Custom_Cargo[] ffcIndvCargoArr;
	         if(people_43 !=null && people_43.size()>0){
				ffcIndvCargoArr = people_43.getResults();
				int counter = 1;
	       	    int size = ffcIndvCargoArr.length;
	       	    int collSize = 0;
	       	 	APP_IN_PRFL_Collection	appInPrflColl;
				appInPrflColl  =  (APP_IN_PRFL_Collection) request.getAttribute("APP_IN_PRFL_Collection");	
				if (appInPrflColl != null && appInPrflColl.size() > 0) {
	       	   		collSize = appInPrflColl.size();
	       	   	}
	       	   for(INDIVIDUAL_Custom_Cargo indvCargo : ffcIndvCargoArr){ 
	       	    	String[]  indvName = {indvCargo.getFst_nam()};
	       	    	String idSuffix = indvCargo.getIndv_seq_num();
	       	    	String selectedFFCStateCd = "00";
	       	    
	       	    	for(int i=0;i<collSize;i++){
	      				APP_IN_PRFL_Cargo appInPrflCargo = (APP_IN_PRFL_Cargo)appInPrflColl.get(i);  
	      				String indvSeqNumAIP = appInPrflCargo.getIndv_seq_num();
	     			 	if(indvCargo.getIndv_seq_num().equals(indvSeqNumAIP)){
	     			 			selectedFFCStateCd = appInPrflCargo.getFormer_foster_state_cd();
	     			 			break;
	     			 	}
	     			 }	
	       	    %> 
				
				<div class="formerFCIndvStateDiv" id=formerFCIndvStateDiv_<%=Encode.forHtml(idSuffix)%> style="display:none;">
			    	<TABLE border="0" ID="ffcQuestionTable_<%=Encode.forHtml(idSuffix)%>">	
			    	  <TR>
			        	<TD colspan="16" width="70%">
			        	  	<AP:FwPageLabelTag bean="<%=frmrStateCode%>" textID="180017031" tagRequired="Y" substitute="<%=indvName%>" />
				        </TD>
				        <TD width="30%">
				               	<AP:FwRTSelectTag bean="<%=frmrStateCode%>" referenceTableName="FFCS" selected = "<%=selectedFFCStateCd %>"
											  columnId="333450" suffixname="<%=idSuffix%>" tagRequired="Y" 
											  tagValueName="180017031" substitute="<%=indvName%>"/>
							  				  
						</TD>
				     </TR>
			   	 </TABLE>
			 </div>
			 
			 <%   counter++; 
			 	} //for loop for fc indv end here
			   } //	people_43 null check ends
			 %>
			 <%--  ffcs changes end --%>  
			</AP:FwSubsectionTag> 
		</TD>
	</TR>
	
	 <% if(!isSNAPOnlySelected){ %>
	<TR>
		<TD WIDTH="100%">
			<AP:FwSubsectionTag textID="32107" headerLevel="<%=FwConstants.HEADER_LEVEL_H2%>" componentId="58" dataRequired="<%=FwConstants.YES%>" tagRequired="Y">
				<table width="100%" border="0" cellpadding="0" cellspacing="0">
		        
			        <TR>
				        <TD colspan="16" width="60%">
					        <AP:FwPageLabelTag textID="131641"/>
					        <AP:FwHoverHelpTag hoverHelpTitle="131642" hoverHelpText="131646" altId="131641" />
				        </TD>
				        <TD align="right" WIDTH="10%">
				        	<AP:FwRTGroupTag
								bean="<%=abHouseholdQuestionsDrugFelonies%>" 
								referenceTableName="TYAN" tagRequired="Y"
								tablecols="2" 
								groupType="S" 
								columnId="26" 
								tabtext="131641"
								other="onClick=\"houseHoldOnLoadHideOrShow();setValue(this);clearFieldsonNo();\"" />
								
								<input type="hidden" name="felonyId" id="felonyId" value="">
						</TD>
			        </TR>
			       <TR>
			       		<TD width="100%" colspan="3">
				       		<div id="DFDiv1" style="display: none;">
				       		&nbsp;
			           		<div align="left">
  			              		<AP:FwPageLabelTag textID="131627"/>
				        	</div>
				          <AP:AFBIndividualsTag altID="131641"
								collection="<%=people_58%>" 
							    indivCollection="<%=responseMap_58%>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_58%>"
							    htmlName="drugFelonies"
							    valueElements="<%=valueElements%>" 
							    noOneValueforDF="<%=noOneValue_58%>"
							    tagRequired="Y"
							    hideNoOne="Y"
						    />
						    </div>
				    	</TD>	
			        </TR>
			        <%-- Added for ILIES-129516 - Starts --%>
			        <TR>
			        	<TD colspan="16" width="60%">
			        		<div id="DTPQuesDiv1" style="display: none;">
			        		&nbsp;
			        	  	<AP:FwPageLabelTag textID="131643" tagRequired="Y"/>
			        	  	</div>
				        </TD>
				        <TD align="right" WIDTH="10%">
				        	<div id="DTPQuesDiv2" style="display: none;">
				        		<AP:FwRTGroupTag
								bean="<%=abHouseholdQuestionsDrugTrtment%>" 
								referenceTableName="TYAN"
								tablecols="2" tagRequired="Y"
								groupType="S" 
								columnId="26" 
								tabtext="131643"
								other="onClick=\"houseHoldOnLoadHideOrShow();setValue(this);clearFieldsonNo();\"" />
							</div>
							<input type="hidden" name="drugId" id="drugId" value=""/>
						</TD>
				     </TR>
			         <TR>
			           <TD width="100%" colspan="3">
				       		<div id="DTPRespDiv2" style="display: none;">
				       		&nbsp;
			          	    <div align="left">
  			              	     <AP:FwPageLabelTag textID="131627"/>
				            </div>
				          <AP:AFBIndividualsTag altID="131643"
								collection="<%=people_5218%>" 
							    indivCollection="<%=responseMap_5218%>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_5218%>"
							    htmlName="drugTrtmntPrg"
							    valueElements="<%=valueElements%>" 
							    noOneValueforDF="<%=noOneValue_5218%>"
							    tagRequired="Y"
							    hideNoOne="Y"
						    />
						    </div>
				    	</TD>
			        </TR>
		<%-- Commented Begin -  By santhi thanneeru- Update gatepost questions and readability #164562
			        <TR>
				        <TD colspan="16" width="100%">
					        <AP:FwPageLabelTag textID="98767"/>
				        </TD>
			        </TR>
			        <TR>
				       <TD width="100%" colspan="3">
				          <AP:AFBIndividualsTag altID="98767"
								collection="<%=people_5219%>" 
							    indivCollection="<%=responseMap_5219%>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_5219%>"
							    htmlName="paroleProbViol"
							    valueElements="<%=valueElements%>" 
							    noOneValueforDF="<%=noOneValue_5219%>"
							    tagRequired="Y"
						    />
				    	</TD>	
			        </TR>
			 Commenting Ends --%>
			 
	        <%-- Added for ILIES-129516 - Ends --%> 
	         </table>
			</AP:FwSubsectionTag> 
		</TD>
	</TR>
	<% 
	}
	 %>
	 <TR>
		<TD WIDTH="100%">
			<AP:FwSubsectionTag textID="80345" componentId="418" headerLevel="<%=FwConstants.HEADER_LEVEL_H2%>" dataRequired="<%=FwConstants.YES%>">
				<table width="100%" border="0" cellpadding="0" cellspacing="0">
		        
			        <tr>
				        <TD colspan="16" width="100%">
					        <AP:FwPageLabelTag textID="80346"/>
				        </TD>
			        </tr>
			       <tr>
			          <TD width="100%" colspan="3">
				          <AP:AFBIndividualsTag altID="80346"
								collection="<%=people_418%>" 
							    indivCollection="<%=responseMap_418 %>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_418%>"
							    htmlName="ssiBenefits"
							    valueElements="<%=valueElements%>" 
							    noOneValueforDF="<%=noOneValue_418 %>"
							    tagRequired="Y"
						    />
				    	</TD>	
			        </tr>
	         </table>
			</AP:FwSubsectionTag> 
		</TD>
	</TR>
	<TR>
		<TD WIDTH="100%">
			<AP:FwSubsectionTag textID="80347"headerLevel="<%=FwConstants.HEADER_LEVEL_H2%>" componentId="419" dataRequired="<%=FwConstants.YES%>">
				<table width="100%" border="0" cellpadding="0" cellspacing="0" >
		        
			        <tr>
				        <TD colspan="16" width="100%">
					        <AP:FwPageLabelTag textID="80348"/>
				        </TD>
			        </tr>
			       <tr>
			          <TD width="100%" colspan="3">
				         <AP:AFBIndividualsTag altID="80348"
								collection="<%=people_419%>" 
							    indivCollection="<%=responseMap_419%>"  
							    selectOption="M"   
							    formType="DF"
							    noOneSelected="<%=noOneChecked_419%>"
							    htmlName="cashBenefits"
							    valueElements="<%=valueElements%>" 
							    noOneValueforDF="<%=noOneValue_419 %>"
							    tagRequired="Y"
						    />
				    	</TD>	
			        </tr>
	         </table>
			</AP:FwSubsectionTag> 
		</TD>
	</TR>
	</TABLE>
	<TABLE WIDTH="100%" BORDER=0 CELLPADDING=0 CELLSPACING=0  role="presentation">
		<TR>
			<td align="right">
				<AP:FwButtonCSSTag	
					button="<%=AppConstants.BUTTON_BACK2%>" 
					pageAction="ABHHQPrevious" 
					name="Back" 
					langButton="true" 
					
					/>
				<AP:FwButtonCSSTag
					button="<%=AppConstants.BUTTON_SAVE_EXIT%>"
					pageAction="ABHHQSave" 
					name="SaveAndExit" 
					langButton="true" 
					
					/>
					<AP:FwButtonCSSTag
					button="<%=AppConstants.BUTTON_NEXT1%>" 
					pageAction="ABHHQNext" 
					name="Next" 
					langButton="true" 
					styleClass="button-col-dark"
					/>
			</td>
		</TR>
	</TABLE>

<script language="javascript">

var household_rel=<%=request.getAttribute("DISPLAY_MAP")%>;
var household_invRel=<%=request.getAttribute("INVERSE_MAP")%>;

		
	function hideOrShowFunction(e, div) {
		if (e.value === 'Y') {
			document.getElementById(div).style.display = 'block';
		} else {
			document.getElementById(div).style.display = 'none';
		}
	}
	
	function setValue(x){
		if(document.getElementById("felonyId")!=null){
			if(x.id == 'abHouseholdQuestionsDrugFelonies_Y'){
				document.getElementById("felonyId").value= x.value;
			}else if(x.id == 'abHouseholdQuestionsDrugFelonies_N'){
				document.getElementById("felonyId").value= "N";
			}
			if(x.id == 'abHouseholdQuestionsDrugTrtment_Y'){
				document.getElementById("drugId").value= x.value;
			}else if(x.id == 'abHouseholdQuestionsDrugTrtment_N'){
				document.getElementById("drugId").value= "N";
			}
		}
		if(document.getElementById("blindId")!=null){
			if(x.id == 'abHouseholdQuestionsBlndDisbl_Y'){
				document.getElementById("blindId").value= x.value;
			}else if(x.id == 'abHouseholdQuestionsBlndDisbl_N'){
				document.getElementById("blindId").value= "N";
			}else if(x.id == 'abHouseholdQuestionsBlndDisbl_K'){
				document.getElementById("blindId").value= "K";
			}
		}
		if(document.getElementById("outOfStateId")!=null){
			if(x.id == 'abHouseholdQuestionsOutofStateSNAP_Y'){
				document.getElementById("outOfStateId").value= x.value;
			}else if(x.id == 'abHouseholdQuestionsOutofStateSNAP_N'){
				document.getElementById("outOfStateId").value= "N";
			}
		}
		if(document.getElementById("deptAgingId")!=null){
			if(x.id == 'getpostYesNo_deptAging_Y'){
				document.getElementById("deptAgingId").value= x.value;
			}else if(x.id == 'getpostYesNo_deptAging_N'){
				document.getElementById("deptAgingId").value= "N";
			}
		}
		if(document.getElementById("fosterCareId")!=null){
			if(x.id == 'getpostYesNo_fosterCare_Y'){
				document.getElementById("fosterCareId").value= x.value;
			}else if(x.id == 'getpostYesNo_fosterCare_N'){
				document.getElementById("fosterCareId").value= "N";
			}
		}				
	}

	function houseHoldOnLoadHideOrShow(){
	
		if(document.getElementById("felonyId")!=null){
			document.getElementById("felonyId").value= "<%=request.getAttribute("FELONY_ID")%>";
		}
		if(document.getElementById("drugId")!=null){
			document.getElementById("drugId").value= "<%=request.getAttribute("DRUG_ID")%>";
		}
		if(document.getElementById("blindId")!=null){
			document.getElementById("blindId").value= "<%=request.getAttribute("BLIND_ID")%>";
		}
		if(document.getElementById("outOfStateId")!=null){
			document.getElementById("outOfStateId").value= "<%=request.getAttribute("OUT_OF_STATE_ID")%>";
		}
		if(document.getElementById("deptAging")!=null){
			document.getElementById("deptAging").value= "<%=request.getAttribute("DEPT_AGING")%>";
		}
		if(document.getElementById("fosterCare")!=null){
			document.getElementById("fosterCare").value= "<%=request.getAttribute("FOSTER_CARE")%>";
		}
	
		if(document.getElementById('abHouseholdQuestionsDrugFelonies_Y')!=null){
			if(document.getElementById('abHouseholdQuestionsDrugTrtment_Y').checked){
				document.getElementById("DTPRespDiv2").style.display = 'block';
				document.getElementById("drugId").value="Y";
			}else if(document.getElementById('abHouseholdQuestionsDrugTrtment_N').checked){
				document.getElementById("DTPRespDiv2").style.display = 'none';
				//document.getElementById('abHouseholdQuestionsDrugTrtment_N').checked = 'true';
				document.getElementById("drugId").value="N";
			}
			if(document.getElementById('abHouseholdQuestionsDrugFelonies_Y').checked){
				document.getElementById("DFDiv1").style.display = 'block';
				document.getElementById("DTPQuesDiv1").style.display = 'block';
				document.getElementById("DTPQuesDiv2").style.display = 'block';
				document.getElementById("felonyId").value="Y";
			}else if(document.getElementById('abHouseholdQuestionsDrugFelonies_N').checked){
				document.getElementById("DFDiv1").style.display = 'none';
				document.getElementById("DTPQuesDiv1").style.display = 'none';
				document.getElementById("DTPQuesDiv2").style.display = 'none';
				document.getElementById("DTPRespDiv2").style.display = 'none';
				//document.getElementById('abHouseholdQuestionsDrugFelonies_N').checked = 'true';
				document.getElementById("felonyId").value="N";
			}
		}
		if(document.getElementById('abHouseholdQuestionsBlndDisbl_Y')!=null){
			if(document.getElementById('abHouseholdQuestionsBlndDisbl_Y').checked){
				document.getElementById("BDDiv3").style.display = 'block';
				document.getElementById("blindId").value="Y";
			}else if(document.getElementById('abHouseholdQuestionsBlndDisbl_N').checked){
				document.getElementById("BDDiv3").style.display = 'none';
				//document.getElementById('abHouseholdQuestionsBlndDisbl_N').checked = 'true';
				document.getElementById("blindId").value="N";
			}else if(document.getElementById('abHouseholdQuestionsBlndDisbl_K').checked){
				document.getElementById("BDDiv3").style.display = 'none';
				document.getElementById("blindId").value="K";
				var disabilityPeople = $('[id^="blindDisabled_"]');
				for(var i = 0; i < disabilityPeople.length; i++){
					disabilityPeople[i].checked = false;
				}
			}
		}
		if(document.getElementById('abHouseholdQuestionsOutofStateSNAP_Y')!=null){
			if(document.getElementById('abHouseholdQuestionsOutofStateSNAP_Y').checked){
				document.getElementById("OFSDiv4").style.display = 'block';
				document.getElementById("outOfStateId").value="Y";
			}else if(document.getElementById('abHouseholdQuestionsOutofStateSNAP_N').checked){
				document.getElementById("OFSDiv4").style.display = 'none';
				//document.getElementById('abHouseholdQuestionsOutofStateSNAP_N').checked = 'true';
				document.getElementById("outOfStateId").value="N";
			}
		}
		if(document.getElementById('getpostYesNo_deptAging_Y')!=null){
			if(document.getElementById('getpostYesNo_deptAging_Y').checked){
				document.getElementById("deptAging").style.display = 'block';
				document.getElementById("deptAging").value="Y";
			}else if(document.getElementById('getpostYesNo_deptAging_N').checked){
				document.getElementById("deptAging").style.display = 'none';	
				document.getElementById("deptAging").value="N";
			}
		}
		if(document.getElementById('getpostYesNo_fosterCare_Y')!=null){
			if(document.getElementById('getpostYesNo_fosterCare_Y').checked){
				document.getElementById("fosterCare").style.display = 'block';
				document.getElementById("fosterCare").value="Y";
				showFFCStateDropdownOnLoad();
				
			}else if(document.getElementById('getpostYesNo_fosterCare_N').checked){
				document.getElementById("fosterCare").style.display = 'none';				
				document.getElementById("fosterCare").value="N";
				
				var ffcsDivs = document.getElementsByClassName('formerFCIndvStateDiv');
				for(var i = 0; i < ffcsDivs.length; i++){
						ffcsDivs[i].style.display='none';
				}
			}
		}
	}
	
	window.onload = function(){
		houseHoldOnLoadHideOrShow();
		taxDependentChangeOnLoad();
		individualRelationshipOnLoad();		
		showFFCStateDropdownOnLoad();	
		restoreTaxValuesOnLoad();  	
		triggerTaxChangeEvents();
		
	};
	
	function clearFieldsonNo(){
		<%if(people_5218!=null && people_5218.size()>0){%>
			if(document.getElementById("abHouseholdQuestionsDrugTrtment_N")!= null && 
				document.getElementById("abHouseholdQuestionsDrugTrtment_N").checked == true){
				<%for(int i=0;i<people_5218.size() ;i++){
					String indvSeqNum = people_5218.getResult(i).getIndv_seq_num();%>
					document.getElementById("drugTrtmntPrg_<%=Encode.forHtml(indvSeqNum)%>").checked=false;
				<%}%>
			}
		<%}%>
		<%if(people_421!=null && people_421.size()>0){%>
			if(document.getElementById('getpostYesNo_deptAging_N') != null &&
				document.getElementById('getpostYesNo_deptAging_N').checked == true){
				<%for(int i=0;i<people_421.size() ;i++){
					String indvSeqNum = people_421.getResult(i).getIndv_seq_num();%>
					document.getElementById("agingServices_<%=Encode.forHtml(indvSeqNum)%>").checked=false;
				<%}%>
			}
		<%}%>
		<%if(people_43!=null && people_43.size()>0){%>
			if(document.getElementById('getpostYesNo_fosterCare_N') != null &&
				document.getElementById('getpostYesNo_fosterCare_N').checked == true){
				<%for(int i=0;i<people_43.size() ;i++){
					String indvSeqNum = people_43.getResult(i).getIndv_seq_num();%>
					document.getElementById("formerFosterCare_<%=Encode.forHtml(indvSeqNum)%>").checked=false;
					if(document.getElementById("frmrStateCode_<%=Encode.forHtml(indvSeqNum)%>" ) != null ){
						document.getElementById("frmrStateCode_<%=Encode.forHtml(indvSeqNum)%>").value = "00";
					}
					
				<%}%>
			}
		<%}%>		
		
		
		<%if(people_58!=null && people_58.size()>0){%>
			if(document.getElementById("abHouseholdQuestionsDrugFelonies_N") != null && 
				document.getElementById("abHouseholdQuestionsDrugFelonies_N").checked == true){
				<%for(int i=0;i<people_58.size() ;i++){
					String indvSeqNum = people_58.getResult(i).getIndv_seq_num();%>
					document.getElementById("drugFelonies_<%=Encode.forHtml(indvSeqNum)%>").checked=false;
				<%}%>
				<%if(people_5218!=null && people_5218.size()>0){%>
					if(document.getElementById("abHouseholdQuestionsDrugTrtment_Y") != null &&
						document.getElementById("abHouseholdQuestionsDrugTrtment_Y").checked == true){
						<%for(int i=0;i<people_5218.size() ;i++){
							String indvSeqNum = people_5218.getResult(i).getIndv_seq_num();%>
							document.getElementById("drugTrtmntPrg_<%=Encode.forHtml(indvSeqNum)%>").checked=false;
						<%}%>
						document.getElementById("abHouseholdQuestionsDrugTrtment_Y").checked ="";
						document.getElementById("drugId").value="";
					}else if(document.getElementById("abHouseholdQuestionsDrugTrtment_N") != null){
						if(document.getElementById("abHouseholdQuestionsDrugTrtment_N").checked == true){
							document.getElementById("abHouseholdQuestionsDrugTrtment_N").checked ="";
							document.getElementById("drugId").value="N";
						}					
					}
				<%}%>
			}
		<%}%>
		
		<%if(people_56!=null && people_56.size()>0){%>
		if(document.getElementById("abHouseholdQuestionsBlndDisbl_N") != null &&
			document.getElementById("abHouseholdQuestionsBlndDisbl_N").checked == true){
			<%for(int i=0;i<people_56.size() ;i++){
				String indvSeqNum = people_56.getResult(i).getIndv_seq_num();%>
				document.getElementById("blindDisabled_<%=indvSeqNum%>").checked=false;
			<%}%>
			}
		<%}%>
		<%if(people_41!=null && people_41.size()>0){%>
		if(document.getElementById("abHouseholdQuestionsOutofStateSNAP_N") != null && 
			document.getElementById("abHouseholdQuestionsOutofStateSNAP_N").checked == true){
			<%for(int i=0;i<people_41.size() ;i++){
				String indvSeqNum = people_41.getResult(i).getIndv_seq_num();%>
				document.getElementById("otherFoodStamp_<%=Encode.forHtml(indvSeqNum)%>").checked=false;
			<%}%>
			}
		<%}%>
	}
	
	
	<%
	if(responseMap_58!=null && !responseMap_58.isEmpty()){
		 Iterator iterator = responseMap_58.entrySet().iterator();
			 while (iterator.hasNext()) {
			 	Map.Entry mapEntry = (Map.Entry) iterator.next();
			 	String value = (String) mapEntry.getValue();
			 	if(value!=null && value.equals("R")){%>
			 	   if(document.getElementById('abHouseholdQuestionsDrugFelonies_Y')!=null)
			 	   {
			 		document.getElementById('abHouseholdQuestionsDrugFelonies_Y').checked = 'true';
			 		}
			 	<%}else if ((value != null && value.equals("N") || hpeApp)){ %>
			 	   if(document.getElementById('abHouseholdQuestionsDrugFelonies_N')!=null)
			 	   {
			 			document.getElementById('abHouseholdQuestionsDrugFelonies_N').checked = true;
			 		}
			 		<%}
			 	}
		}
	if(responseMap_5218!=null && !responseMap_5218.isEmpty()){
		 Iterator iterator = responseMap_5218.entrySet().iterator();
			 while (iterator.hasNext()) {
			 	Map.Entry mapEntry = (Map.Entry) iterator.next();
			 	String value = (String) mapEntry.getValue();
			 	if(value!=null && value.equals("R")){%>
			 	if(document.getElementById('abHouseholdQuestionsDrugTrtment_Y')!=null)
			 	{
			 		document.getElementById('abHouseholdQuestionsDrugTrtment_Y').checked = 'true';
			 		}
			 	<%} else if ((value != null && value.equals("N") || hpeApp)){ %>
			 		if(document.getElementById('abHouseholdQuestionsDrugTrtment_N')!=null)
			 	{
			 		document.getElementById('abHouseholdQuestionsDrugTrtment_N').checked = true;
			 		}
			 	<%}
			 }
		}
	if(responseMap_56!=null && !responseMap_56.isEmpty()){
		 Iterator iterator = responseMap_56.entrySet().iterator();
		 boolean isDisabilityComplete = false;
		 boolean isDisabilityYes = false;
		 boolean isDisabilityNo = false;
		 boolean isDisabilityPNTA = false;
			 while (iterator.hasNext()) {
			 	Map.Entry mapEntry = (Map.Entry) iterator.next();
			 	String value = (String) mapEntry.getValue();
			 	if(value!=null ) {
			 		if("C".equals(value)){ 
			 			isDisabilityComplete = true;
			 		}else if ("R".equals(value) || AppConstants.YES.equals(value) || "V".equals(value)){
			 			isDisabilityYes = true;
			 	 	}else if("N".equals(value)) { 
			 	 		isDisabilityNo = true;
			 		}else if("K".equals(value) || hpeApp){ 
			 			isDisabilityPNTA = true;
			 		}else{
			 			//do nothing
			 		}
			 }
		}
		if(isDisabilityComplete){%>
		 	document.getElementById('abHouseholdQuestionsBlndDisbl_Y').checked = true;
	 		document.getElementById("abHouseholdQuestionsBlndDisbl_N").disabled = true;
	 		document.getElementById("abHouseholdQuestionsBlndDisbl_K").disabled = true;
		 <%}else if(isDisabilityYes){%>
		 	document.getElementById('abHouseholdQuestionsBlndDisbl_Y').checked = true;
	 		document.getElementById("abHouseholdQuestionsBlndDisbl_N").disabled = false;
	 		document.getElementById("abHouseholdQuestionsBlndDisbl_K").disabled = false;
		 <%}else if(isDisabilityNo){%>
		 	document.getElementById('abHouseholdQuestionsBlndDisbl_N').checked = true;
		 <%}else{
		 	 if(isDisabilityPNTA){%>
		 		document.getElementById('abHouseholdQuestionsBlndDisbl_K').checked = true;
		 <%}
		}
	}
	if(responseMap_41!=null && !responseMap_41.isEmpty()){
	 Iterator iterator = responseMap_41.entrySet().iterator();
		 while (iterator.hasNext()) {
		 	Map.Entry mapEntry = (Map.Entry) iterator.next();
		 	String value = (String) mapEntry.getValue();
		 	if(value !=null && value.equals("R")){%>
		 	   if(document.getElementById('abHouseholdQuestionsOutofStateSNAP_Y')!=null)
			 	{
		 		document.getElementById('abHouseholdQuestionsOutofStateSNAP_Y').checked = 'true';
		 		}
		 	<%}else if((value != null && value.equals("N") || hpeApp)){ %>
		 	    if(document.getElementById('abHouseholdQuestionsOutofStateSNAP_N')!=null)
			 	{
			 			document.getElementById('abHouseholdQuestionsOutofStateSNAP_N').checked = true;
			 	 }
			 		<%}
			 	}
		}
	
	if(responseMap_421!=null && !responseMap_421.isEmpty()){
		 Iterator iterator = responseMap_421.entrySet().iterator();
			 while (iterator.hasNext()) {
			 	Map.Entry mapEntry = (Map.Entry) iterator.next();
			 	String value = (String) mapEntry.getValue();
			 	if(value!=null ) {
			 		if(value.equals("C")) {%>
				 		document.getElementById('getpostYesNo_deptAging_Y').checked = 'true';
				 		document.getElementById('getpostYesNo_deptAging_N').disabled = true;
			 		<%}else if((value != null && value.equals("N") || hpeApp)){ %>
			 			if(document.getElementById('getpostYesNo_deptAging_N')!=null){
			 				document.getElementById('getpostYesNo_deptAging_N').checked = true;
			 				}
			 			
			 		<%}
			 	 	if(mapEntry.getValue().equals("R")){%>
			 	 		document.getElementById('getpostYesNo_deptAging_Y').checked = 'true';
			 	 	<%}
			 	 }
			 }
		}
		
		if(responseMap_43!=null && !responseMap_43.isEmpty()){
		 Iterator iterator = responseMap_43.entrySet().iterator();
			 while (iterator.hasNext()) {
			 	Map.Entry mapEntry = (Map.Entry) iterator.next();
			 	if(mapEntry.getValue()!=null ) {
			 		String value = (String) mapEntry.getValue();
			 		if(value.equals("C")) {%>
				 		document.getElementById('getpostYesNo_fosterCare_Y').checked = 'true';
				 		document.getElementById('getpostYesNo_fosterCare_N').disabled = true;
			 		<%}else if((value != null && value.equals("N") || hpeApp)) { %>
			 			document.getElementById('getpostYesNo_fosterCare_N').checked = true;
			 		<%}
			 	 	if(mapEntry.getValue().equals("R")){%>
			 	 		document.getElementById('getpostYesNo_fosterCare_Y').checked = 'true';
			 	 	<%
			 	 	break;
			 	 	}
			 	 }
			 }
		}
			
	%>
	
	<%if(noOneChecked_5218!=null && "Y".equals(noOneChecked_5218)){ %>
		if(document.getElementById('abHouseholdQuestionsDrugTrtment_N') != null){
			document.getElementById('abHouseholdQuestionsDrugTrtment_N').checked = 'true';
		}
		
	<%}%>
	
	<%if(noOneChecked_58!=null && "Y".equals(noOneChecked_58)){ %>
		if(document.getElementById('abHouseholdQuestionsDrugFelonies_N') != null ){
			document.getElementById('abHouseholdQuestionsDrugFelonies_N').checked = 'true';
		}
		if(document.getElementById('abHouseholdQuestionsDrugTrtment_N') != null){
			document.getElementById('abHouseholdQuestionsDrugTrtment_N').checked = "";
		}				
	<%}%>
	
	<%if(noOneChecked_41!=null && "Y".equals(noOneChecked_41)){ %>
		if(document.getElementById('abHouseholdQuestionsOutofStateSNAP_N') != null){
			document.getElementById('abHouseholdQuestionsOutofStateSNAP_N').checked = 'true';
		}
	<%}
	if(noOneChecked_421!=null && "Y".equals(noOneChecked_421)){ %>
		if(document.getElementById('getpostYesNo_deptAging_N') != null){
			document.getElementById('getpostYesNo_deptAging_N').checked = 'true';
		}
		
	<%}
	if(noOneChecked_43!=null && "Y".equals(noOneChecked_43)){ %>
		if(document.getElementById('getpostYesNo_fosterCare_N') != null){
			document.getElementById('getpostYesNo_fosterCare_N').checked = 'true';
		}		
	<%}%>
	
	<% if(request.getAttribute("DRUG_ID")!=null && FwConstants.YES.equalsIgnoreCase((String)request.getAttribute("DRUG_ID"))){%>
		 if(document.getElementById('abHouseholdQuestionsDrugTrtment_Y') != null){
		document.getElementById('abHouseholdQuestionsDrugTrtment_Y').checked = 'true';
		}
	<%}else if(request.getAttribute("DRUG_ID")!=null && FwConstants.NO.equalsIgnoreCase((String)request.getAttribute("DRUG_ID"))){%>
		 if(document.getElementById('abHouseholdQuestionsDrugTrtment_N') != null){
		document.getElementById('abHouseholdQuestionsDrugTrtment_N').checked = 'true';
		}
	<%}
	
	if(request.getAttribute("FELONY_ID")!=null && FwConstants.YES.equalsIgnoreCase((String)request.getAttribute("FELONY_ID"))){%>
	 if(document.getElementById('abHouseholdQuestionsDrugFelonies_Y') != null){
		document.getElementById('abHouseholdQuestionsDrugFelonies_Y').checked = 'true';
	  }
	<%}else if(request.getAttribute("FELONY_ID")!=null && FwConstants.NO.equalsIgnoreCase((String)request.getAttribute("FELONY_ID"))){%>
	      if(document.getElementById('abHouseholdQuestionsDrugFelonies_N') != null){
		  document.getElementById('abHouseholdQuestionsDrugFelonies_N').checked = 'true';
		  document.getElementById('abHouseholdQuestionsDrugTrtment_N').checked = "";
		}
	<%}
		
	if(request.getAttribute("BLIND_ID")!=null && FwConstants.YES.equalsIgnoreCase((String)request.getAttribute("BLIND_ID"))){%>
		document.getElementById('abHouseholdQuestionsBlndDisbl_Y').checked = 'true';
		<%}else if(request.getAttribute("BLIND_ID")!=null && FwConstants.NO.equalsIgnoreCase((String)request.getAttribute("BLIND_ID"))){%>
		document.getElementById('abHouseholdQuestionsBlndDisbl_N').checked = 'true';
		<%}else if(request.getAttribute("BLIND_ID")!=null && FwConstants.PNTA.equalsIgnoreCase((String)request.getAttribute("BLIND_ID"))){%>
		document.getElementById('abHouseholdQuestionsBlndDisbl_K').checked = 'true';
		<%}
	
	if(request.getAttribute("OUT_OF_STATE_ID")!=null && FwConstants.YES.equalsIgnoreCase((String)request.getAttribute("OUT_OF_STATE_ID"))){%>
	   if(document.getElementById('abHouseholdQuestionsOutofStateSNAP_Y') != null){
		document.getElementById('abHouseholdQuestionsOutofStateSNAP_Y').checked = 'true';
		}
	<%}else if(request.getAttribute("OUT_OF_STATE_ID")!=null && FwConstants.NO.equalsIgnoreCase((String)request.getAttribute("OUT_OF_STATE_ID"))){%>
	   if(document.getElementById('abHouseholdQuestionsOutofStateSNAP_N') != null){
		document.getElementById('abHouseholdQuestionsOutofStateSNAP_N').checked = 'true';
		}
	<%}
	
	if(request.getAttribute("DEPT_AGING")!=null && FwConstants.YES.equalsIgnoreCase((String)request.getAttribute("DEPT_AGING"))){%>
		document.getElementById('getpostYesNo_deptAging_Y').checked = 'true';
	<%}else if(request.getAttribute("DEPT_AGING")!=null && FwConstants.NO.equalsIgnoreCase((String)request.getAttribute("DEPT_AGING"))){%>
		document.getElementById('getpostYesNo_deptAging_N').checked = 'true';
	<%}
	
	if(request.getAttribute("FOSTER_CARE")!=null && FwConstants.YES.equalsIgnoreCase((String)request.getAttribute("FOSTER_CARE"))){%>
		document.getElementById('getpostYesNo_fosterCare_Y').checked = 'true';
	<%}else if(request.getAttribute("FOSTER_CARE")!=null && FwConstants.NO.equalsIgnoreCase((String)request.getAttribute("FOSTER_CARE"))){%>
		document.getElementById('getpostYesNo_fosterCare_N').checked = 'true';
	<%}%>
	
	<%if(allAppIndvsTax != null && allAppIndvsTax.size() > 0) {%>
    // Reset all tax dependent dropdowns and relationships
    <%for(int i = 0; i < allAppIndvsTax.size(); i++) {
        INDIVIDUAL_Custom_Cargo indvCargo = (INDIVIDUAL_Custom_Cargo) allAppIndvsTax.get(i);
        String indvSeqNum = indvCargo.getIndv_seq_num();%>
        var taxDepElement_<%=indvSeqNum%> = document.getElementById("taxDependent_<%=Encode.forHtml(indvSeqNum)%>");
        var firstNameElement_<%=indvSeqNum%> = document.getElementById("firstName_<%=Encode.forHtml(indvSeqNum)%>");
        var relationElement_<%=indvSeqNum%> = document.getElementById("relation_<%=Encode.forHtml(indvSeqNum)%>");
        
        if(taxDepElement_<%=indvSeqNum%> != null && (taxDepElement_<%=indvSeqNum%>.value === "N" || taxDepElement_<%=indvSeqNum%>.value === "")) {
            if(firstNameElement_<%=indvSeqNum%> != null) {
                firstNameElement_<%=indvSeqNum%>.value = "0";
            }
            if(relationElement_<%=indvSeqNum%> != null) {
                relationElement_<%=indvSeqNum%>.value = "";
            }
        }
        
        // Reset jointly filing dropdowns
        var jointlyFiledElement_<%=indvSeqNum%> = document.getElementById("taxJointlyFiled_<%=Encode.forHtml(indvSeqNum)%>");
        if(jointlyFiledElement_<%=indvSeqNum%> != null) {
            // Find if there are any main section questions set to No that should reset this
            if(document.getElementById("abHouseholdQuestionsBlndDisbl_N") != null && 
               document.getElementById("abHouseholdQuestionsBlndDisbl_N").checked) {
                jointlyFiledElement_<%=indvSeqNum%>.value = "";
            }
        }
    <%}%>
<%}%>
	
	
	
	function taxDependentChange(e) {
    var value = e.options[e.selectedIndex].value;
    var indvSeqNum = e.id.toString().split("_")[1];
    var taxRel = "taxRelationBlock" + indvSeqNum;
    var firstNameElement = document.getElementById("firstName_" + indvSeqNum);
    var relationElement = document.getElementById("relation_" + indvSeqNum);
    
    if (value == "Y") {
        document.getElementById(taxRel).style.display = "block";
    } else {
        document.getElementById(taxRel).style.display = "none";
        
        // RESET VALUES when hiding the section
        if(firstNameElement != null) {
            firstNameElement.value = "0"; // Reset to default "Select" option
        }
        if(relationElement != null) {
            relationElement.value = ""; // Clear the relationship field
        }
    }
}

	
function jointlyFilingChange(e, indvNum){
    var value = e.options[e.selectedIndex].value;
    if (indvNum != undefined) {
        var jointlyFiledTargetIndv = document.getElementById("taxJointlyFiled_" + indvNum);
        if(jointlyFiledTargetIndv != undefined){
            // If either spouse selects "No" or empty, both should be reset
            if(value === "" || value === "0") {
                jointlyFiledTargetIndv.value = "";
                e.value = ""; // Also reset the current element
            } else if(value === "Y") {
                jointlyFiledTargetIndv.value = "Y";
            } else {
                jointlyFiledTargetIndv.value = value;
            }
        }
    } 
}

function resetDependentSections() {
    // Reset tax dependent related fields
    var allTaxDependentElements = document.querySelectorAll('[id^="taxDependent_"]');
    for(var i = 0; i < allTaxDependentElements.length; i++) {
        var element = allTaxDependentElements[i];
        if(element.value === "N" || element.value === "" || element.value === "0") {
            var indvSeqNum = element.id.split("_")[1];
            var firstNameElement = document.getElementById("firstName_" + indvSeqNum);
            var relationElement = document.getElementById("relation_" + indvSeqNum);
            
            if(firstNameElement != null) {
                firstNameElement.value = "0";
            }
            if(relationElement != null) {
                relationElement.value = "";
            }
        }
    }
}

	
	function getIndividualRelationship(e){
	
		var other_indv_seq = e.options[e.selectedIndex].value;
		var indv_seq=e.id.toString().split("_")[1];
		var ele=document.getElementById("relation_"+indv_seq);
		var relationship = household_rel[indv_seq+other_indv_seq];		
		
		if (relationship == undefined){
				relationship = household_invRel[indv_seq+other_indv_seq];
		}
		if(ele!=undefined){
			if(relationship!=undefined){
				ele.setAttribute("value",relationship);
			}else{
			ele.setAttribute("value","");
		}
		}
	}
	
	function restoreTaxValuesOnLoad(){
    <%
    // Get preserved values from request
    Map preservedTaxDependent = (Map) request.getAttribute("PRESERVED_TAX_DEPENDENT");
    Map preservedTaxRelation = (Map) request.getAttribute("PRESERVED_TAX_RELATION");
    Map preservedTaxJointly = (Map) request.getAttribute("PRESERVED_TAX_JOINTLY");
    Map preservedFilesTax = (Map) request.getAttribute("PRESERVED_FILES_TAX");
    
    // Restore file taxes values
    if(APP_INDV_Collection != null && APP_INDV_Collection.size() > 0) {
        for(int i = 0; i < APP_INDV_Collection.size(); i++) {
            APP_INDV_Cargo cargo = APP_INDV_Collection.getCargo(i);
            String indvSeq = cargo.getIndv_seq_num();
            String fileValue = cargo.getFile_taxes_sw();
            String preservedFileValue = preservedFilesTax != null ? (String) preservedFilesTax.get(indvSeq) : null;
    %>
        var fileElement = document.getElementById("taxfilesw_<%=Encode.forHtml(indvSeq)%>");
        if(fileElement != null) {
            <%if(preservedFileValue != null && !preservedFileValue.equals("null") && !preservedFileValue.equals("")) {%>
                fileElement.value = "<%=preservedFileValue%>";
            <%} else if(fileValue != null && !fileValue.equals("null") && !fileValue.equals("") && !"I".equals(fileValue)) {%>
                fileElement.value = "<%=fileValue%>";
            <%} else {%>
                fileElement.value = ""; // Ensure empty values are properly set
            <%}%>
        }
    <%
        }
    }
    
    // Restore jointly filing values - IMPROVED HANDLING
    if(appJointlyFilingTax != null && appJointlyFilingTax.size() > 0) {
        for(int i = 0; i < appJointlyFilingTax.size(); i++) {
            APP_TAX_RLT_Cargo jointCargo = appJointlyFilingTax.getCargo(i);
            String srcSeqNum = jointCargo.getSrc_indv_seq_num();
            String jointValue = jointCargo.getTax_jointly_filed_sw();
            String preservedJointValue = preservedTaxJointly != null ? (String) preservedTaxJointly.get(srcSeqNum) : null;
    %>
        var jointElement = document.getElementById("taxJointlyFiled_<%=Encode.forHtml(srcSeqNum)%>");
        if(jointElement != null) {
            <%if(preservedJointValue != null && !preservedJointValue.equals("null") && !preservedJointValue.equals("")) {%>
                jointElement.value = "<%=preservedJointValue%>";
            <%} else if(jointValue != null && !jointValue.equals("null") && !jointValue.equals("") && !"I".equals(jointValue)) {%>
                jointElement.value = "<%=jointValue%>";
            <%} else {%>
                jointElement.value = ""; // IMPORTANT: Ensure empty/null values show as empty in dropdown
            <%}%>
        }
    <%
        }
    }
    
    // Restore tax dependent values
    if(taxPeople != null && taxPeople.size() > 0) {
        for(int i = 0; i < taxPeople.size(); i++) {
            APP_TAX_RLT_Cargo taxCargo = taxPeople.getCargo(i);
            String srcSeq = taxCargo.getSrc_indv_seq_num();
            String depValue = taxCargo.getTax_dependent_sw();
            String preservedDepValue = preservedTaxDependent != null ? (String) preservedTaxDependent.get(srcSeq) : null;
    %>
        var depElement = document.getElementById("taxDependent_<%=Encode.forHtml(srcSeq)%>");
        if(depElement != null) {
            <%if(preservedDepValue != null && !preservedDepValue.equals("null") && !preservedDepValue.equals("")) {%>
                depElement.value = "<%=preservedDepValue%>";
            <%} else if(depValue != null && !depValue.equals("null") && !depValue.equals("") && !"I".equals(depValue)) {%>
                depElement.value = "<%=depValue%>";
            <%} else {%>
                depElement.value = ""; // Ensure empty values are properly set
            <%}%>
        }
        
        // Restore relationship selection if dependent is Y
        <%if((preservedDepValue != null && "Y".equals(preservedDepValue)) || (depValue != null && "Y".equals(depValue))) {%>
            var relationElement = document.getElementById("firstName_<%=Encode.forHtml(srcSeq)%>");
            if(relationElement != null) {
                <%
                String preservedRelValue = preservedTaxRelation != null ? (String) preservedTaxRelation.get(srcSeq) : null;
                String relationValue = taxCargo.getRef_indv_seq_num();
                %>
                <%if(preservedRelValue != null && !preservedRelValue.equals("null") && !preservedRelValue.equals("")) {%>
                    relationElement.value = "<%=preservedRelValue%>";
                <%} else if(relationValue != null && !relationValue.equals("null") && !relationValue.equals("") && !"0".equals(relationValue) && !"SEL".equals(relationValue)) {%>
                    relationElement.value = "<%=relationValue%>";
                <%} else {%>
                    relationElement.value = ""; // Ensure empty values are properly set
                <%}%>
            }
        <%}%>
    <%
        }
    }
    %>
}
	
	
	
	
	
	function taxDependentChangeOnLoad(){
    <%
        for (int i=0; i<allAppIndvsTax.size() ; i++)
        {
    %>
    var indvNum = "<%=(i+1)%>";
    var element = "";
    if(document.getElementById("taxDependent"+"_"+indvNum)!=null) {
        element = document.getElementById("taxDependent"+"_"+indvNum).value;
    }
    var taxRel = "taxRelationBlock"+indvNum;
    if(element == "Y"){
        if(document.getElementById(taxRel)!=null) {
            document.getElementById(taxRel).style.display="block";
        }
    } else {
        if(document.getElementById(taxRel)!=null) {
            document.getElementById(taxRel).style.display="none";
        }
    }
    <%}%>
}
	
	
	function triggerTaxChangeEvents() {
    // Trigger change events for tax dependent dropdowns to show/hide relationship sections
    <%for (int i=0; i<allAppIndvsTax.size(); i++) {%>
        var taxDepElement = document.getElementById("taxDependent_<%=(i+1)%>");
        if(taxDepElement != null) {
            taxDependentChange(taxDepElement);
        }
    <%}%>
    
    // Trigger change events for jointly filing dropdowns
    <%if(appJointlyFilingTax != null && appJointlyFilingTax.size() > 0) {
        for(int i = 0; i < appJointlyFilingTax.size(); i++) {
            APP_TAX_RLT_Cargo jointCargo = appJointlyFilingTax.getCargo(i);
            String srcSeqNum = jointCargo.getSrc_indv_seq_num();
            String refSeqNum = jointCargo.getRef_indv_seq_num();%>
            var jointElement = document.getElementById("taxJointlyFiled_<%=Encode.forHtml(srcSeqNum)%>");
            if(jointElement != null) {
                jointlyFilingChange(jointElement, "<%=Encode.forHtml(refSeqNum)%>");
            }
    <%  }
    }%>
    
    // Call reset function to ensure clean state
    resetDependentSections();
}
	
	
	
	
	function individualRelationshipOnLoad(){
		<%
			for (int i=0; i<taxPeople.size() ; i++)
	       		{
	       		taxIndvCargo = taxPeople.getCargo(i);
	       		if(taxIndvCargo.getRef_indv_seq_num().equals("SEL")){
	       			taxIndvCargo.setRef_indv_seq_num("0");
	       		}
	       		if(!taxIndvCargo.getRef_indv_seq_num().equals("0") || !taxIndvCargo.getRef_indv_seq_num().equals("SEL")){
		%>
		var srcIndvNum = "<%=Encode.forHtml(taxIndvCargo.getSrc_indv_seq_num())%>";
		var refIndvNum = "<%=Encode.forHtml(taxIndvCargo.getRef_indv_seq_num())%>";
		
		var relation=household_rel[srcIndvNum+refIndvNum];
		var ele=document.getElementById("relation_"+srcIndvNum);
		var relationship=household_rel[srcIndvNum+refIndvNum];		
		if(relation == undefined){
			relationship = household_invRel[srcIndvNum+refIndvNum];
		}
		if(ele!=undefined){
			if(relationship!=undefined){
			ele.setAttribute("value",relationship);
			}else{
				ele.setAttribute("value","");
			}
		}
		
	<%}}%>
	}
		
	
  function showFFCStateDropdown(ffcIndvChkBoxElement){
	
		var value = ffcIndvChkBoxElement.value;
		var ffcStateDivElem = "formerFCIndvStateDiv_" +ffcIndvChkBoxElement.id.toString().split("_")[1];
		var ffcStateSelElem = "frmrStateCode_" +ffcIndvChkBoxElement.id.toString().split("_")[1];

		if (ffcIndvChkBoxElement.checked) {
			document.getElementById(ffcStateDivElem).style.display="block";
		} else {
			document.getElementById(ffcStateDivElem).style.display="none";
			if(document.getElementById(ffcStateSelElem) !=null ){
				document.getElementById(ffcStateSelElem).value = "00";
			}
		}
	}
	
	function showFFCStateDropdownOnLoad(){
	 
		var ffcYes= false;
		if(document.getElementById('getpostYesNo_fosterCare_Y') != null &&
				document.getElementById('getpostYesNo_fosterCare_Y').checked == true){
				ffcYes = true;
		}
		<%	
		if(people_43 != null && people_43.size()>0){
		 for (int i=0; i<people_43.size() ; i++) {
		   String indvSeqNum = people_43.getResult(i).getIndv_seq_num();
	 	%>
			var indvNum = "<%=Encode.forHtml(indvSeqNum)%>";
			var ffcStateElem = "formerFCIndvStateDiv_"+indvNum;
			if(document.getElementById("formerFosterCare"+"_"+indvNum)!=null){
				var ffcIndvChkBoxElement = document.getElementById("formerFosterCare"+"_"+indvNum);
			}
			if(ffcYes && ffcIndvChkBoxElement.checked){
			    if(document.getElementById(ffcStateElem)!=null){
					document.getElementById(ffcStateElem).style.display="block";
				}
			}else {
				if(document.getElementById(ffcStateElem)!=null){
					document.getElementById(ffcStateElem).style.display="none";
				}
			}
	<%
		}// end for
	
	  } // end if %>
	
	}
		
</script>

<%-- NOT EDITABLE - Legal Disclaimer Table --%>	            
<AP:FwPageLegalTag /> 