//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DD02         DD DSN=WNP.WN91.AIN98A.SORTED,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DD03         DD DSN=WNP.WN91.AIN98A.UNIQUE,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DD04         DD DSN=WNP.WN91.AIN98A.PRNFILE,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//*
//AIN98A02 EXEC PGM=IKJEFT01,DYNAMNBR=20,REGION=32M,TIME=30
//********************************************************************
//*        AIN98A - SCHOOL LUNCH PROGRAM
//********************************************************************
//ELAPRINT     DD SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1330)
//ELASNAP      DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//EZEPRINT     DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//CEEDUMP      DD SYSOUT=M
//SYSABOUT     DD SYSOUT=M
//SYSDBOUT     DD SYSOUT=M
//SYSOUT       DD SYSOUT=*
//SYSOUX       DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//APPLERR      DD SYSOUT=*,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//SYSTSIN      DD *
  DSN SYSTEM(DB26)
  RUN PROG(AIN98A)  PLAN(WNMDB6P1)
  END
//INFILE       DD *
$WBOMYYYYMMDD
/*
//* $WBOMYYYYMMDD
//* CCYYMMDD - FIRST DAY OF CURRENT MONTH
//*
//SCHLNCH      DD DSN=WNP.WN91.AIN98A.SCHOOL,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(RECFM=FB,LRECL=470,BLKSIZE=0)
//PRNFILE      DD DSN=WNP.WN91.AIN98A.PRNFILE,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(RECFM=FBA,LRECL=133,BLKSIZE=0)
//*
//AIN98A03 EXEC PGM=IEBGENER
//********************************************************************
//*        IEBGENER - BACKUP FILE TO A GDG
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DISP=SHR,DSN=WNP.WN91.AIN98A.SCHOOL
//SYSUT2       DD DSN=WNP.WN91.AIN98A.SCHOOL.GDG(+1),
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=WNP.WN91.AIN98A.SCHOOL
//SYSIN        DD DUMMY
//*
//AIN98A04 EXEC PGM=SORT,PARM='CORE=MAX'
//********************************************************************
//*            DFSORT - SORT STEP
//********************************************************************
//SORTIN       DD DSN=WNP.WN91.AIN98A.SCHOOL,
//             DISP=SHR
//SORTOUT      DD DSN=WNP.WN91.AIN98A.SORTED,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(RECFM=FB,LRECL=470,BLKSIZE=0)
//SYSPRINT     DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSIN        DD *
  SORT FIELDS=(11,9,CH,A,84,1,CH,A)
//*
//*    SORT FIELDS=(11,9,CH,A,84,1,CH,A)
//*
//AIN98A05 EXEC PGM=ICETOOL,PARM='CORE=MAX'
//********************************************************************
//*            ICE - SORT STEP TO ELIMINATE DUPS
//********************************************************************
//SORTIN       DD DSN=WNP.WN91.AIN98A.SORTED,
//             DISP=SHR
//SORTOUT      DD DSN=WNP.WN91.AIN98A.UNIQUE,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(RECFM=FB,LRECL=470,BLKSIZE=0)
//SORTWK01     DD UNIT=SYSDA,SPACE=(CYL,(15,15),RLSE)
//SORTWK02     DD UNIT=SYSDA,SPACE=(CYL,(15,15),RLSE)
//SORTWK03     DD UNIT=SYSDA,SPACE=(CYL,(15,15),RLSE)
//TOOLMSG      DD SYSOUT=*
//DFSMSG       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SORTDIAG     DD DUMMY
//TOOLIN       DD *
  SELECT FROM(SORTIN) TO(SORTOUT) ON(11,9,CH) FIRST
//*
//*  SELECT FROM(SORTIN) TO(SORTOUT) ON(11,9,CH) FIRST
//*
//*
//*  FTP THIS FILE TO DOE - WNP.WN91.AIN98A.UNIQUE
//*
//*
//* ***************************************************************** *
//* SECURE FTP NEVADA DEPARTMENT OF EDUCATION (DOE) FILE
//*   AIN98A - WNM00M38
//*   MONTHLY EXTRACT FILE-CHILDREN ELIG SCHOOL LUNCH PROGRAM
//*
//* ***************************************************************** *
//*
//* ================================================================= *
//     SET SCPATH='/u/NMD/wss01'                <== UNIX PATH LOC     *
//     SET PWDSCRPT='school_pwd.sh'             <== PASSWORD SCRIPT   *
//     SET FILENAME='SCHOOL_AIN98A_OUTPUT.DAT'  <== DELETE THIS FILE  *
//     SET SCRIPT='SCHOOL_AIN98A_PUT.SCRIPT'    <== SCRIPT NAME       *
//     SET USERID='DWSS'                        <== SFTP PROD USERID  *
//     SET IPADDR='SCHOOL_AIN98A_FTPSCRPT.SH'   <== DESTINATION IP/DNS*
//     SET STDENV='CDP.DATALIB(WSFTPSCH)'       <== STDENV DATASET    *
//*       CDP.DATALIB(WSFTPSCH) contains the following:               *
//*        DISPLAY=FOO
//*        SSH_ASKPASS=/u/NMD/wss01/vital_statspwd.sh
//*    SET INDSN='WNP.WN91.AIN98A.UNIQUE'       <== INPUT DATA        *
//* ================================================================= *
//*
//*                                                                   *
//*********************************************************************
//* DYNAMICALLY CREATE/UPDATE THE UNIX SFTP BATCH SCRIPT PASSWORD     *
//* THE PASSWORD FILE NEEDS THE WORD 'ECHO' WITH THE PASSWORD IN      *
//* IN SINGLE QUOTES.  PASSWORD IS CASE SENSITIVE SO 'CAPS OFF'.      *
//*********************************************************************
//STEPPWD  EXEC PGM=ICEGENER
//SYSPRINT DD DUMMY
//SYSIN DD DUMMY
//SYSUT2       DD PATH=('&SCPATH./&PWDSCRPT'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//SYSUT1 DD *
echo 'EDZdVH@'
/*
//STEP0    EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - DELETE FILE IN OMVS
//********************************************************************
//DD01         DD  PATH='&SCPATH./&FILENAME',
//             FILEDATA=TEXT,PATHOPTS=ORDONLY,PATHDISP=DELETE
//*
//STEP1    EXEC PGM=ICEGENER
//*****************************************
//* COPY MVS DATAST TO OMVS UNIX DIRECTORY
//*****************************************
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//SYSUT1       DD DSN=WNP.WN91.AIN98A.UNIQUE,DISP=OLD
//*SYSUT1       DD DSN=WNM.TF1.D9999XXX.JN.AIN97B.SCHOOL,DISP=OLD
//SYSUT2       DD PATH='&SCPATH./&FILENAME',
//             FILEDATA=TEXT,
//             PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//LISTDIR2 EXEC PGM=IKJEFT01,REGION=2M
//******************************************************
//* LIST ALL FILES IN THE UNIX DIRECTORY FOR USER=WSS01
//******************************************************
//SYSEXEC      DD DSN=SYS1.SBPXEXEC,DISP=SHR
//SYSTSPRT     DD SYSOUT=*
//SYSTSIN      DD *
OSHELL ls -al
//*
//BLDSCRPT EXEC PGM=ICEGENER
//************************************************
//* DYNAMICALLY CREATE THE UNIX SFTP BATCH SCRIPT
//************************************************
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//SYSUT2       DD PATH=('&SCPATH./&SCRIPT'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//SYSUT1 DD *
ascii
PUT SCHOOL_AIN98A_OUTPUT.DAT 'AIN98A.DAT'
ls -l
quit
/*
//*
//* ascii
//* PUT SCHOOL_AIN98A_OUTPUT.DAT 'AIN98A.DAT'
//* ls -l
//*
//STEP3    EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - DELETE FILE IN OMVS
//********************************************************************
//DD01         DD  PATH='&SCPATH./&IPADDR',
//             FILEDATA=TEXT,PATHOPTS=ORDONLY,PATHDISP=DELETE
//*
//BLDSFTP  EXEC PGM=ICEGENER
//********************************************************************
//* COPY THE SFTP CONNECTION SCRIPT FROM A DATASET TO UNIX FILE
//*  PROD ===> DSN=WNP.WN91.AIN98A.SFTP.PUT.CONN.PROD
//*            FOR THE NEVADA DEPARTMENT OF EDUCATION (DOE)
//********************************************************************
//SYSUT1      DD DISP=SHR,DSN=WNP.WN91.AIN98A.SFTP.PUT.CONN.PROD
//SYSUT2      DD PATH=('&SCPATH./&IPADDR'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT),PATHMODE=SIRWXU
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
/*
//*
//* PROD SFTP SITE DSN=WNP.WN91.AIN98A.SFTP.PUT.CONN.PROD :
//*   sftp -o Batchmode=no -o PubkeyAuthentication=no -vv
//*   -b /u/NMD/wss01/SCHOOL_AIN98A_PUT.SCRIPT
//*   DWSS@167.154.10.16
//*
//SFTP6    EXEC PGM=BPXBATCH
//***********************************************************
//* RUN UNIX SFTP BATCH SCRIPT JUST CREATED IN STEP BLDSCRPT
//***********************************************************
//STDIN        DD PATH='&SCPATH./&IPADDR',PATHOPTS=(ORDONLY)
//STDENV       DD DISP=SHR,DSN=&STDENV
//STDOUT       DD SYSOUT=*
//STDERR       DD SYSOUT=*
//STDOUT       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//*
//*
//* *************************************************************** *
//*         NDA (NEVADA DEPARTMENT OF AGRICULTURE) -
//*                  SCHOOL LUNCH FILES
//*
//* AIN98A - WNM00M38
//* AIN98A - WNM00M87
//* TWICE MONTHLY EXTRACT FILE-CHILDREN ELIG SCHOOL LUNCH PROGRAM
//* *************************************************************** *
//*
//* *************************************************************** *
//* PUT SCHOOL_AIN98A_OUTPUT.DAT AIN98_$WYYYYMMDD..dat
//* ***************************************************************** *
//*
//* ================================================================= *
//  SET SCPATH='/u/NMD/wss01'                   <= UNIX PATH LOC      *
//  SET PWDSCRPT='nda_pwd.sh'                   <= PASSWORD SCRIPT    *
//  SET FILENAME='SCHOOL_AIN98A_OUTPUT.DAT'     <== DELETE THIS FILE  *
//* SET USERID='WelfareFTP'                     <= SFTP PROD USERID   *
//  SET IPADDR='NDA_FTPSCRPT.sh'                <= DESTINATION IP/DNS *
//  SET STDENV='CDP.DATALIB(WSFTPNDA)'          <= STDENV DATASET     *
//*       CDP.DATALIB(WSFTPNDA) contains the following:               *
//*        DISPLAY=FOO                                                *
//*        SSH_ASKPASS=/u/NMD/wss01/nda_pwd.sh
//* ================================================================= *
//*
//*
//*********************************************************************
//* DYNAMICALLY CREATE/UPDATE THE UNIX SFTP BATCH SCRIPT PASSWORD     *
//* THE PASSWORD FILE NEEDS THE WORD 'ECHO' WITH THE PASSWORD IN      *
//* IN SINGLE QUOTES.  PASSWORD IS CASE SENSITIVE SO 'CAPS OFF'.      *
//*********************************************************************
//STEPPWD  EXEC PGM=ICEGENER
//SYSPRINT DD DUMMY
//SYSIN DD DUMMY
//SYSUT2       DD PATH=('&SCPATH./&PWDSCRPT'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//SYSUT1 DD *
echo 'Uq532XJB'
/*
//*STEP7    EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - DELETE FILE IN OMVS
//********************************************************************
//*DD01         DD  PATH='&SCPATH./&FILENAME',
//*             FILEDATA=TEXT,PATHOPTS=ORDONLY,PATHDISP=DELETE
//*
//*STEP8    EXEC PGM=ICEGENER
//*****************************************
//* COPY MVS DATAST TO OMVS UNIX DIRECTORY
//*****************************************
//*SYSPRINT     DD DUMMY
//*SYSIN        DD DUMMY
//*SYSUT1       DD DSN=WNP.WN91.AIN98A.UNIQUE,DISP=OLD
//*SYSUT2       DD PATH='&SCPATH./&FILENAME',
//*             FILEDATA=TEXT,
//*             PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//LISTDIR2 EXEC PGM=IKJEFT01,REGION=2M
//******************************************************
//* LIST ALL FILES IN THE UNIX DIRECTORY FOR USER=WSS01
//******************************************************
//SYSEXEC      DD DSN=SYS1.SBPXEXEC,DISP=SHR
//SYSTSPRT     DD SYSOUT=*
//SYSTSIN      DD *
OSHELL ls -al
//*
//*==============================================                    *
//  SET SCPATH='/u/NMD/wss01'                  <== SCRIPT LOCATION    *
//  SET SCRIPT='NDA_PUT.SCRIPT'                <== SCRIPT NAME        *
//  SET IPADDR='NDA_FTPSCRPT.sh'               <== DESTINATION IP/DNS *
//*==============================================                    *
//*
//BLDSCRPT EXEC PGM=ICEGENER
//************************************************
//* DYNAMICALLY CREATE THE UNIX SFTP BATCH SCRIPT
//************************************************
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//SYSUT2       DD PATH=('&SCPATH./&SCRIPT'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//SYSUT1 DD *
ascii
PUT SCHOOL_AIN98A_OUTPUT.DAT AIN98A_$WYYYYMMDD..dat
ls -l
quit
/*
//*
//* ascii
//* PUT SCHOOL_AIN98A_OUTPUT.DAT AIN98A_$WYYYYMMDD..dat
//* ls -l
//* quit
//*
//STEP9    EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - DELETE FILE IN OMVS
//********************************************************************
//DD01         DD  PATH='&SCPATH./&IPADDR',
//             FILEDATA=TEXT,PATHOPTS=ORDONLY,PATHDISP=DELETE
//*
//BLDSFTP  EXEC PGM=ICEGENER
//********************************************************************
//* COPY THE SFTP CONNECTION SCRIPT FROM A DATASET TO UNIX FILE
//*  PROD ===> DSN=WNP.WN91.NDA.SFTP.PUT.CONN.SCRIPT
//*                  for the EITS 'ftp.state.nv.us:22' site
//********************************************************************
//SYSUT1      DD DISP=SHR,DSN=WNP.WN91.NDA.SFTP.PUT.CONN.SCRIPT
//SYSUT2       DD PATH=('&SCPATH./&IPADDR'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT),PATHMODE=SIRWXU
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//*
//* PROD SFTP SITE DSN=WNP.WN91.NDA.SFTP.PUT.CONN.SCRIPT
//*   sftp -o Batchmode=no -o PubkeyAuthentication=no -v
//*   -b /u/NMD/wss01/NDA_PUT.SCRIPT
//*   WelfareFTP@ftp.state.nv.us
//*
/*
//SFTP10   EXEC PGM=BPXBATCH
//***********************************************************
//* RUN UNIX SFTP BATCH SCRIPT JUST CREATED IN STEP BLDSCRPT
//***********************************************************
//STDIN        DD PATH='&SCPATH./&IPADDR',PATHOPTS=(ORDONLY)
//STDENV       DD DISP=SHR,DSN=&STDENV
//STDOUT       DD SYSOUT=*
//STDERR       DD SYSOUT=*
//STDOUT       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//*

===FILE:AIN99A_JCL===
//WNM16D04 JOB 'WN92P','NOMADS-AIN75A',
//         CLASS=9,MSGCLASS=5,
//         COND=(10,LE),
//         REGION=128M,
//         NOTIFY=WNMJH,
//         USER=CSS01
//*        RESTART=
/*ROUTE  PRINT LOCAL
//OUT1  OUTPUT ADDRESS='WELFARE        ',
//             BUILDING='CENTRAL OFFICE',
//             DEPT='NEVADA STATE WELFARE DIVISION',
//             TITLE=' REPORT -       ',DEFAULT=YES,JESDS=ALL
//JOBLIB       DD DSN=SYSP.DB.DB26.SDSNLOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.EMERG.LOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.PROD.LOAD,DISP=SHR
//*
//STEP1    EXEC PGM=IKJEFT01,DYNAMNBR=20,REGION=4M
//********************************************************************
//* AIN75A IF TREASURY FILE STEP 2 TO GDG             COND= 6 MONTHLY
//*        IF RECON    FILE STEP 3 RUN AIN99A         COND= 5 QUARTERLY
//*        ELSE  DAILY FILE STEP 8 BUILD MONTHLY FILE COND= 0 DAILY
//********************************************************************
//SYSUDUMP     DD SYSOUT=M
//SYSDBOUT     DD SYSOUT=M
//SYSABOUT     DD SYSOUT=M
//CEEDUMP      DD SYSOUT=M
//SYSOUX       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//ELAPRINT     DD SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1330)
//ELASNAP      DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//EZEPRINT     DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//APPLERR      DD SYSOUT=*,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//SYSTSIN      DD *
  DSN SYSTEM(DB26)
  RUN PROG (AIN75A) PLAN(WNMDB6P1)
  END
/*
//SDXIN        DD DSN=WNP.WN91.SDX.DAILY,DISP=SHR
//*
//STEP2    EXEC PGM=IEBGENER,DYNAMNBR=20,REGION=4M,COND=(6,NE,STEP1)
//********************************************************************
//*        IEBGENER - BACKUP FILE TO A GDG
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DSN=WNP.WN91.SDX.DAILY,DISP=SHR
//SYSUT2       DD DSN=WNP.WN91.SDX.TRES.GDG(+1),
//             DISP=(,CATLG,DELETE),UNIT=CART,
//             DCB=WNP.WN91.SDX.DAILY
//SYSIN        DD DUMMY
//*
//STEP3    EXEC PGM=IEFBR14,COND=(5,NE,STEP1)
//********************************************************************
//*        IEFBR14 - DELETE FILE(S) FOR NEXT STEP
//********************************************************************
//DD01         DD DSN=WNP.WN91.AIN99A.INPUT,
//             DISP=(MOD,DELETE,DELETE),
//             SPACE=(TRK,(0,0))
//DD02         DD DSN=WNP.WN91.AIN99A.OUTPUT,
//             DISP=(MOD,DELETE,DELETE),
//             SPACE=(TRK,(0,0))
//*
//STEP4    EXEC PGM=SORT,PARM='CORE=MAX',COND=(5,NE,STEP1)
//SORTDIAG     DD DUMMY
//SYSOUT       DD SYSOUT=*
//SORTIN       DD DSN=WNP.WN91.SDX.DAILY,DISP=SHR
//SORTOUT      DD DSN=WNP.WN91.AIN99A.INPUT,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(10,50),RLSE),VOL=SER=WNM061,
//             DCB=(RECFM=FB,LRECL=3000,BLKSIZE=0)
//SORTWK01     DD UNIT=SYSDA,SPACE=(CYL,(25,5),RLSE)
//SORTWK02     DD UNIT=SYSDA,SPACE=(CYL,(25,5),RLSE)
//SORTWK03     DD UNIT=SYSDA,SPACE=(CYL,(25,5),RLSE)
//SORTWK04     DD UNIT=SYSDA,SPACE=(CYL,(25,5),RLSE)
//SORTWK05     DD UNIT=SYSDA,SPACE=(CYL,(25,5),RLSE)
//SORTWK06     DD UNIT=SYSDA,SPACE=(CYL,(25,5),RLSE)
//SYSIN        DD *
  SORT  FIELDS=(1529,1,CH,A,1542,1,CH,A,1543,1,CH,A)
  OMIT  COND=(2,3,CH,EQ,C'SDX',OR,1441,7,CH,EQ,C'0000000')
//*
//STEP5   EXEC PGM=IKJEFT01,DYNAMNBR=20,REGION=4M,COND=(5,NE,STEP1)
//********************************************************************
//*       AIN99A - RUN SDX RECON REPORT
//********************************************************************
//SYSUDUMP     DD SYSOUT=M
//SYSDBOUT     DD SYSOUT=M
//SYSABOUT     DD SYSOUT=M
//CEEDUMP      DD SYSOUT=M
//SYSOUX       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//ELAPRINT     DD SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1330)
//ELASNAP      DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//EZEPRINT     DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//APPLERR      DD SYSOUT=*,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//SYSTSIN      DD *
  DSN SYSTEM(DB26)
  RUN PROG(AIN99A) PLAN(WNMDB6P1)
  END
/*
//INPUT        DD DSN=WNP.WN91.AIN99A.INPUT,DISP=SHR
//OUTPUT       DD DSN=WNP.WN91.AIN99A.OUTPUT,
//             DISP=(NEW,CATLG,CATLG),UNIT=3390,
//             SPACE=(TRK,(1,1),RLSE),VOL=SER=WNM030,
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=0)
//*
//*TEP6    EXEC PGM=IEBGENER,COND=(5,NE,STEP1)
//********************************************************************
//*        IEBGENER - PRINT FILE(S) FROM PREVIOUS STEP(S)
//********************************************************************
//*YSPRINT     DD SYSOUT=*
//*YSUT1       DD DISP=SHR,DSN=WNP.WN91.AIN99A.OUTPUT
//*YSUT2       DD SYSOUT=(D,,F1L8),
//*            DEST=FQDW00,
//*            FCB=FXL8,
//*            RECFM=FBA
//*YSIN        DD DUMMY
//*
//STEP6B   EXEC PGM=IEBGENER,COND=(5,NE,STEP1)
//********************************************************************
//*        IEBGENER - PRINT FILE(S) FROM PREVIOUS STEP(S)
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DISP=SHR,DSN=WNP.WN91.AIN99A.OUTPUT
//SYSUT2       DD SYSOUT=(F,,F1L8),
//             DEST=LOCAL,
//             FCB=FXL8,
//             RECFM=FBA
//SYSIN        DD DUMMY
//*
//STEP7    EXEC PGM=IEBGENER,DYNAMNBR=20,REGION=4M,COND=(5,NE,STEP1)
//********************************************************************
//*        IEBGENER - BACKUP FILE TO A GDG
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DSN=WNP.WN91.SDX.DAILY,DISP=SHR
//SYSUT2       DD DSN=WNP.WN91.SDX.RECON.GDG(+1),
//             DISP=(,CATLG,DELETE),UNIT=CART,
//             DCB=WNP.WN91.SDX.DAILY
//SYSIN        DD DUMMY
//*
//STEP8    EXEC PGM=IEBGENER,COND=(0,NE,STEP1)
//********************************************************************
//*        IEBGENER - MOD INPUT FILE ON TO SDX.AIN22A
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DSN=WNP.WN91.SDX.DAILY,DISP=SHR
//SYSUT2       DD DSN=WNP.WN91.SDX.AIN22A,DISP=MOD
//SYSIN        DD DUMMY
//*
//STEP9    EXEC PGM=IEFBR14,COND=(0,NE,STEP1)
//********************************************************************
//*        IEFBR14 - CREATE NEW EMPTY FILES
//********************************************************************
//DD01         DD DSN=WNP.WN91.SDX.DAILY,
//             DISP=(MOD,DELETE,DELETE),
//             SPACE=(TRK,(0,0))
//*
//STEP10   EXEC PGM=IEFBR14,COND=(0,NE,STEP1)
//********************************************************************
//*        IEFBR14 - CREATE NEW EMPTY FILES
//********************************************************************
//DD01         DD DSN=WNP.WN91.SDX.DAILY,
//             DISP=(NEW,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(75,75),RLSE),VOL=SER=WNM026,
//             DCB=(RECFM=FB,LRECL=3000,BLKSIZE=0)
//*
//STEP11   EXEC PGM=IEBGENER,COND=(0,NE,STEP1)
//********************************************************************
//*        IEBGENER - FIX POSSIBLE DSORG=NONE CONDITION
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DUMMY,DCB=WNP.WN91.SDX.DAILY
//SYSUT2       DD DSN=WNP.WN91.SDX.DAILY,DISP=MOD
//SYSIN        DD DUMMY
//*
//STEP12   EXEC PGM=IEFBR14,COND=(5,NE,STEP1)
//********************************************************************
//*        IEFBR14 - CREATE NEW EMPTY FILES
//********************************************************************
//DD01         DD DSN=WNP.WN91.SDX.DAILY,
//             DISP=(MOD,DELETE,DELETE),
//             SPACE=(TRK,(0,0))
//*
//STEP13   EXEC PGM=IEFBR14,COND=(5,NE,STEP1)
//********************************************************************
//*        IEFBR14 - CREATE NEW EMPTY FILES
//********************************************************************
//DD01         DD DSN=WNP.WN91.SDX.DAILY,
//             DISP=(NEW,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(75,75),RLSE),VOL=SER=WNM026,
//             DCB=(RECFM=FB,LRECL=3000,BLKSIZE=0)
//*
//STEP14   EXEC PGM=IEBGENER,COND=(5,NE,STEP1)
//********************************************************************
//*        IEBGENER - FIX POSSIBLE DSORG=NONE CONDITION
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DUMMY,DCB=WNP.WN91.SDX.DAILY
//SYSUT2       DD DSN=WNP.WN91.SDX.DAILY,DISP=MOD
//SYSIN        DD DUMMY
//*
//STEP15   EXEC PGM=IEFBR14,COND=(6,NE,STEP1)
//********************************************************************
//*        IEFBR14 - CREATE NEW EMPTY FILES
//********************************************************************
//DD01         DD DSN=WNP.WN91.SDX.DAILY,
//             DISP=(MOD,DELETE,DELETE),
//             SPACE=(TRK,(0,0))
//*
//STEP16   EXEC PGM=IEFBR14,COND=(6,NE,STEP1)
//********************************************************************
//*        IEFBR14 - CREATE NEW EMPTY FILES
//********************************************************************
//DD01         DD DSN=WNP.WN91.SDX.DAILY,
//             DISP=(NEW,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(75,75),RLSE),VOL=SER=WNM026,
//             DCB=(RECFM=FB,LRECL=3000,BLKSIZE=0)
//*
//STEP17   EXEC PGM=IEBGENER,COND=(6,NE,STEP1)
//********************************************************************
//*        IEBGENER - FIX POSSIBLE DSORG=NONE CONDITION
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DUMMY,DCB=WNP.WN91.SDX.DAILY
//SYSUT2       DD DSN=WNP.WN91.SDX.DAILY,DISP=MOD
//SYSIN        DD DUMMY
//*

===FILE:CIN01A_JCL===
===FILE:CIN01A_JCL_2===
===FILE:CIN01A_JCL_3===
//WNM91D04 JOB 'WN35P','NOMADS-CIN01A',
//         CLASS=9,MSGCLASS=5,
//         COND=(10,LE),
//         REGION=64M,
//         USER=CSS01
//*        RESTART=
/*ROUTE  PRINT LOCAL
//OUT1  OUTPUT ADDRESS='WELFARE NSWD',
//             BUILDING='WELFARE CENTRAL OFFICE',
//             DEPT='NEVADA STATE WELFARE DIVISION',
//             TITLE=' REPORT -       ',DEFAULT=YES,JESDS=ALL
//JOBLIB       DD DSN=SYSP.DB.DB26.SDSNLOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.EMERG.LOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.PROD.LOAD,DISP=SHR
//*
//STEP1    EXEC PGM=IEFBR14
//UCASE        DD DSN=WNP.WN91.CIN01A.UCASE,
//             DISP=(MOD,DELETE,DELETE),
//             SPACE=(TRK,(0,0),RLSE)
//*
//STEP2    EXEC PGM=IKJEFT01,DYNAMNBR=20,REGION=32M
//SYSPROC      DD DISP=SHR,DSN=WNM.WN91.VERCNTL.EXEC
//SYSPRINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//SYSTSIN      DD *
%FOLD
/*
//PARMFILE     DD *
0
0
1 1 801
/*
//DATAIN       DD DSN=WNP.WN91.NEWHIRE,
//             DISP=SHR
//DATAOUT      DD DSN=WNP.WN91.CIN01A.UCASE,
//             DISP=(NEW,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(5,50),RLSE),VOL=SER=WNM030,
//             DCB=(RECFM=FB,LRECL=801,BLKSIZE=0)
//*
//STEP3    EXEC PGM=IKJEFT01,DYNAMNBR=20,REGION=32M
//SYSUDUMP     DD SYSOUT=M
//SYSOUX       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//CEEDUMP      DD SYSOUT=M
//SYSABOUT     DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//ELAPRINT     DD SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1330)
//ELASNAP      DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//EZEPRINT     DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//APPLERR      DD SYSOUT=*,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//SYSTSIN      DD *
  DSN SYSTEM(DB26)
  RUN PROG(CIN01A)  PLAN(WNMDB6P1)
  END
/*
//BDATPARM     DD DSN=WNP.WN91.BDATEREC,DISP=SHR
//CIN01P1      DD DSN=WNP.WN91.CIN01A.UCASE,DISP=SHR
//*
//STEP4    EXEC PGM=IEFBR14
//NEWHIRE      DD DSN=WNP.WN91.NEWHIRE,
//             DISP=(MOD,DELETE,DELETE),
//             SPACE=(TRK,(0,0),RLSE)
//*

===FILE:CIN01A_JCL_4===
//WSFTPDA4 JOB 'WN35P','NOMADS-CIN01A SFTP',
//         CLASS=9,MSGCLASS=5,
//         COND=(257,LE),
//         REGION=64M,
//         NOTIFY=WNMLG,
//         USER=WSS01
//*        RESTART=
/*ROUTE  PRINT LOCAL
//OUT1  OUTPUT ADDRESS='WELFARE NSWD',
//             BUILDING='WELFARE CENTRAL OFFICE',
//             DEPT='NEVADA STATE WELFARE DIVISION',
//             TITLE='IV-D ESD INTERFACE',DEFAULT=YES,JESDS=ALL
//*
//* *************************************************************** *
//* DETR (ESD) INTERFACE - (NEW HIRE) INPUT FILE
//*      CIN01A GET ESD file to NOMADS (for SDNH)
//* *************************************************************** *
//*
//* ================================================================= *
//  SET SCPATH='/u/NMD/wss01'                     <= UNIX PATH LOC    *
//  SET FILENAME='DETR_CIN01A_INPUT.FILE'         <= DELETE THIS FILE *
//  SET PWDSCRPT='detrpwd-nh.sh'                  <= PASSWORD SCRIPT  *
//* ================================================================= *
//*                                                                   *
//*********************************************************************
//* DYNAMICALLY CREATE/UPDATE THE UNIX SFTP BATCH SCRIPT PASSWORD     *
//* THE PASSWORD FILE NEEDS THE WORD 'ECHO' WITH THE PASSWORD IN      *
//* IN SINGLE QUOTES.  PASSWORD IS CASE SENSITIVE SO 'CAPS OFF'.      *
//*********************************************************************
//STEPPWD  EXEC PGM=ICEGENER
//SYSPRINT DD DUMMY
//SYSIN DD DUMMY
//SYSUT2       DD PATH=('&SCPATH./&PWDSCRPT'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//SYSUT1 DD *
echo 'Bvoj8l@yk'
//* echo 'Bvoj8l@yk'  (FOR PROD DETR ID 'welfare-nh')
//* echo 'W31f@r3#1'  (FOR TEST DETR ID 'welfare-nh')
/*
//STEP02   EXEC PGM=ZEKESET
//* *************************************************************** *
//*  SET ZEKE VARIABLE $WFTPRC3 TO 'NO' FOR (NO FILE FOUND) STATUS.
//* *************************************************************** *
//SYSPRINT     DD SYSOUT=F
//SYSIN        DD *
 SET VAR $WFTPRC3 TO 'NO'
//*
//STEP03   EXEC PGM=ICEGENER
//********************************************************************
//*        ICEGENER - COPY EMPTY FILE TO UNIX INPUT FILE
//********************************************************************
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//SYSUT1       DD DISP=SHR,DSN=WNP.WN91.CIN01A.EMPTY
//SYSUT2       DD PATH=('&SCPATH./&FILENAME'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//********************************************************************
//*     THIS JOB INITIATES AN SFTP FILE TRANSFER SCRIPT USING THE    *
//*     NON-RECOMMENDED PASSWORD AUTHENTICATION METHOD.              *
//********************************************************************
//*                                                                  *
//* NOTE:                                                            *
//*     ========================================================     *
//*     THE TERM "APPROPRIATE DIRECTORY" IN THE INSTRUCTIONS         *
//*     BELOW REFERS TO YOUR DIRECTORY WHERE DATA, PARM MEMBERS,     *
//*     EXECS, SCRIPTS AND OTHER MEMBERS RESIDE.                     *
//*     ========================================================     *
//*                                                                  *
//* PRE-RUN INSTRUCTIONS:                                            *
//*                                                                  *
//*     STEP 1.   BUILD A VALID SFTP SCRIPT AND SAVE IT IN THE       *
//*               APPROPRIATE DIRECTORY IN THE OMVS SHELL            *
//*                                                                  *
//*     STEP 2.   BUILD A PASSWORD ECHO SCRIPT (.SH) AND SAVE IT     *
//*               IN THE APPROPRIATE LIBRARY. SCRIPT WILL CONTAIN    *
//*               A SINGLE COMMAND: ECHO {PASSWORD}                  *
//*                                                                  *
//*      =====================================================       *
//*      WARNING: THIS PASSWORD CAN BE VIEWED BY A USER WITH         *
//*               THE PROPER PERMISSION. FOR THIS REASON, THIS       *
//*               METHOD OF SFTP IS NOT ADVISED.                     *
//*               ============================================       *
//*                                                                  *
//* RUN INSTRUCTIONS:                                                *
//*                                                                  *
//*     STEP 1.   REVIEW/CHANGE THE SET PARAMETERS BELOW AS NEEDED   *
//*               DEBUG IS OPTIONAL (USE: -VVV FOR MOST VERBOSE)     *
//*     STEP 2.   SUBMIT                                             *
//*                                                                  *
//********************************************************************
//*                                                                  *
//*==============================================                    *
//     SET SCPATH='/u/NMD/wss01'              <== SCRIPT LOCATION    *
//     SET SCRIPT='DETR_CIN01A_GET.SCRIPT'    <== SCRIPT NAME        *
//     SET IPADDR='DETR_CIN01A_FTPSCRPT.sh'   <== DESTINATION IP/DNS *
//     SET STDENV='CDP.DATALIB(WSFTPDT2)'     <== STDENV DATASET     *
//*      Member SFTPPWD contains the following:                      *
//*        DISPLAY=FOO
//*        SSH_ASKPASS=/u/NMD/wss01/detrpwd-nh.sh
//*==============================================                    *
//*
//BLDSCRPT EXEC PGM=ICEGENER
//* *************************************************************** *
//*  DYNAMICALLY CREATE THE UNIX SFTP BATCH SCRIPT
//* *************************************************************** *
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//SYSUT2       DD PATH=('&SCPATH./&SCRIPT'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//SYSUT1 DD *
ascii
cd outbound
ls -l
get sdnh_welfare.txt  'DETR_CIN01A_INPUT.FILE'
quit
/*
//*
//* ls -l
//* get sdnh_welfare.txt 'DETR_CIN01A_INPUT.FILE'
//*
//* OLD OBSOLETE NAME -
//* get ETR.P.ETNH0020.WELF.EXTR01 'DETR_CIN01A_INPUT.FILE'
//*
//STEP04   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - DELETE FILE IN OMVS
//********************************************************************
//DD01         DD  PATH='&SCPATH./&IPADDR',
//             FILEDATA=TEXT,PATHOPTS=ORDONLY,PATHDISP=DELETE
//*
//BLDSFTP5 EXEC PGM=ICEGENER
//********************************************************************
//* COPY THE SFTP CONNECTION SCRIPT FROM A DATASET TO UNIX FILE
//*  PROD ===> DSN=WNP.WN91.CIN01A.SFTP.GET.CONN.PROD
//*                     for site 'ft.nvdetr.org'
//*  TEST ===> DSN=WNP.WN91.CIN01A.SFTP.GET.CONN.TEST
//*                     for site 'ftnp.nvdetr.org'
//********************************************************************
//SYSUT1      DD DISP=SHR,DSN=WNP.WN91.CIN01A.SFTP.GET.CONN.PROD
//SYSUT2       DD PATH=('&SCPATH./&IPADDR'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT),PATHMODE=SIRWXU
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//*
//* PROD SFTP SITE DSN=WNP.WN91.CIN01A.SFTP.GET.CONN.PROD :
//*   sftp -o Batchmode=no -o PubkeyAuthentication=no -v
//*   -b /u/NMD/wss01/DETR_CIN01A_GET.SCRIPT
//*   welfare-nh@ft.nvdetr.org
//*
//* TEST SFTP SITE DSN=WNP.WN91.CIN01A.SFTP.GET.CONN.TEST :
//*   sftp -o Batchmode=no -o PubkeyAuthentication=no -v
//*   -b /u/NMD/wss01/DETR_CIN01A_GET.SCRIPT
//*   welfare-nh@ftnp.nvdetr.org
//*
/*
//*
//SFTP06   EXEC PGM=BPXBATCH
//***********************************************************
//* RUN UNIX SFTP BATCH SCRIPT JUST CREATED IN STEP BLDSCRPT
//***********************************************************
//STDIN        DD PATH='&SCPATH./&IPADDR',PATHOPTS=(ORDONLY)
//STDENV       DD DISP=SHR,DSN=&STDENV
//STDOUT       DD SYSOUT=*
//STDERR       DD SYSOUT=*
//STDOUT       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//*
//LISTDIR7 EXEC PGM=IKJEFT01,REGION=2M
//* *************************************************************** *
//* LIST ALL FILES IN THE UNIX DIRECTORY
//* *************************************************************** *
//SYSEXEC      DD DSN=SYS1.SBPXEXEC,DISP=SHR
//SYSTSPRT     DD SYSOUT=*
//SYSTSIN      DD *
OSHELL ls -al
//*
//STEP08   EXEC PGM=IEFBR14,COND=(255,LT,SFTP06)
//* **************************************************************** *
//*        IEFBR14 - ALLOCATE FILE FOR NEXT STEP
//* **************************************************************** *
//DD01         DD DSN=WNP.WN91.NEWHIRE.INPUT,
//             DISP=(MOD,DELETE,DELETE),
//             SPACE=(TRK,(0,0))
//*
//STEP09   EXEC PGM=IEFBR14,COND=(255,LT,SFTP06)
//* **************************************************************** *
//*        IEFBR14 - ALLOCATE FILE FOR NEXT STEP
//* **************************************************************** *
//DD01         DD DSN=WNP.WN91.NEWHIRE.INPUT,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(5,50),RLSE),VOL=SER=WNM37C,
//             DCB=(RECFM=FB,LRECL=801,BLKSIZE=8010)
//*
//STEP10   EXEC PGM=IKJEFT01,COND=(255,LT,SFTP06)
//* *************************************************************** *
//* COPY OMVS UNIX FILE TO MVS DATASET
//* *************************************************************** *
//SYSTSINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//SYSTERM      DD DUMMY
//HFSDATA      DD PATH='&SCPATH./DETR_CIN01A_INPUT.FILE',
//             PATHOPTS=(ORDONLY)
//MVSDATA      DD  DISP=SHR,DSN=WNP.WN91.NEWHIRE.INPUT
//SYSTSIN      DD *
  OCOPY INDD(HFSDATA) OUTDD(MVSDATA) TEXT
/*
//*
//*
//*
//* *************************************************************** *
//* PCG (Public Consulting Group) interface - Added 01-03-2022
//* *************************************************************** *
//*
//* *************************************************************** *
//* put 'DETR_CIN01A_INPUT.FILE' sdnh_welfare_$WYYYYMMDD..txt
//* ***************************************************************** *
//*
//* ================================================================= *
//  SET SCPATH='/u/NMD/wss01'                   <= UNIX PATH LOC      *
//  SET PWDSCRPT='pcg_pwd.sh'                   <= PASSWORD SCRIPT    *
//  SET IPADDR='PCG2_FTPSCRPT.sh'               <= DESTINATION IP/DNS *
//  SET STDENV='CDP.DATALIB(WSFTPCG)'           <= STDENV DATASET     *
//*       CDP.DATALIB(WSFTPCG) contains the following:                *
//*        DISPLAY=FOO                                                *
//*        SSH_ASKPASS=/u/NMD/wss01/pcg_pwd.sh                        *
//* ================================================================= *
//*
//*
//*********************************************************************
//* DYNAMICALLY CREATE/UPDATE THE UNIX SFTP BATCH SCRIPT PASSWORD     *
//* THE PASSWORD FILE NEEDS THE WORD 'ECHO' WITH THE PASSWORD IN      *
//* IN SINGLE QUOTES.  PASSWORD IS CASE SENSITIVE SO 'CAPS OFF'.      *
//*********************************************************************
//STPPWD11 EXEC PGM=ICEGENER
//SYSPRINT DD DUMMY
//SYSIN DD DUMMY
//SYSUT2       DD PATH=('&SCPATH./&PWDSCRPT'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//SYSUT1 DD *
echo '3gqsvCDo'
/*
//*==============================================                     *
//  SET SCPATH='/u/NMD/wss01'                  <== SCRIPT LOCATION    *
//  SET SCRIPT='PCG2_PUT.SCRIPT'               <== SCRIPT NAME        *
//  SET IPADDR='PCG2_FTPSCRPT.sh'              <== DESTINATION IP/DNS *
//*==============================================                     *
//*
//BLDSCRPT EXEC PGM=ICEGENER
//************************************************
//* DYNAMICALLY CREATE THE UNIX SFTP BATCH SCRIPT
//************************************************
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//SYSUT2       DD PATH=('&SCPATH./&SCRIPT'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT,OTRUNC),PATHMODE=SIRWXU
//*
//SYSUT1 DD *
ascii
put 'DETR_CIN01A_INPUT.FILE' sdnh_welfare_$WYYYYMMDD..txt
ls -l
quit
/*
//*
//* ascii
//* put 'DETR_CIN01A_INPUT.FILE' sdnh_welfare_$WYYYYMMDD..txt
//* ls -l
//* quit
//*
//STEP13   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - DELETE FILE IN OMVS
//********************************************************************
//DD01         DD  PATH='&SCPATH./&IPADDR',
//             FILEDATA=TEXT,PATHOPTS=ORDONLY,PATHDISP=DELETE
//*
//BLDSFTP  EXEC PGM=ICEGENER
//********************************************************************
//* COPY THE SFTP CONNECTION SCRIPT FROM A DATASET TO UNIX FILE
//*  PROD ===> DSN=WNP.WN91.PCG2.SFTP.PUT.CONN.SCRIPT
//*                  for the EITS 'ftp.state.nv.us:22' site
//********************************************************************
//SYSUT1      DD DISP=SHR,DSN=WNP.WN91.PCG2.SFTP.PUT.CONN.SCRIPT
//SYSUT2       DD PATH=('&SCPATH./&IPADDR'),FILEDATA=TEXT,
// PATHOPTS=(OWRONLY,OCREAT),PATHMODE=SIRWXU
//SYSPRINT     DD DUMMY
//SYSIN        DD DUMMY
//*
//* PROD SFTP SITE DSN=WNP.WN91.PCG2.SFTP.PUT.CONN.SCRIPT
//*   sftp -o Batchmode=no -o PubkeyAuthentication=no -v
//*   -b /u/NMD/wss01/PCG2_PUT.SCRIPT
//*   DWSS_PCG@ftp.state.nv.us
//*
/*
//SFTP15   EXEC PGM=BPXBATCH,COND=(255,LT,SFTP06)
//***********************************************************
//* RUN UNIX SFTP BATCH SCRIPT JUST CREATED IN STEP BLDSCRPT
//***********************************************************
//STDIN        DD PATH='&SCPATH./&IPADDR',PATHOPTS=(ORDONLY)
//STDENV       DD DISP=SHR,DSN=&STDENV
//STDOUT       DD SYSOUT=*
//STDERR       DD SYSOUT=*
//STDOUT       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//*
//*
//*
//STEP16   EXEC PGM=ZEKESET,COND=(255,LT,SFTP06)
//* *************************************************************** *
//* NO FILE FOUND = THEN LEAVE VAR $WFTPRC3 SET TO 'NO'
//* IF FILE FOUND = THEN UPDATE VAR $WFTPRC3 TO 'YES' (SUCCESS)
//* *************************************************************** *
//SYSPRINT     DD SYSOUT=F
//SYSIN        DD *
 SET VAR $WFTPRC3 TO 'YES'
//*

===FILE:CIN01A_JCL_5===
//WSFTPDB4 JOB 'WN35D','NOMADS-CIN01A SFTP',
//         CLASS=9,MSGCLASS=5,
//         COND=(10,LE),
//         REGION=64M,
//         NOTIFY=WNMLG,
//         USER=CSS01
//*        TYPRUN=SCAN
//*        RESTART=
/*ROUTE  PRINT LOCAL
//*
//OUT1  OUTPUT ADDRESS='WELFARE NSWD',
//             BUILDING='WELFARE CENTRAL OFFICE',
//             DEPT='NEVADA STATE WELFARE DIVISION',
//             TITLE=' REPORT -       ',DEFAULT=YES,JESDS=ALL
//*
//* *************************************************************** *
//* DETR (ESD) INTERFACE
//* *************************************************************** *
//*
//ZEKESET1 EXEC PGM=ZEKESET
//* *************************************************************** *
//* 1. WAIT 2 SECONDS TO LET PARENT JOB (WSFTPDA4) FINISH IN ZEKE.
//*
//* THEN UPDATE THE PARENT JOB (WSFTPDA4) SCHEDULED RECORD VARIABLES.
//* NOTE THIS "DOES NOT UPDATE THE JOBS' PERMANENT EMR RECORD".
//* 2. RESET THE JOB WSFTPDA4 RERUN NUMBER OF TIMES VARIABLE = '1'
//*    SO IT DOESN'T RERUN EVERY 10 MINUTES.
//* 3. FORCE (FDONE) JOB WSFTPDA4 INTO A 'DONE' STATUS (SUCCESS FORCED)
//* *************************************************************** *
//SYSPRINT     DD SYSOUT=F
//SYSIN        DD *
 SET WAIT 2
 SET ZCOM 'ZALTER JOB WSFTPDA4 TI 1'
 SET ZCOM 'ZALTER JOB WSFTPDA4 DONE'
//*
//ZEKESET2 EXEC PGM=ZEKESET
//* *************************************************************** *
//*  RESET ZEKE VARIABLE $WFTPRC3 TO 'NO' TO (NO FILE FOUND) STATUS.
//* *************************************************************** *
//SYSPRINT     DD SYSOUT=F
//SYSIN        DD *
 SET VAR $WFTPRC3 TO 'NO'
//*
//*  *****************************************************************
//*  *****************************************************************
//*  **                                                             **
//*  **  NOTE:                                                      **
//*  **    JOB CDP.XX14.ZEKEJCL(CDPWL35Z) HAS (EOJ) DEPENDENCY ON   **
//*  **    SFTP JOB WSFTPDB4.                                       **
//*  **                                                             **
//*  **  RELATED:                                                   **
//*  **    CIN01A WNM91D04 - APPEND ESD FILE TO NOMADS (FOR SDNH).  **
//*  **                                                             **
//*  *****************************************************************
//*  *****************************************************************
//

===FILE:CIN02A_JCL===
//WNM91D05 JOB 'WN35P','NOMADS-CIN02A',
//         CLASS=9,MSGCLASS=5,
//         COND=(10,LE),
//         REGION=64M,
//         NOTIFY=WNMJH,
//         TIME=1440,
//         USER=CSS01
//*        RESTART=
/*ROUTE  PRINT LOCAL
//OUT1  OUTPUT ADDRESS='WELFARE NSWD',
//             BUILDING='WELFARE CENTRAL OFFICE',
//             DEPT='NEVADA STATE WELFARE DIVISION',
//             TITLE=' REPORT -       ',DEFAULT=YES,JESDS=ALL
//JOBLIB       DD DSN=SYSP.DB.DB26.SDSNLOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.EMERG.LOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.PROD.LOAD,DISP=SHR
//*
//STEP1    EXEC PGM=IKJEFT01,DYNAMNBR=20,REGION=32M
//SYSUDUMP     DD SYSOUT=M
//SYSOUX       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//CEEDUMP      DD SYSOUT=M
//SYSABOUT     DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//ELAPRINT     DD SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1330)
//ELASNAP      DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//EZEPRINT     DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//APPLERR      DD SYSOUT=*,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//SYSTSIN      DD *
  DSN SYSTEM(DB26)
  RUN PROG(CIN02A)  PLAN(WNMDB6P1)
  END
/*
//BDATPARM     DD DSN=WNP.WN91.BDATEREC,DISP=SHR
//CIN02IP      DD *
1236
/*
//* 1236
//* NNNN: SDNH MONTHS, IVD_NH_ACTVY MONTHS
//*

===FILE:CIN03A_JCL===
//WNFTPD99 JOB 'WN35P','NOMADS-FTP EWS',
//         CLASS=9,MSGCLASS=5,
//         COND=(10,LE),
//         REGION=64M,
//         NOTIFY=WNMLG,
//         USER=CSS01
//*        RESTART=
/*ROUTE  PRINT LOCAL
//OUT1  OUTPUT ADDRESS='WELFARE NSWD',
//             BUILDING='WELFARE CENTRAL OFFICE',
//             DEPT='NEVADA STATE WELFARE DIVISION',
//             TITLE=' REPORT -       ',DEFAULT=YES,JESDS=ALL
//JOBLIB       DD DSN=SYSP.DB.DB26.SDSNLOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.EMERG.LOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.PROD.LOAD,DISP=SHR
//*
//*==================================================================*
//* EWS - CLARK CO. DA (EMPLOYER DATABASE SYSTEM) INTERFACE FOR
//*       PRINTING FORMS.
//*
//* WNFTPD99 - ZEKE (WEOJ) DEPENDENCIES ON THE FOLLOWING JOBS:
//*
//*                          DMI01A.EWSEV   DOR39A.EWSIWO
//*      JOB NAME    APPL    DATASET        DATASET
//*      --------   ------   ---------      ---------
//*   1. WNM35D09 - CIN05A   //DMI01T1      //DOR39T1
//*   2. WNM35D16 - DNT14A   //DMI01T1
//*   3. WNM35D37 - DFR02A   //DMI01T1
//*   4. WNM35D56 - DLI53A   //DMI01T1      //DOR39T1
//*   5. WNM35M13 - DEF25A                  //DOR39T1
//*   6. WNM35M27 - DEF27A                  //DOR39T1
//*   7. WNM35M75 - DFR02A   //DMI01T1      //DCM21T2
//*   8. WNM35M92 - DCM21A                  //DCM21T2
//*   9. WNM91D06 - CIN03A   //DMI01T1      //DOR39T1
//*  10. WNM35S09 - CIN05A   //DMI01T1      //DOR39T1
//*
//*==================================================================*
//*
//STEP01   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - SCRATCH (DMI01A) FILES
//********************************************************************
//DMI01A       DD DSN=WNP.WN91.DMI01A.EWSEV.OUTPUT,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DOR39A       DD DSN=WNP.WN91.DOR39A.EWSIWO.OUTPUT,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//*
//STEP02   EXEC PGM=ICEGENER
//********************************************************************
//*     ICEGENER - COMBINES THE (DMI01A) FORMS/FILES INTO ONE
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSIN        DD DUMMY
//SYSUT1       DD DSN=WNP.WN91.CIN03A.EWSEV,DISP=SHR
//             DD DSN=WNP.WN91.CIN05A.EWSEV,DISP=SHR
//             DD DSN=WNP.WN91.DFR02A.EWSEV,DISP=SHR
//             DD DSN=WNP.WN91.DFR02A.EWSEV.M75,DISP=SHR
//             DD DSN=WNP.WN91.DLI53A.EWSEV,DISP=SHR
//             DD DSN=WNP.WN91.DNT14A.EWSEV,DISP=SHR
//             DD DSN=WNP.WN91.CIN05A.PUA.EWSEV,DISP=SHR
//SYSUT2       DD DSN=WNP.WN91.DMI01A.EWSEV.OUTPUT,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//*
//STEP03   EXEC PGM=ICEGENER
//********************************************************************
//*     ICEGENER - COMBINES THE (DOR39A & DCM21A) FORMS/FILES INTO ONE
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSIN        DD DUMMY
//SYSUT1       DD DSN=WNP.WN91.CIN03A.EWSIWO,DISP=SHR
//             DD DSN=WNP.WN91.CIN05A.EWSIWO,DISP=SHR
//             DD DSN=WNP.WN91.DCM21A.EWSIWO,DISP=SHR
//             DD DSN=WNP.WN91.DEF25A.EWSIWO,DISP=SHR
//             DD DSN=WNP.WN91.DEF25A.EWSIWO.W05,DISP=SHR
//             DD DSN=WNP.WN91.DEF27A.EWSIWO,DISP=SHR
//             DD DSN=WNP.WN91.DLI53A.EWSIWO,DISP=SHR
//             DD DSN=WNP.WN91.CIN05A.PUA.EWSIWO,DISP=SHR
//SYSUT2       DD DSN=WNP.WN91.DOR39A.EWSIWO.OUTPUT,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//*
//STEP04   EXEC PGM=IEBGENER
//********************************************************************
//*        IEBGENER - BACKUP MERGED EWSEV FILES TO A GDG
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DSN=WNP.WN91.DMI01A.EWSEV.OUTPUT,DISP=SHR
//SYSUT2       DD DSN=WNP.WN91.DMI01A.EWSEV.OUTPUT.GDG(+1),
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=WNP.WN91.DMI01A.EWSEV.OUTPUT
//SYSIN        DD DUMMY
//*
//STEP05   EXEC PGM=IEBGENER
//********************************************************************
//*        IEBGENER - BACKUP MERGED EWSEV FILES TO A GDG
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DSN=WNP.WN91.DOR39A.EWSIWO.OUTPUT,DISP=SHR
//SYSUT2       DD DSN=WNP.WN91.DOR39A.EWSIWO.OUTPUT.GDG(+1),
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=WNP.WN91.DOR39A.EWSIWO.OUTPUT
//SYSIN        DD DUMMY
//*
//STEP06   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - SCRATCH (DMI01A) FILES
//********************************************************************
//DMI01T1      DD DSN=WNP.WN91.CIN03A.EWSEV,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DMI01T2      DD DSN=WNP.WN91.CIN05A.EWSEV,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DMI01T3      DD DSN=WNP.WN91.DFR02A.EWSEV,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DMI01T4      DD DSN=WNP.WN91.DFR02A.EWSEV.M75,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DMI01T5      DD DSN=WNP.WN91.DLI53A.EWSEV,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DMI01T6      DD DSN=WNP.WN91.DNT14A.EWSEV,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DMI01T7      DD DSN=WNP.WN91.CIN05A.PUA.EWSEV,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//*
//STEP07   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - SCRATCH (DOR39A) FILES
//********************************************************************
//DOR39T1      DD DSN=WNP.WN91.CIN03A.EWSIWO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DOR39T2      DD DSN=WNP.WN91.CIN05A.EWSIWO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DOR39T3      DD DSN=WNP.WN91.DEF25A.EWSIWO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DOR39T4      DD DSN=WNP.WN91.DEF25A.EWSIWO.W05,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DOR39T5      DD DSN=WNP.WN91.DEF27A.EWSIWO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DOR39T6      DD DSN=WNP.WN91.DLI53A.EWSIWO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DOR39T7      DD DSN=WNP.WN91.CIN05A.PUA.EWSIWO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//*
//STEP08   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - SCRATCH (DCM21A) FILE
//********************************************************************
//DCM21T1      DD DSN=WNP.WN91.DCM21A.EWSIWO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//*
//STEP09   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - PREDEFINE EWSEV CLARK OUTPUT FILE (DMI01A)
//********************************************************************
//DMI01T1      DD DSN=WNP.WN91.CIN03A.EWSEV,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//DMI01T2      DD DSN=WNP.WN91.CIN05A.EWSEV,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//DMI01T3      DD DSN=WNP.WN91.DFR02A.EWSEV,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(TRK,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//DMI01T4      DD DSN=WNP.WN91.DFR02A.EWSEV.M75,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(TRK,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//DMI01T5      DD DSN=WNP.WN91.DLI53A.EWSEV,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//DMI01T6      DD DSN=WNP.WN91.DNT14A.EWSEV,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(TRK,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//DMI01T7      DD DSN=WNP.WN91.CIN05A.PUA.EWSEV,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//*
//STEP10   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - PREDEFINE EWSIWO CLARK OUTPUT FILE (DOR39A)
//********************************************************************
//DOR39T1      DD DSN=WNP.WN91.CIN03A.EWSIWO,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//DOR39T2      DD DSN=WNP.WN91.CIN05A.EWSIWO,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//DOR39T3      DD DSN=WNP.WN91.DEF25A.EWSIWO,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(TRK,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//DOR39T4      DD DSN=WNP.WN91.DEF25A.EWSIWO.W05,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(TRK,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//DOR39T5      DD DSN=WNP.WN91.DEF27A.EWSIWO,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(TRK,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//DOR39T6      DD DSN=WNP.WN91.DLI53A.EWSIWO,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//DOR39T7      DD DSN=WNP.WN91.CIN05A.PUA.EWSIWO,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//*
//STEP11   EXEC PGM=IEFBR14
//********************************************************************
//*        IEFBR14 - PREDEFINE EWSIWO CLARK OUTPUT FILE (DCM21A)
//********************************************************************
//DCM21T1      DD DSN=WNP.WN91.DCM21A.EWSIWO,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(TRK,(5,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//*
//FTPPUT2  EXEC PGM=FTP,
//         PARM='10.147.11.100 21 (EXIT=12,TIMEOUT 40'
//********************************************************************
//*     FTP TWO (2) FORM FILES FOR CLARK COUNTY DA FOR THERE
//*     EWS - FORMS EMPLOYER DATABASE SYSTEM
//********************************************************************
//SYSTCPD    DD DISP=SHR,DSN=SYS1.S9001.TCPIP.TCPPARMS(TCPDATA)
//SYSFTPD    DD DISP=SHR,DSN=SYS1.S9001.TCPIP.TCPPARMS(FTPSDATA)
//SYSPRINT   DD SYSOUT=*
//SYSDUMP    DD SYSOUT=*
//OUTPUT     DD SYSOUT=*
//INPUT      DD *
psixfr_out
Tr@n5F3r
cd DailyNotices
ascii
put 'wnp.wn91.dmi01a.ewsev.output'   EWSev-$WYYYY.-$WMM.-$WDD..dat
put 'wnp.wn91.dor39a.ewsiwo.output'  EWSiwo-$WYYYY.-$WMM.-$WDD..dat
ls -l
quit
/*
//* put 'WNP.WN91.DMI01A.EWSEV.OUTPUT'   EWSev-$WYYYY.-$WMM.-$WDD..dat
//* put 'WNP.WN91.DOR39A.EWSIWO.OUTPUT'  EWSiwo-$WYYYY.-$WMM.-$WDD..dat
//*
//
//
//*** END OF JCL ***
//
//
//*
//FTPPUT   EXEC PGM=FTP,
//         PARM='10.147.10.14 26 (EXIT=12,TIMEOUT 40'
//*        PARM='10.131.158.37 25 (EXIT=12,TIMEOUT 40'
//********************************************************************
//*     FTP TWO (2) FORM FILES FOR CLARK COUNTY DA FOR THERE
//*     EWS - FORMS EMPLOYER DATABASE SYSTEM
//********************************************************************
//SYSTCPD    DD DISP=SHR,DSN=SYS1.S9001.TCPIP.TCPPARMS(TCPDATA)
//SYSFTPD    DD DISP=SHR,DSN=SYS1.S9001.TCPIP.TCPPARMS(FTPSDATA)
//SYSPRINT   DD SYSOUT=*
//SYSDUMP    DD SYSOUT=*
//OUTPUT     DD SYSOUT=*
//INPUT      DD *
EWS
@EwsUsero1!
ls
ascii
put 'wnp.wn91.dmi01a.ewsev.output'   EWSev.dat
put 'wnp.wn91.dor39a.ewsiwo.output'  EWSiwo.dat
quit
/*
//* put 'WNP.WN91.DMI01A.EWSEV.OUTPUT'   EWSev.dat
//* put 'WNP.WN91.DOR39A.EWSIWO.OUTPUT'  EWSiwo.dat
//*

===FILE:CIN03A_JCL_2===
//WNM91D06 JOB 'WN35P','NOMADS-CIN03A',
//         CLASS=9,MSGCLASS=5,
//         COND=(10,LE),
//         REGION=256M,
//         NOTIFY=WNMJH,
//         USER=CSS01
//*        RESTART=
/*ROUTE  PRINT LOCAL
//OUT1  OUTPUT ADDRESS='WELFARE NSWD',
//             BUILDING='WELFARE CENTRAL OFFICE',
//             DEPT='NEVADA STATE WELFARE DIVISION',
//             TITLE=' REPORT -       ',DEFAULT=YES,JESDS=ALL
//JOBLIB       DD DSN=SYSP.DB.DB26.SDSNLOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.EMERG.LOAD,DISP=SHR
//             DD DSN=WNM.WN91.ZOSBATCH.PROD.LOAD,DISP=SHR
//             DD DSN=SYSP.AS.SFSNLOD0,DISP=SHR
//             DD DSN=SYS2.PL.LINKLIB,DISP=SHR
//             DD DSN=SYSP.DF.DCFLOAD,DISP=SHR
//*
//STEP1    EXEC PGM=IEFBR14
//SIBZERO      DD DSN=WNP.WN91.CIN03A.SIBZERO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DMI01T1      DD DSN=WNP.WN91.CIN03A.EWSEV,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//DOR39T1      DD DSN=WNP.WN91.CIN03A.EWSIWO,
//             DISP=(MOD,DELETE,DELETE),SPACE=(TRK,(0,0))
//*
//STEP2    EXEC PGM=IEFBR14
//SIBZERO      DD DSN=WNP.WN91.CIN03A.SIBZERO,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM031,
//             DCB=(LRECL=7180,RECFM=VB,BLKSIZE=0)
//DMI01T1      DD DSN=WNP.WN91.CIN03A.EWSEV,
//             DISP=(,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=1573,RECFM=FB,BLKSIZE=26741)
//DOR39T1      DD DSN=WNP.WN91.CIN03A.EWSIWO,
//             DISP=(NEW,CATLG,DELETE),UNIT=3390,DSORG=PS,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM032,
//             DCB=(LRECL=2270,RECFM=FB,BLKSIZE=0)
//*
//STEP3    EXEC PGM=IKJEFT01,DYNAMNBR=20,REGION=32M
//SYSUDUMP     DD SYSOUT=M
//SYSDBOUT     DD SYSOUT=M
//SYSABOUT     DD SYSOUT=M
//CEEDUMP      DD SYSOUT=M
//SYSOUX       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//ELAPRINT     DD SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1330)
//ELASNAP      DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//EZEPRINT     DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//APPLERR      DD SYSOUT=*,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//SYSTSIN      DD *
  DSN SYSTEM(DB26)
  RUN PROG(CIN03A)  PLAN(WNMDB6P1)
  END
/*
//BDATPARM     DD DSN=WNP.WN91.BDATEREC,DISP=SHR
//SIBZERO      DD DSN=WNP.WN91.CIN03A.SIBZERO,DISP=MOD
//DMI01T1      DD DSN=WNP.WN91.CIN03A.EWSEV,DISP=MOD
//DOR39T1      DD DSN=WNP.WN91.CIN03A.EWSIWO,DISP=MOD
//*
//STEP4    EXEC PGM=IEBGENER
//********************************************************************
//*        IEBGENER - FIX POSSIBLE DSORG=NONE CONDITION
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DUMMY,DCB=WNP.WN91.CIN03A.SIBZERO
//SYSUT2       DD DISP=MOD,DSN=WNP.WN91.CIN03A.SIBZERO
//SYSIN        DD DUMMY
//*
//STEP5    EXEC PGM=IEBGENER
//********************************************************************
//*        IEBGENER - FIX POSSIBLE DSORG=NONE CONDITION
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DUMMY,DCB=WNP.WN91.CIN03A.EWSEV
//SYSUT2       DD DISP=MOD,DSN=WNP.WN91.CIN03A.EWSEV
//SYSIN        DD DUMMY
//*
//STEP6    EXEC PGM=IEBGENER
//********************************************************************
//*        IEBGENER - FIX POSSIBLE DSORG=NONE CONDITION
//********************************************************************
//SYSPRINT     DD SYSOUT=*
//SYSUT1       DD DUMMY,DCB=WNP.WN91.CIN03A.EWSIWO
//SYSUT2       DD DISP=MOD,DSN=WNP.WN91.CIN03A.EWSIWO
//SYSIN        DD DUMMY
//*
//STEP7    EXEC PGM=IEFBR14
//SYS001       DD DSN=WNP.WN91.CIN03A.SIBZERO.HDR,
//             DISP=(MOD,DELETE),UNIT=3390,SPACE=(TRK,(1,1))
//SYS002       DD DSN=WNP.WN91.CIN03A.SIBZERO.NOH,
//             DISP=(MOD,DELETE),UNIT=3390,SPACE=(TRK,(1,1))
//SYS003       DD DSN=WNP.WN91.CIN03A.SIBZERO.N014,
//             DISP=(MOD,DELETE),UNIT=3390,SPACE=(TRK,(1,1))
//SYS004       DD DSN=WNP.WN91.CIN03A.SIBZERO.N154,
//             DISP=(MOD,DELETE),UNIT=3390,SPACE=(TRK,(1,1))
//SYS005       DD DSN=WNP.WN91.CIN03A.SIBZERO.N155,
//             DISP=(MOD,DELETE),UNIT=3390,SPACE=(TRK,(1,1))
//*
//********************************************************************
//*        CREATE ALERTS FOR CERTAIN FORMS
//********************************************************************
//AS10ALRT EXEC PGM=IKJEFT01,DYNAMNBR=20,REGION=32M,TIME=120
//SYSUDUMP     DD SYSOUT=M
//SYSOUX       DD SYSOUT=*
//SYSOUT       DD SYSOUT=*
//CEEDUMP      DD SYSOUT=M
//SYSABOUT     DD SYSOUT=*
//SYSPRINT     DD SYSOUT=*
//SYSTSPRT     DD SYSOUT=*
//ELAPRINT     DD SYSOUT=*,DCB=(RECFM=FBA,BLKSIZE=1330)
//ELASNAP      DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//EZEPRINT     DD SYSOUT=*,DCB=(RECFM=VBA,BLKSIZE=4096)
//APPLERR      DD SYSOUT=*,DCB=(RECFM=FB,LRECL=80,BLKSIZE=800)
//INFILE       DD DISP=SHR,DSN=WNP.WN91.CIN03A.SIBZERO
//SYSTSIN      DD *
  DSN SYSTEM(DB26)
  RUN PROG(DFM33A)  PLAN(WNMDB6P1)
  END
/*
//AS10SPLT EXEC PGM=SORT,PARM='CORE=MAX'
//********************************************************************
//*            DFSORT - SPLIT SIB INPUT FILE INTO MULTIPLE FILES
//********************************************************************
//SORTDIAG     DD DUMMY
//SYSOUT       DD SYSOUT=*
//SORTIN       DD DISP=SHR,DSN=WNP.WN91.CIN03A.SIBZERO
//OUT1         DD DSN=WNP.WN91.CIN03A.SIBZERO.N014,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM029,
//             DCB=(LRECL=7180,RECFM=VB,BLKSIZE=0)
//OUT2         DD DSN=WNP.WN91.CIN03A.SIBZERO.N154,
//             DISP=(,CATLG,DELETE),UNIT=3390,
//             SPACE=(CYL,(1,25),RLSE),VOL=SER=WNM029,