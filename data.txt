<%--
**************************************************************************************************
Name: [ABRegistration.jsp]		Created By: [Surendra Nath]		Created On: [01/5/2006]
Purpose: [YOUR PURPOSE]
Modification Logs:
Modified By 			Date				Reason & description
[MODIFIED NAME]		    [MM/DD/YYYY]		[REASON FOR CHANGE]
Matt VanLenten			1/31/13				Update to IL standards ILIES-69318
***************************************************************************************************
--%>

<%-- NOT EDITABLE - Fw Page Directive, Imports, and URIs --%>
<%@page import="gov.illinois.access.business.utility.StringUtils"%>
<%@ include file = "/frameworkIncludes/directives.jsp" %>
<%-- EDITABLE - Page Specific Imports and URIs (You can add code to this section) --%>
<%@page import="gov.illinois.access.business.entities.APP_RGST_Cargo"%>
<%@page import="gov.illinois.access.business.entities.APP_INDV_Cargo"%>
<%@page import="gov.illinois.framework.management.references.IReferenceConstants"%>
<%@page import="gov.illinois.access.management.programs.IProgramManager"%>
<%@page import="gov.illinois.access.management.programs.FwProgramManager"%>
<%-- EDITABLE - Page Specific useBean tags(You can add code to this section) --%>
<jsp:useBean id="SKIP_VALIDATE" class="java.lang.String" scope="request" />
<AP:FwHeadTag currentPageID="ABPHH" defaultPageAction="ABPHHNext" displayNavLinks="<%=FwConstants.NO%>" />
<jsp:useBean id="peopleInYourHome" class="gov.illinois.access.presentation.pageElements.PeopleInYourHome" scope="application" />
<jsp:useBean id="taxDependent" class="gov.illinois.access.presentation.pageElements.TaxDependent" scope="application" />
<jsp:useBean id="taxFile" class="gov.illinois.access.presentation.pageElements.TaxFile" scope="application" />
<jsp:useBean id="peopleLiveInYourHome" class="gov.illinois.access.presentation.pageElements.PeopleLiveInYourHome" scope="application" />
<%-- EDITABLE - Page specific .js or .css files (You can add code to this section) --%>
<tr><td>
<!-- <script language="JavaScript" type="text/JavaScript" SRC="/access/js/jquery-1.11.2.min.js"></script> -->
<script language="JavaScript" type="text/JavaScript" SRC="/access/js/hoverHelp.js"></script>
</td></tr>
<%-- NOT EDITABLE - Welcome Tag and Toolbar Tag --%>
<AP:FwWelcomeTag>
	<AP:FwToolbarTag />
</AP:FwWelcomeTag>

<%-- NOT EDITABLE - Framework Hidden Fields --%>
<TL:FwHiddenFieldsTag />

<%-- EDITABLE - Page Specific Hidden Fields (You can add code to this section) --%>

<%--NOT EDITABLE - Message Display Table  --%>
<AP:FwMessageDisplayTag />

<%--NOT EDITABLE - Begin BodyTableTag. --%>
<AP:FwBodyTableTag hideNav="N">
	<AP:AFBMenuTag />

	<%--NOT EDITABLE - End BodyTableTag. --%>
</AP:FwBodyTableTag>

<%-- EDITABLE (You can add code to this section) - Page Specific Table(s) - This is each developers area for coding the presentation. --%>
<%!private String paddingNumbers(String number, int length) {
	int caseLength = number.length();
	StringBuffer paddedCase = null;
	//Zero pading(Leading) 
	if (caseLength < length) {
		paddedCase = new StringBuffer();
		for (int m = 0; m < (length - caseLength); m++) {
			paddedCase.append("0");
		}
		number = paddedCase.append(number).toString();
	}
	return number;
}%>
<% 	
String previousCount = (String) request.getAttribute("BEFORE_PEOPLE_COUNT");
String previousChildCount = (String) request.getAttribute("BEFORE_CHILD_COUNT");
short[] pgmKey = (short[]) session.getAttribute(FwConstants.AFB_PROGRAM_KEY);
IProgramManager programManager = FwProgramManager.getInstance();
boolean isMSPOnlyProgramRequested = programManager.isMSPOnlyProgramRequested(pgmKey);
boolean isMedicalOnlySelected = programManager.isMedicalOnlyProgramRequested(pgmKey);
boolean isFppOnly = programManager.isFPPOnlyProgramRequested(pgmKey);
boolean isSNAPOnlySelected = programManager.isSNAPOnlyProgramRequested(pgmKey);
boolean isMedicalSNAPSelected = programManager.isMedicalSNAPProgramRequested(pgmKey);
boolean isMedicalCashSNAPSelected = programManager.isMedicalCashSNAPProgramRequested(pgmKey);
// ILIES-311795 starts here
boolean isCashOnlySelected  = programManager.isCashOnlyProgramRequested(pgmKey);
boolean isMedicalAndFpSelected  = programManager.isMedicalAndFamilyPlanning(pgmKey);
boolean isMedicalAndFpOnlySelected  = programManager.isMedicalAndFamilyPlanningOnly(pgmKey);
String textVal=null;
String textForMed=null;
/* isMedicalOnlySelected=true;
isMSPOnlyProgramRequested=false;
isFppOnly=false;
isCashOnlySelected=false;  */
if (isMedicalAndFpSelected){
textVal="180017237";
textForMed="180017266";
}
else{
textVal="32123";
}
if (isMedicalAndFpOnlySelected){
textForMed="180017238";
}
// ILIES-311795 ends here
boolean docPvlg = false;
String docMhProvider = AppConstants.NO;
if (null != session && session.getAttribute(AppConstants.DOC_MH_PROVIDER) != null) {
	docMhProvider = (String) session.getAttribute(AppConstants.DOC_MH_PROVIDER);
	if (StringUtils.isNotEmpty(docMhProvider) && "Y".equalsIgnoreCase(docMhProvider)) {
		docPvlg = true;
	}
}

String peopleCount = "";
if (session.getAttribute("peopleInYourHome") != null && !session.getAttribute("peopleInYourHome").equals("SEL")) {
		peopleCount = (String) session.getAttribute("peopleInYourHome");
		peopleCount = paddingNumbers(peopleCount, 3);
}
// ILIES-311795 starts here
String taxCount = "";
if (session.getAttribute("taxFile") != null) {
		taxCount = (String) session.getAttribute("taxFile");
		taxCount = paddingNumbers(taxCount, 3);
}
String taxDependentCount = "";
if (session.getAttribute("taxDependent") != null) {
		taxDependentCount = (String) session.getAttribute("taxDependent");
		taxDependentCount = paddingNumbers(taxDependentCount, 3);
} //ILIES-311795 ends here
boolean disableCount = false;
if (request.getAttribute("DISABLE_COUNT") != null) {
		disableCount = (Boolean) request.getAttribute("DISABLE_COUNT");
}
%>	
<% if(docPvlg){%>
<TABLE BORDER="0" WIDTH="100%">
		<TR>
			<TD><AP:FwSubsectionTag textID="32123" headerLevel="<%=FwConstants.HEADER_LEVEL_H1%>">
				<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"
					 role="presentation">
					<TBODY>
						<TR>
							<TD COLSPAN="10" STYLE="padding: 10">							
								<%-- START - ravrajendran ILIES-133617 - ABE - SSA Edits (State List) / ABHMD - Count of People  --%>
								<!-- ILIES-311729: Removed helper icon from  People in the Home section -->	
								 <AP:FwHoverHelpTag hoverHelpTitle="131607" altId="32123" hoverHelpText="131612" var="peopleInHomeHover" width="medium"/>
								 <%
								 if(isMedicalOnlySelected || isFppOnly){%>
								 <AP:FwPageLabelTag textID="93001" bean="<%=peopleInYourHome%>" tagRequired="Y" />
								 <% } else {%>
								 <AP:FwPageLabelTag textID="93002" bean="<%=peopleInYourHome%>" tagRequired="Y" />
								 <%String[] sub1 = { "ABPHH", "", "1" };%> 							     
								 ${peopleInHomeHover}						 
								 <% }%>
								<%-- END - ravrajendran ILIES-133617 - ABE - SSA Edits (State List) / ABHMD - Count of People  --%>
							</TD>
							<TD COLSPAN="4" STYLE="padding: 5">
								
								<AP:FwRTSelectTag bean="<%=peopleInYourHome%>"  referenceTableName="TPHH" columnId="832" tagValueName="32123" selected="<%=peopleCount%>"/></TD>
						</TR>
					</TBODY>
				</TABLE>
			</AP:FwSubsectionTag></TD>
		</TR>
	<TR>
		<TD>
		<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"
			 role="presentation">
			<TR>
				<TD ALIGN="right"><AP:FwButtonCSSTag
					button="<%=AppConstants.BUTTON_BACK2%>" pageAction="ABPHHPrevious"
					name="Back" langButton="true" /> <AP:FwButtonCSSTag
					button="<%=AppConstants.BUTTON_SAVE_EXIT%>"
					pageAction="ABPHHSave" name="SaveAndExit" langButton="true" /> <AP:FwButtonCSSTag styleClass="button-col-dark"
					button="<%=AppConstants.BUTTON_NEXT1%>" pageAction="ABPHHNext"
					name="Next" langButton="true" /></TD>
			</TR>
		</TABLE>
		</TD>
	</TR>
</TABLE>
<%-- ILIES-311795 starts here  --%>
<% } else {%>
<TABLE BORDER="0" WIDTH="100%">
		<TR>
			<TD>
			<AP:FwSubsectionTag textID="<%=textVal %>" headerLevel="<%=FwConstants.HEADER_LEVEL_H1%>">
			
				<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"
					 role="presentation">
					<TBODY>
					 <%
								 if ("180017237".equalsIgnoreCase(textVal)){%>
					<TR>
							<TD> <AP:FwPageLabelTag textID="180017241" /> </TD>
							<TD width="5%">&nbsp;</TD>
							<TD> </TD>
							</TR>
					<TR>
							<TD COLSPAN="10" STYLE="padding: 10">							
								<%-- START - ravrajendran ILIES-133617 - ABE - SSA Edits (State List) / ABHMD - Count of People  --%>
								<%--  <AP:FwHoverHelpTag hoverHelpTitle="131607" altId="32123" hoverHelpText="131612" var="peopleInHomeHover" width="medium"/> --%>
								
								<TR> 
							<TD> <AP:FwPageLabelTag textID="<%=textForMed %>" bean="<%=peopleInYourHome%>" tagRequired="Y" /> </TD>
							<TD width="5%">&nbsp;</TD>
							<TD > <AP:FwRTSelectTag bean="<%=peopleInYourHome%>"  referenceTableName="TPHH" columnId="832" tagValueName="32123" selected="<%=peopleCount%>" other="onChange=\"householdTotal();\""/></TD>
								</TR>
								<%
							if (isMedicalAndFpOnlySelected){ %>
							   <TR>
                               <TD> <AP:FwPageLabelTag textID="180017243" /> </TD>
                               </TR>
                             <%} else {%>
								 <TR>
							<TD>  </TD>
							<TD width="5%">&nbsp;</TD>
							<TD> </TD>
								</TR>
								  <%}%>
								
								
								<TR>
							<TD> <AP:FwPageLabelTag textID="180017239" bean="<%=taxFile%>" tagRequired="Y" /> </TD>
							<TD width="5%">&nbsp;</TD>
							<TD > <AP:FwRTSelectTag bean="<%=taxFile%>"  referenceTableName="TPHT" columnId="333469" tagValueName="32123" selected="<%=taxCount%>" other="onChange=\"householdTotal();\""/></TD>
								</TR>
								<TR>
							<TD>  </TD>
							<TD width="5%">&nbsp;</TD>
							<TD> </TD>
								</TR>
								<TR>
							<TD> <AP:FwPageLabelTag textID="180017240" bean="<%=taxDependent%>" tagRequired="Y" /> </TD>
							<TD width="5%">&nbsp;</TD>
							<TD >  <AP:FwRTSelectTag bean="<%=taxDependent%>"  referenceTableName="TPHT" columnId="333469" tagValueName="32123" selected="<%=taxDependentCount%>"/></TD>
								</TR>
								 <TR>
							<TD>  </TD>
							<TD width="5%">&nbsp;</TD>
							<TD> </TD>
								</TR> 
								<TR>
							<TD> <AP:FwPageLabelTag textID="180017242"/></TD>
							<TD width="5%">&nbsp;
							<span id="householdTotal">0</span>
							
							</TD>
							
								</TR>
								 <% } else {%>
								 <TR>
								<TD> <AP:FwPageLabelTag textID="180017259" bean="<%=peopleInYourHome%>" tagRequired="Y" /></TD>
								 <TD COLSPAN="4" STYLE="padding: 5">
								
								<AP:FwRTSelectTag bean="<%=peopleInYourHome%>"  referenceTableName="TPHH" columnId="832" tagValueName="32123" selected="<%=peopleCount%>"/></TD>
								 <%String[] sub1 = { "ABPHH", "", "1" };%> 							     
								<%--  ${peopleInHomeHover} 	 --%>	
								 </TR>				 
								 <% }%>
								
								<%-- END - ravrajendran ILIES-133617 - ABE - SSA Edits (State List) / ABHMD - Count of People  --%>
							</TD>
							
						</TR>
					</TBODY>
				</TABLE>
			</AP:FwSubsectionTag></TD>
		</TR>
	<TR>
		<TD>
		<TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"
			 role="presentation">
			<TR>
				<TD ALIGN="right"><AP:FwButtonCSSTag
					button="<%=AppConstants.BUTTON_BACK2%>" pageAction="ABPHHPrevious"
					name="Back" langButton="true" /> <AP:FwButtonCSSTag
					button="<%=AppConstants.BUTTON_SAVE_EXIT%>"
					pageAction="ABPHHSave" name="SaveAndExit" langButton="true" /> <AP:FwButtonCSSTag styleClass="button-col-dark"
					button="<%=AppConstants.BUTTON_NEXT1%>" pageAction="ABPHHNext"
					name="Next" langButton="true" /></TD>
			</TR>
		</TABLE>
		</TD>
	</TR>
</TABLE>
 <% }%>
 <%-- ILIES-311795 starts here  --%>
<script type="text/javascript">
<% if(disableCount){%>
	document.getElementById("peopleInYourHome").disabled=true;
	<%-- ILIES-316702 starts here  --%>
	document.getElementById("taxFile").disabled=true;
	document.getElementById("taxDependent").disabled=true;
	<%-- ILIES-316702 ends here  --%>
<% } %>
window.onload = function() {
 if(Boolean(<%=docPvlg%>)){ 
	document.getElementById("peopleInYourHome").value="001";
	document.getElementById("peopleInYourHome").disabled=true;
}
else {
householdTotal();
}
		};
		function householdTotal() {
    var live = document.getElementById("peopleInYourHome").value;
    var outside = document.getElementById("taxFile").value;
    var totalField = document.getElementById("householdTotal");
   
    function num(v) { var n=parseInt(v,10); return isNaN(n)?0:n; }
    var total = num(live) + num(outside);
    if(totalField){
    	 totalField.innerText = total;
    	
    }
}
</script>
<%-- NOT EDITABLE - Legal Disclaimer Table --%>
<AP:FwPageLegalTag />