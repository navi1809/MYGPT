<%@ include file="../libraryinclude.jsp"%>


<div id="waiverSearch">	
		<table style="width: 100%" cellpadding='2' cellspacing='1' id='waiversSearchResultsSummaryTable' class="summary-table-body">
			<thead>
				<tr>
					<th><spring:message code="waiver.text.select" /></th>
					<th><spring:message code="waiver.text.referralId" /></th>
					<th style="min-width: 53px;"><spring:message code="waiver.text.ssn" /></th>
					<th><spring:message code="waiver.text.lastName" /></th>
					<th><spring:message code="waiver.text.firstName" /></th>
					<th><spring:message code="waiver.text.DOB" /></th>
					<th><spring:message code="waiver.text.WaiverType" /></th>
					<th><spring:message code="waiver.text.waiverStatus" /></th>
					<th><spring:message code="waiver.text.completedOn" /></th>
					<th><spring:message code="waiver.text.dateOfLastAction" /></th>
					<th><spring:message code="waiver.text.lastAction" /></th>
				</tr>
			</thead>
			<tbody>
			<c:forEach var="detailRow" items="${searchAgencyViewBeanList}"  varStatus="rowstatus">
			 <c:choose>
				<c:when test="${not empty searchAgencyViewBeanList}">
				
				<tr>
					<td><input type="radio" name="selectedRecordWaiversSearch"
						value="${detailRow.referralId}#${detailRow.agencyCode}#${detailRow.statusCode}#${detailRow.step}#${detailRow.waiverStatus}"
						id="table_radio_${detailRow.referralId}"
						onclick="displayWaiversStatusDetails(this.value)" /></td>
					<td>${detailRow.referralId}</td>
					<td>${detailRow.ssn}</td>
					<td>${detailRow.lastName}</td>
					<td>${detailRow.firstName}</td>
					<td>${detailRow.dob}</td>
					<td>${detailRow.waiverType}</td>
					<td>${detailRow.referralStatus}</td>
					<td>${detailRow.completedOn}</td>
					<td>${detailRow.receivedDate}</td>
					<td>${detailRow.applicationStatus}</td>
				</tr>
				</c:when>
			</c:choose>
			</c:forEach>
			</tbody>
		</table>
		
		<%-- <table width="100%">
			<tr>
				<td>
					<button class="portlet-form-button" id="completedRefExportToExcelBtn" onclick="waiverGenerateNodReport($('#waiversForm'),'waiverExportNodToExcel');return false;">
						<font style="font-weight: bold" size='2'><spring:message code="waiver.text.exportMailMerge" /></font>
					</button>
				
			</tr>
		</table> --%>
	</div>	
		
<div id="waiversStatusHome"></div>
<script>
var isdSummaryTable = "";

$(document).ready(function() {
	fetchSummaryData();
	
});

function fetchSummaryData(){
	
	 	isdSummaryTable = $("#waiversSearchResultsSummaryTable").DataTable({
		"pagingType" : "full_numbers",
		"pageLength" : 10,
		"lengthMenu" : [ 10, 25, 50, 100 ],
		"aaSorting" : [[ 8, "asc" ]],
		"columnDefs" : [ { orderable: false, targets: [0]},
			   { render: function (data) {
			               var ssn = data;
			               if (ssn !== null && ssn !== undefined && ssn.trim() !== '') {
			               ssn = data.substring(0,3)+'-'+data.substring(3,5)+'-'+data.substring(5);
			               }
			               return ssn;
			             },
				"targets" : [ 2 ]
				
			} ],
		"language" : {
			"emptyTable" : "No Record Found.",
			"infoFiltered" : " "
		}
	});
}

</script>